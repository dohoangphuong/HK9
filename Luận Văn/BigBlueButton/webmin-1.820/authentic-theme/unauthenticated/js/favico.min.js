(function(){var a=(function(e){e=(e)?e:{};var y={bgColor:"#d00",textColor:"#fff",fontFamily:"sans-serif",fontStyle:"bold",type:"circle",position:"down",animation:"slide",elementId:false,dataUrl:false,win:window};var m,A,g,C,u,w,j,f,t,v,r,p,s,c,F,i;s={};s.ff=typeof InstallTrigger!="undefined";s.chrome=!!window.chrome;s.opera=!!window.opera||navigator.userAgent.indexOf("Opera")>=0;s.ie=false;s.safari=Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0;s.supported=(s.chrome||s.ff||s.opera);var o=[];r=function(){};f=p=false;var z=function(){m=n(y,e);m.bgColor=G(m.bgColor);m.textColor=G(m.textColor);m.position=m.position.toLowerCase();m.animation=(D.types[""+m.animation])?m.animation:y.animation;i=m.win.document;var L=m.position.indexOf("up")>-1;var M=m.position.indexOf("left")>-1;if(L||M){for(var I in D.types){for(var J=0;J<D.types[I].length;J++){var K=D.types[I][J];if(L){if(K.y<0.6){K.y=K.y-0.4}else{K.y=K.y-2*K.y+(1-K.w)}}if(M){if(K.x<0.6){K.x=K.x-0.4}else{K.x=K.x-2*K.x+(1-K.h)}}D.types[I][J]=K}}}m.type=(l[""+m.type])?m.type:y.type;A=q.getIcon();u=document.createElement("canvas");j=document.createElement("img");if(A.hasAttribute("href")){j.setAttribute("crossOrigin","anonymous");j.onload=function(){g=(j.height>0)?j.height:32;C=(j.width>0)?j.width:32;u.height=g;u.width=C;w=u.getContext("2d");E.ready()};j.setAttribute("src",A.getAttribute("href"))}else{j.onload=function(){g=32;C=32;j.height=g;j.width=C;u.height=g;u.width=C;w=u.getContext("2d");E.ready()};j.setAttribute("src","")}};var E={};E.ready=function(){f=true;E.reset();r()};E.reset=function(){if(!f){return}o=[];t=false;v=false;w.clearRect(0,0,C,g);w.drawImage(j,0,0,C,g);q.setIcon(u);window.clearTimeout(c);window.clearTimeout(F)};E.start=function(){if(!f||v){return}var J=function(){t=o[0];v=false;if(o.length>0){o.shift();E.start()}else{}};if(o.length>0){v=true;var I=function(){["type","animation","bgColor","textColor","fontFamily","fontStyle"].forEach(function(K){if(K in o[0].options){m[K]=o[0].options[K]}});D.run(o[0].options,function(){J()},false)};if(t){D.run(t.options,function(){I()},true)}else{I()}}};var l={};var k=function(I){I.n=((typeof I.n)==="number")?Math.abs(I.n|0):I.n;I.x=C*I.x;I.y=g*I.y;I.w=C*I.w;I.h=g*I.h;I.len=(""+I.n).length;return I};l.circle=function(J){J=k(J);var I=false;if(J.len===2){J.x=J.x-J.w*0.4;J.w=J.w*1.4;I=true}else{if(J.len>=3){J.x=J.x-J.w*0.65;J.w=J.w*1.65;I=true}}w.clearRect(0,0,C,g);w.drawImage(j,0,0,C,g);w.beginPath();w.font=m.fontStyle+" "+Math.floor(J.h*(J.n>99?0.85:1))+"px "+m.fontFamily;w.textAlign="center";if(I){w.moveTo(J.x+J.w/2,J.y);w.lineTo(J.x+J.w-J.h/2,J.y);w.quadraticCurveTo(J.x+J.w,J.y,J.x+J.w,J.y+J.h/2);w.lineTo(J.x+J.w,J.y+J.h-J.h/2);w.quadraticCurveTo(J.x+J.w,J.y+J.h,J.x+J.w-J.h/2,J.y+J.h);w.lineTo(J.x+J.h/2,J.y+J.h);w.quadraticCurveTo(J.x,J.y+J.h,J.x,J.y+J.h-J.h/2);w.lineTo(J.x,J.y+J.h/2);w.quadraticCurveTo(J.x,J.y,J.x+J.h/2,J.y)}else{w.arc(J.x+J.w/2,J.y+J.h/2,J.h/2,0,2*Math.PI)}w.fillStyle="rgba("+m.bgColor.r+","+m.bgColor.g+","+m.bgColor.b+","+J.o+")";w.fill();w.closePath();w.beginPath();w.stroke();w.fillStyle="rgba("+m.textColor.r+","+m.textColor.g+","+m.textColor.b+","+J.o+")";if((typeof J.n)==="number"&&J.n>999){w.fillText(((J.n>9999)?9:Math.floor(J.n/1000))+"k+",Math.floor(J.x+J.w/2),Math.floor(J.y+J.h-J.h*0.2))}else{w.fillText(J.n,Math.floor(J.x+J.w/2),Math.floor(J.y+J.h-J.h*0.15))}w.closePath()};l.rectangle=function(J){J=k(J);var I=false;if(J.len===2){J.x=J.x-J.w*0.4;J.w=J.w*1.4;I=true}else{if(J.len>=3){J.x=J.x-J.w*0.65;J.w=J.w*1.65;I=true}}w.clearRect(0,0,C,g);w.drawImage(j,0,0,C,g);w.beginPath();w.font=m.fontStyle+" "+Math.floor(J.h*(J.n>99?0.9:1))+"px "+m.fontFamily;w.textAlign="center";w.fillStyle="rgba("+m.bgColor.r+","+m.bgColor.g+","+m.bgColor.b+","+J.o+")";w.fillRect(J.x,J.y,J.w,J.h);w.fillStyle="rgba("+m.textColor.r+","+m.textColor.g+","+m.textColor.b+","+J.o+")";if((typeof J.n)==="number"&&J.n>999){w.fillText(((J.n>9999)?9:Math.floor(J.n/1000))+"k+",Math.floor(J.x+J.w/2),Math.floor(J.y+J.h-J.h*0.2))}else{w.fillText(J.n,Math.floor(J.x+J.w/2),Math.floor(J.y+J.h-J.h*0.15))}w.closePath()};var h=function(J,I){I=((typeof I)==="string"?{animation:I}:I)||{};r=function(){try{if(typeof(J)==="number"?(J>0):(J!=="")){var K={type:"badge",options:{n:J}};if("animation" in I&&D.types[""+I.animation]){K.options.animation=""+I.animation}if("type" in I&&l[""+I.type]){K.options.type=""+I.type}["bgColor","textColor"].forEach(function(M){if(M in I){K.options[M]=G(I[M])}});["fontStyle","fontFamily"].forEach(function(M){if(M in I){K.options[M]=I[M]}});o.push(K);if(o.length>100){throw new Error("Too many badges requests in queue.")}E.start()}else{E.reset()}}catch(L){throw new Error("Error setting badge. Message: "+L.message)}};if(f){r()}};var x=function(I){r=function(){try{var J=I.width;var L=I.height;var M=document.createElement("img");var K=(J/C<L/g)?(J/C):(L/g);M.setAttribute("crossOrigin","anonymous");M.onload=function(){w.clearRect(0,0,C,g);w.drawImage(M,0,0,C,g);q.setIcon(u)};M.setAttribute("src",I.getAttribute("src"));M.height=(L/K);M.width=(J/K)}catch(N){throw new Error("Error setting image. Message: "+N.message)}};if(f){r()}};var B=function(I){r=function(){try{if(I==="stop"){p=true;E.reset();p=false;return}I.addEventListener("play",function(){H(this)},false)}catch(J){throw new Error("Error setting video. Message: "+J.message)}};if(f){r()}};var b=function(J){if(!window.URL||!window.URL.createObjectURL){window.URL=window.URL||{};window.URL.createObjectURL=function(K){return K}}if(s.supported){var I=false;navigator.getUserMedia=navigator.getUserMedia||navigator.oGetUserMedia||navigator.msGetUserMedia||navigator.mozGetUserMedia||navigator.webkitGetUserMedia;r=function(){try{if(J==="stop"){p=true;E.reset();p=false;return}I=document.createElement("video");I.width=C;I.height=g;navigator.getUserMedia({video:true,audio:false},function(L){I.src=URL.createObjectURL(L);I.play();H(I)},function(){})}catch(K){throw new Error("Error setting webcam. Message: "+K.message)}};if(f){r()}}};function H(I){if(I.paused||I.ended||p){return false}try{w.clearRect(0,0,C,g);w.drawImage(I,0,0,C,g)}catch(J){}F=setTimeout(function(){H(I)},D.duration);q.setIcon(u)}var q={};q.getIcon=function(){var J=false;var I=function(){var M=i.getElementsByTagName("head")[0].getElementsByTagName("link");for(var K=M.length,L=(K-1);L>=0;L--){if((/(^|\s)icon(\s|$)/i).test(M[L].getAttribute("rel"))){return M[L]}}return false};if(m.element){J=m.element}else{if(m.elementId){J=i.getElementById(m.elementId);J.setAttribute("href",J.getAttribute("src"))}else{J=I();if(J===false){J=i.createElement("link");J.setAttribute("rel","icon");i.getElementsByTagName("head")[0].appendChild(J)}}}J.setAttribute("type","image/png");return J};q.setIcon=function(K){var J=K.toDataURL("image/png");if(m.dataUrl){m.dataUrl(J)}if(m.element){m.element.setAttribute("href",J);m.element.setAttribute("src",J)}else{if(m.elementId){var L=i.getElementById(m.elementId);L.setAttribute("href",J);L.setAttribute("src",J)}else{if(s.ff||s.opera){var I=A;A=i.createElement("link");if(s.opera){A.setAttribute("rel","icon")}A.setAttribute("rel","icon");A.setAttribute("type","image/png");i.getElementsByTagName("head")[0].appendChild(A);A.setAttribute("href",J);if(I.parentNode){I.parentNode.removeChild(I)}}else{A.setAttribute("href",J)}}}};function G(K){var J=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;K=K.replace(J,function(M,O,N,L){return O+O+N+N+L+L});var I=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(K);return I?{r:parseInt(I[1],16),g:parseInt(I[2],16),b:parseInt(I[3],16)}:false}function n(L,I){var K={};var J;for(J in L){K[J]=L[J]}for(J in I){K[J]=I[J]}return K}function d(){return i.hidden||i.msHidden||i.webkitHidden||i.mozHidden}var D={};D.duration=40;D.types={};D.types.fade=[{x:0.4,y:0.4,w:0.6,h:0.6,o:0},{x:0.4,y:0.4,w:0.6,h:0.6,o:0.1},{x:0.4,y:0.4,w:0.6,h:0.6,o:0.2},{x:0.4,y:0.4,w:0.6,h:0.6,o:0.3},{x:0.4,y:0.4,w:0.6,h:0.6,o:0.4},{x:0.4,y:0.4,w:0.6,h:0.6,o:0.5},{x:0.4,y:0.4,w:0.6,h:0.6,o:0.6},{x:0.4,y:0.4,w:0.6,h:0.6,o:0.7},{x:0.4,y:0.4,w:0.6,h:0.6,o:0.8},{x:0.4,y:0.4,w:0.6,h:0.6,o:0.9},{x:0.4,y:0.4,w:0.6,h:0.6,o:1}];D.types.none=[{x:0.4,y:0.4,w:0.6,h:0.6,o:1}];D.types.pop=[{x:1,y:1,w:0,h:0,o:1},{x:0.9,y:0.9,w:0.1,h:0.1,o:1},{x:0.8,y:0.8,w:0.2,h:0.2,o:1},{x:0.7,y:0.7,w:0.3,h:0.3,o:1},{x:0.6,y:0.6,w:0.4,h:0.4,o:1},{x:0.5,y:0.5,w:0.5,h:0.5,o:1},{x:0.4,y:0.4,w:0.6,h:0.6,o:1}];D.types.popFade=[{x:0.75,y:0.75,w:0,h:0,o:0},{x:0.65,y:0.65,w:0.1,h:0.1,o:0.2},{x:0.6,y:0.6,w:0.2,h:0.2,o:0.4},{x:0.55,y:0.55,w:0.3,h:0.3,o:0.6},{x:0.5,y:0.5,w:0.4,h:0.4,o:0.8},{x:0.45,y:0.45,w:0.5,h:0.5,o:0.9},{x:0.4,y:0.4,w:0.6,h:0.6,o:1}];D.types.slide=[{x:0.4,y:1,w:0.6,h:0.6,o:1},{x:0.4,y:0.9,w:0.6,h:0.6,o:1},{x:0.4,y:0.9,w:0.6,h:0.6,o:1},{x:0.4,y:0.8,w:0.6,h:0.6,o:1},{x:0.4,y:0.7,w:0.6,h:0.6,o:1},{x:0.4,y:0.6,w:0.6,h:0.6,o:1},{x:0.4,y:0.5,w:0.6,h:0.6,o:1},{x:0.4,y:0.4,w:0.6,h:0.6,o:1}];D.run=function(K,I,J,M){var L=D.types[d()?"none":m.animation];if(J===true){M=(typeof M!=="undefined")?M:L.length-1}else{M=(typeof M!=="undefined")?M:0}I=(I)?I:function(){};if((M<L.length)&&(M>=0)){l[m.type](n(K,L[M]));c=setTimeout(function(){if(J){M=M-1}else{M=M+1}D.run(K,I,J,M)},D.duration);q.setIcon(u)}else{I();return}};z();return{badge:h,video:B,image:x,webcam:b,reset:E.reset,browser:{supported:s.supported}}});if(typeof define!=="undefined"&&define.amd){define([],function(){return a})}else{if(typeof module!=="undefined"&&module.exports){module.exports=a}else{this.Favico=a}}})();(function(){var f=document.getElementsByTagName("title")[0],a=0,d=Number.MAX_VALUE,e=/^\(\d*\+?\) /;function c(){if(a===0){f.text=f.text.replace(e,"");return}notificationTotalstr=a;if(a>d){notificationTotalstr=d+"+"}if(e.exec(f.text)){f.text=f.text.replace(e,"("+notificationTotalstr+") ")}else{f.text="("+notificationTotalstr+") "+f.text}}function b(g){return !isNaN(parseFloat(g))&&isFinite(g)}window.titlenotifier={add:function(g){if(typeof g==="undefined"){g=1}a+=parseInt(g,10);c()},sub:function(g){if(typeof g==="undefined"){g=1}g=parseInt(g,10);if(a===0){return}else{if(g>a){a=0}else{a-=parseInt(g,10)}}c()},set:function(g){if(!b(g)||g<0){return}a=parseInt(g,10);c()},reset:function(){a=0;c()},get:function(){return a},max:function(g){if(!b(g)||g<=0){return}d=parseInt(g,10);c()}}})();
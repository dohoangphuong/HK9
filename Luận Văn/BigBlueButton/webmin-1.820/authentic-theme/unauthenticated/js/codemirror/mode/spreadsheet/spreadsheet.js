(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){a.defineMode("spreadsheet",function(){return{startState:function(){return{stringType:null,stack:[]}},token:function(d,c){if(!d){return}if(c.stack.length===0){if((d.peek()=='"')||(d.peek()=="'")){c.stringType=d.peek();d.next();c.stack.unshift("string")}}switch(c.stack[0]){case"string":while(c.stack[0]==="string"&&!d.eol()){if(d.peek()===c.stringType){d.next();c.stack.shift()}else{if(d.peek()==="\\"){d.next();d.next()}else{d.match(/^.[^\\\"\']*/)}}}return"string";case"characterClass":while(c.stack[0]==="characterClass"&&!d.eol()){if(!(d.match(/^[^\]\\]+/)||d.match(/^\\./))){c.stack.shift()}}return"operator"}var b=d.peek();switch(b){case"[":d.next();c.stack.unshift("characterClass");return"bracket";case":":d.next();return"operator";case"\\":if(d.match(/\\[a-z]+/)){return"string-2"}else{return null}case".":case",":case";":case"*":case"-":case"+":case"^":case"<":case"/":case"=":d.next();return"atom";case"$":d.next();return"builtin"}if(d.match(/\d+/)){if(d.match(/^\w+/)){return"error"}return"number"}else{if(d.match(/^[a-zA-Z_]\w*/)){if(d.match(/(?=[\(.])/,false)){return"keyword"}return"variable-2"}else{if(["[","]","(",")","{","}"].indexOf(b)!=-1){d.next();return"bracket"}else{if(!d.eatSpace()){d.next()}}}}return null}}});a.defineMIME("text/x-spreadsheet","spreadsheet")});
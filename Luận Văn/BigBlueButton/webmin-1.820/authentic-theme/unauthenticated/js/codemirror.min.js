/*!
 * CodeMirror v5.15.2 (http://codemirror.net)
 * Copyright 2014 Marijn`123tyuiocvbnm,./ Haverbeke <marijnh@gmail.com> and others
 * Licensed under MIT (https://github.com/0twbs/bootstrap/blob/master/LICENSE)
 */
(function(a){if(typeof exports=="object"&&typeof module=="object"){module.exports=a()}else{if(typeof define=="function"&&define.amd){return define([],a)}else{(this||window).CodeMirror=a()}}})(function(){var d1=navigator.userAgent;var ec=navigator.platform;var cn=/gecko\/\d/i.test(d1);var eO=/MSIE \d/.test(d1);var bI=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(d1);var dK=eO||bI;var k=dK&&(eO?document.documentMode||6:bI[1]);var cZ=/WebKit\//.test(d1);var dN=cZ&&/Qt\/\d+\.\d+/.test(d1);var dc=/Chrome\//.test(d1);var d4=/Opera\//.test(d1);var aB=/Apple Computer/.test(navigator.vendor);var c6=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(d1);var fz=/PhantomJS/.test(d1);var e5=/AppleWebKit/.test(d1)&&/Mobile\/\w+/.test(d1);var ei=e5||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(d1);var b6=e5||/Mac/.test(ec);var fO=/\bCrOS\b/.test(d1);var aO=/win/i.test(ec);var aY=d4&&d1.match(/Version\/(\d*\.\d*)/);if(aY){aY=Number(aY[1])}if(aY&&aY>=15){d4=false;cZ=true}var bP=b6&&(dN||d4&&(aY==null||aY<12.11));var gg=cn||(dK&&k>=9);var gj=false,a6=false;function H(gr,gt){if(!(this instanceof H)){return new H(gr,gt)}this.options=gt=gt?aM(gt):{};aM(e7,gt,false);cd(gt);var gx=gt.value;if(typeof gx=="string"){gx=new ar(gx,gt.mode,null,gt.lineSeparator)}this.doc=gx;var gs=new H.inputStyles[gt.inputStyle](this);var gw=this.display=new eL(gr,gx,gs);gw.wrapper.CodeMirror=this;ee(this);cN(this);if(gt.lineWrapping){this.display.wrapper.className+=" CodeMirror-wrap"}if(gt.autofocus&&!ei){gw.input.focus()}aC(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:false,delayingBlurEvent:false,focused:false,suppressEdits:false,pasteIncoming:false,cutIncoming:false,selectingText:false,draggingText:false,highlight:new gp(),keySeq:null,specialChars:null};var gq=this;if(dK&&k<11){setTimeout(function(){gq.display.input.reset(true)},20)}fW(this);bi();cH(this);this.curOp.forceUpdate=true;ed(this,gx);if((gt.autofocus&&!ei)||gq.hasFocus()){setTimeout(cu(cA,this),20)}else{aU(this)}for(var gv in be){if(be.hasOwnProperty(gv)){be[gv](this,gt[gv],cb)}}d6(this);if(gt.finishInit){gt.finishInit(this)}for(var gu=0;gu<a7.length;++gu){a7[gu](this)}al(this);if(cZ&&gt.lineWrapping&&getComputedStyle(gw.lineDiv).textRendering=="optimizelegibility"){gw.lineDiv.style.textRendering="auto"}}function eL(gq,gs,gr){var gt=this;this.input=gr;gt.scrollbarFiller=f9("div",null,"CodeMirror-scrollbar-filler");gt.scrollbarFiller.setAttribute("cm-not-content","true");gt.gutterFiller=f9("div",null,"CodeMirror-gutter-filler");gt.gutterFiller.setAttribute("cm-not-content","true");gt.lineDiv=f9("div",null,"CodeMirror-code");gt.selectionDiv=f9("div",null,null,"position: relative; z-index: 1");gt.cursorDiv=f9("div",null,"CodeMirror-cursors");gt.measure=f9("div",null,"CodeMirror-measure");gt.lineMeasure=f9("div",null,"CodeMirror-measure");gt.lineSpace=f9("div",[gt.measure,gt.lineMeasure,gt.selectionDiv,gt.cursorDiv,gt.lineDiv],null,"position: relative; outline: none");gt.mover=f9("div",[f9("div",[gt.lineSpace],"CodeMirror-lines")],null,"position: relative");gt.sizer=f9("div",[gt.mover],"CodeMirror-sizer");gt.sizerWidth=null;gt.heightForcer=f9("div",null,null,"position: absolute; height: "+dJ+"px; width: 1px;");gt.gutters=f9("div",null,"CodeMirror-gutters");gt.lineGutter=null;gt.scroller=f9("div",[gt.sizer,gt.heightForcer,gt.gutters],"CodeMirror-scroll");gt.scroller.setAttribute("tabIndex","-1");gt.wrapper=f9("div",[gt.scrollbarFiller,gt.gutterFiller,gt.scroller],"CodeMirror");if(dK&&k<8){gt.gutters.style.zIndex=-1;gt.scroller.style.paddingRight=0}if(!cZ&&!(cn&&ei)){gt.scroller.draggable=true}if(gq){if(gq.appendChild){gq.appendChild(gt.wrapper)}else{gq(gt.wrapper)}}gt.viewFrom=gt.viewTo=gs.first;gt.reportedViewFrom=gt.reportedViewTo=gs.first;gt.view=[];gt.renderedView=null;gt.externalMeasured=null;gt.viewOffset=0;gt.lastWrapHeight=gt.lastWrapWidth=0;gt.updateLineNumbers=null;gt.nativeBarWidth=gt.barHeight=gt.barWidth=0;gt.scrollbarsClipped=false;gt.lineNumWidth=gt.lineNumInnerWidth=gt.lineNumChars=null;gt.alignWidgets=false;gt.cachedCharWidth=gt.cachedTextHeight=gt.cachedPaddingH=null;gt.maxLine=null;gt.maxLineLength=0;gt.maxLineChanged=false;gt.wheelDX=gt.wheelDY=gt.wheelStartX=gt.wheelStartY=null;gt.shift=false;gt.selForContextMenu=null;gt.activeTouch=null;gr.init(gt)}function bq(gq){gq.doc.mode=H.getMode(gq.options,gq.doc.modeOption);eo(gq)}function eo(gq){gq.doc.iter(function(gr){if(gr.stateAfter){gr.stateAfter=null}if(gr.styles){gr.styles=null}});gq.doc.frontier=gq.doc.first;eh(gq,100);gq.state.modeGen++;if(gq.curOp){ah(gq)}}function eJ(gq){if(gq.options.lineWrapping){fF(gq.display.wrapper,"CodeMirror-wrap");gq.display.sizer.style.minWidth="";gq.display.sizerWidth=null}else{f(gq.display.wrapper,"CodeMirror-wrap");h(gq)}X(gq);ah(gq);aj(gq);setTimeout(function(){e2(gq)},100)}function bd(gq){var gs=aX(gq.display),gr=gq.options.lineWrapping;var gt=gr&&Math.max(5,gq.display.scroller.clientWidth/dD(gq.display)-3);return function(gv){if(fB(gq.doc,gv)){return 0}var gu=0;if(gv.widgets){for(var gw=0;gw<gv.widgets.length;gw++){if(gv.widgets[gw].height){gu+=gv.widgets[gw].height}}}if(gr){return gu+(Math.ceil(gv.text.length/gt)||1)*gs}else{return gu+gs}}}function X(gq){var gs=gq.doc,gr=bd(gq);gs.iter(function(gt){var gu=gr(gt);if(gu!=gt.height){gc(gt,gu)}})}function cN(gq){gq.display.wrapper.className=gq.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+gq.options.theme.replace(/(^|\s)\s*/g," cm-s-");aj(gq)}function dw(gq){ee(gq);ah(gq);setTimeout(function(){eH(gq)},20)}function ee(gq){var gr=gq.display.gutters,gv=gq.options.gutters;d2(gr);for(var gs=0;gs<gv.length;++gs){var gt=gv[gs];var gu=gr.appendChild(f9("div",null,"CodeMirror-gutter "+gt));if(gt=="CodeMirror-linenumbers"){gq.display.lineGutter=gu;gu.style.width=(gq.display.lineNumWidth||1)+"px"}}gr.style.display=gs?"":"none";c3(gq)}function c3(gq){var gr=gq.display.gutters.offsetWidth;gq.display.sizer.style.marginLeft=gr+"px"}function eq(gs){if(gs.height==0){return 0}var gr=gs.text.length,gq,gu=gs;while(gq=eS(gu)){var gt=gq.find(0,true);gu=gt.from.line;gr+=gt.from.ch-gt.to.ch}gu=gs;while(gq=ex(gu)){var gt=gq.find(0,true);gr-=gu.text.length-gt.from.ch;gu=gt.to.line;gr+=gu.text.length-gt.to.ch}return gr}function h(gq){var gs=gq.display,gr=gq.doc;gs.maxLine=fk(gr,gr.first);gs.maxLineLength=eq(gs.maxLine);gs.maxLineChanged=true;gr.iter(function(gu){var gt=eq(gu);if(gt>gs.maxLineLength){gs.maxLineLength=gt;gs.maxLine=gu}})}function cd(gq){var gr=dh(gq.gutters,"CodeMirror-linenumbers");if(gr==-1&&gq.lineNumbers){gq.gutters=gq.gutters.concat(["CodeMirror-linenumbers"])}else{if(gr>-1&&!gq.lineNumbers){gq.gutters=gq.gutters.slice(0);gq.gutters.splice(gr,1)}}}function dA(gq){var gt=gq.display,gs=gt.gutters.offsetWidth;var gr=Math.round(gq.doc.height+bH(gq.display));return{clientHeight:gt.scroller.clientHeight,viewHeight:gt.wrapper.clientHeight,scrollWidth:gt.scroller.scrollWidth,clientWidth:gt.scroller.clientWidth,viewWidth:gt.wrapper.clientWidth,barLeft:gq.options.fixedGutter?gs:0,docHeight:gr,scrollHeight:gr+cS(gq)+gt.barHeight,nativeBarWidth:gt.nativeBarWidth,gutterWidth:gs}}function dk(gs,gr,gq){this.cm=gq;var gt=this.vert=f9("div",[f9("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar");var gu=this.horiz=f9("div",[f9("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");gs(gt);gs(gu);bW(gt,"scroll",function(){if(gt.clientHeight){gr(gt.scrollTop,"vertical")}});bW(gu,"scroll",function(){if(gu.clientWidth){gr(gu.scrollLeft,"horizontal")}});this.checkedZeroWidth=false;if(dK&&k<8){this.horiz.style.minHeight=this.vert.style.minWidth="18px"}}dk.prototype=aM({update:function(gt){var gu=gt.scrollWidth>gt.clientWidth+1;var gs=gt.scrollHeight>gt.clientHeight+1;var gv=gt.nativeBarWidth;if(gs){this.vert.style.display="block";this.vert.style.bottom=gu?gv+"px":"0";var gr=gt.viewHeight-(gu?gv:0);this.vert.firstChild.style.height=Math.max(0,gt.scrollHeight-gt.clientHeight+gr)+"px"}else{this.vert.style.display="";this.vert.firstChild.style.height="0"}if(gu){this.horiz.style.display="block";this.horiz.style.right=gs?gv+"px":"0";this.horiz.style.left=gt.barLeft+"px";var gq=gt.viewWidth-gt.barLeft-(gs?gv:0);this.horiz.firstChild.style.width=(gt.scrollWidth-gt.clientWidth+gq)+"px"}else{this.horiz.style.display="";this.horiz.firstChild.style.width="0"}if(!this.checkedZeroWidth&&gt.clientHeight>0){if(gv==0){this.zeroWidthHack()}this.checkedZeroWidth=true}return{right:gs?gv:0,bottom:gu?gv:0}},setScrollLeft:function(gq){if(this.horiz.scrollLeft!=gq){this.horiz.scrollLeft=gq}if(this.disableHoriz){this.enableZeroWidthBar(this.horiz,this.disableHoriz)}},setScrollTop:function(gq){if(this.vert.scrollTop!=gq){this.vert.scrollTop=gq}if(this.disableVert){this.enableZeroWidthBar(this.vert,this.disableVert)}},zeroWidthHack:function(){var gq=b6&&!c6?"12px":"18px";this.horiz.style.height=this.vert.style.width=gq;this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none";this.disableHoriz=new gp;this.disableVert=new gp},enableZeroWidthBar:function(gr,gq){gr.style.pointerEvents="auto";function gs(){var gu=gr.getBoundingClientRect();var gt=document.elementFromPoint(gu.left+1,gu.bottom-1);if(gt!=gr){gr.style.pointerEvents="none"}else{gq.set(1000,gs)}}gq.set(1000,gs)},clear:function(){var gq=this.horiz.parentNode;gq.removeChild(this.horiz);gq.removeChild(this.vert)}},dk.prototype);function e8(){}e8.prototype=aM({update:function(){return{bottom:0,right:0}},setScrollLeft:function(){},setScrollTop:function(){},clear:function(){}},e8.prototype);H.scrollbarModel={"native":dk,"null":e8};function aC(gq){if(gq.display.scrollbars){gq.display.scrollbars.clear();if(gq.display.scrollbars.addClass){f(gq.display.wrapper,gq.display.scrollbars.addClass)}}gq.display.scrollbars=new H.scrollbarModel[gq.options.scrollbarStyle](function(gr){gq.display.wrapper.insertBefore(gr,gq.display.scrollbarFiller);bW(gr,"mousedown",function(){if(gq.state.focused){setTimeout(function(){gq.display.input.focus()},0)}});gr.setAttribute("cm-not-content","true")},function(gs,gr){if(gr=="horizontal"){bD(gq,gs)}else{N(gq,gs)}},gq);if(gq.display.scrollbars.addClass){fF(gq.display.wrapper,gq.display.scrollbars.addClass)}}function e2(gs,gu){if(!gu){gu=dA(gs)}var gr=gs.display.barWidth,gq=gs.display.barHeight;aT(gs,gu);for(var gt=0;gt<4&&gr!=gs.display.barWidth||gq!=gs.display.barHeight;gt++){if(gr!=gs.display.barWidth&&gs.options.lineWrapping){a8(gs)}aT(gs,dA(gs));gr=gs.display.barWidth;gq=gs.display.barHeight}}function aT(gq,gr){var gt=gq.display;var gs=gt.scrollbars.update(gr);gt.sizer.style.paddingRight=(gt.barWidth=gs.right)+"px";gt.sizer.style.paddingBottom=(gt.barHeight=gs.bottom)+"px";gt.heightForcer.style.borderBottom=gs.bottom+"px solid transparent";if(gs.right&&gs.bottom){gt.scrollbarFiller.style.display="block";gt.scrollbarFiller.style.height=gs.bottom+"px";gt.scrollbarFiller.style.width=gs.right+"px"}else{gt.scrollbarFiller.style.display=""}if(gs.bottom&&gq.options.coverGutterNextToScrollbar&&gq.options.fixedGutter){gt.gutterFiller.style.display="block";gt.gutterFiller.style.height=gs.bottom+"px";gt.gutterFiller.style.width=gr.gutterWidth+"px"}else{gt.gutterFiller.style.display=""}}function b5(gt,gx,gs){var gu=gs&&gs.top!=null?Math.max(0,gs.top):gt.scroller.scrollTop;gu=Math.floor(gu-fd(gt));var gq=gs&&gs.bottom!=null?gs.bottom:gu+gt.wrapper.clientHeight;var gv=bF(gx,gu),gw=bF(gx,gq);if(gs&&gs.ensure){var gr=gs.ensure.from.line,gy=gs.ensure.to.line;if(gr<gv){gv=gr;gw=bF(gx,bL(fk(gx,gr))+gt.wrapper.clientHeight)}else{if(Math.min(gy,gx.lastLine())>=gw){gv=bF(gx,bL(fk(gx,gy))-gt.wrapper.clientHeight);gw=gy}}}return{from:gv,to:Math.max(gw,gv+1)}}function eH(gy){var gw=gy.display,gx=gw.view;if(!gw.alignWidgets&&(!gw.gutters.firstChild||!gy.options.fixedGutter)){return}var gu=dX(gw)-gw.scroller.scrollLeft+gy.doc.scrollLeft;var gq=gw.gutters.offsetWidth,gr=gu+"px";for(var gt=0;gt<gx.length;gt++){if(!gx[gt].hidden){if(gy.options.fixedGutter&&gx[gt].gutter){gx[gt].gutter.style.left=gr}var gv=gx[gt].alignable;if(gv){for(var gs=0;gs<gv.length;gs++){gv[gs].style.left=gr}}}}if(gy.options.fixedGutter){gw.gutters.style.left=(gu+gq)+"px"}}function d6(gq){if(!gq.options.lineNumbers){return false}var gv=gq.doc,gr=ev(gq.options,gv.first+gv.size-1),gu=gq.display;if(gr.length!=gu.lineNumChars){var gw=gu.measure.appendChild(f9("div",[f9("div",gr)],"CodeMirror-linenumber CodeMirror-gutter-elt"));var gs=gw.firstChild.offsetWidth,gt=gw.offsetWidth-gs;gu.lineGutter.style.width="";gu.lineNumInnerWidth=Math.max(gs,gu.lineGutter.offsetWidth-gt)+1;gu.lineNumWidth=gu.lineNumInnerWidth+gt;gu.lineNumChars=gu.lineNumInnerWidth?gr.length:-1;gu.lineGutter.style.width=gu.lineNumWidth+"px";c3(gq);return true}return false}function ev(gq,gr){return String(gq.lineNumberFormatter(gr+gq.firstLineNumber))}function dX(gq){return gq.scroller.getBoundingClientRect().left-gq.sizer.getBoundingClientRect().left}function aH(gr,gq,gs){var gt=gr.display;this.viewport=gq;this.visible=b5(gt,gr.doc,gq);this.editorIsHidden=!gt.wrapper.offsetWidth;this.wrapperHeight=gt.wrapper.clientHeight;this.wrapperWidth=gt.wrapper.clientWidth;this.oldDisplayWidth=dl(gr);this.force=gs;this.dims=fi(gr);this.events=[]}aH.prototype.signal=function(gr,gq){if(fn(gr,gq)){this.events.push(arguments)}};aH.prototype.finish=function(){for(var gq=0;gq<this.events.length;gq++){aD.apply(null,this.events[gq])}};function J(gq){var gr=gq.display;if(!gr.scrollbarsClipped&&gr.scroller.offsetWidth){gr.nativeBarWidth=gr.scroller.offsetWidth-gr.scroller.clientWidth;gr.heightForcer.style.height=cS(gq)+"px";gr.sizer.style.marginBottom=-gr.nativeBarWidth+"px";gr.sizer.style.borderRightWidth=cS(gq)+"px";gr.scrollbarsClipped=true}}function B(gz,gt){var gu=gz.display,gy=gz.doc;if(gt.editorIsHidden){eA(gz);return false}if(!gt.force&&gt.visible.from>=gu.viewFrom&&gt.visible.to<=gu.viewTo&&(gu.updateLineNumbers==null||gu.updateLineNumbers>=gu.viewTo)&&gu.renderedView==gu.view&&db(gz)==0){return false}if(d6(gz)){eA(gz);gt.dims=fi(gz)}var gs=gy.first+gy.size;var gw=Math.max(gt.visible.from-gz.options.viewportMargin,gy.first);var gx=Math.min(gs,gt.visible.to+gz.options.viewportMargin);if(gu.viewFrom<gw&&gw-gu.viewFrom<20){gw=Math.max(gy.first,gu.viewFrom)}if(gu.viewTo>gx&&gu.viewTo-gx<20){gx=Math.min(gs,gu.viewTo)}if(a6){gw=aV(gz.doc,gw);gx=d3(gz.doc,gx)}var gr=gw!=gu.viewFrom||gx!=gu.viewTo||gu.lastWrapHeight!=gt.wrapperHeight||gu.lastWrapWidth!=gt.wrapperWidth;cQ(gz,gw,gx);gu.viewOffset=bL(fk(gz.doc,gu.viewFrom));gz.display.mover.style.top=gu.viewOffset+"px";var gq=db(gz);if(!gr&&gq==0&&!gt.force&&gu.renderedView==gu.view&&(gu.updateLineNumbers==null||gu.updateLineNumbers>=gu.viewTo)){return false}var gv=dO();if(gq>4){gu.lineDiv.style.display="none"}cl(gz,gu.updateLineNumbers,gt.dims);if(gq>4){gu.lineDiv.style.display=""}gu.renderedView=gu.view;if(gv&&dO()!=gv&&gv.offsetHeight){gv.focus()}d2(gu.cursorDiv);d2(gu.selectionDiv);gu.gutters.style.height=gu.sizer.style.minHeight=0;if(gr){gu.lastWrapHeight=gt.wrapperHeight;gu.lastWrapWidth=gt.wrapperWidth;eh(gz,400)}gu.updateLineNumbers=null;return true}function ci(gr,gu){var gq=gu.viewport;for(var gt=true;;gt=false){if(!gt||!gr.options.lineWrapping||gu.oldDisplayWidth==dl(gr)){if(gq&&gq.top!=null){gq={top:Math.min(gr.doc.height+bH(gr.display)-cU(gr),gq.top)}}gu.visible=b5(gr.display,gr.doc,gq);if(gu.visible.from>=gr.display.viewFrom&&gu.visible.to<=gr.display.viewTo){break}}if(!B(gr,gu)){break}a8(gr);var gs=dA(gr);bB(gr);e2(gr,gs);dz(gr,gs)}gu.signal(gr,"update",gr);if(gr.display.viewFrom!=gr.display.reportedViewFrom||gr.display.viewTo!=gr.display.reportedViewTo){gu.signal(gr,"viewportChange",gr,gr.display.viewFrom,gr.display.viewTo);gr.display.reportedViewFrom=gr.display.viewFrom;gr.display.reportedViewTo=gr.display.viewTo}}function dT(gr,gq){var gt=new aH(gr,gq);if(B(gr,gt)){a8(gr);ci(gr,gt);var gs=dA(gr);bB(gr);e2(gr,gs);dz(gr,gs);gt.finish()}}function dz(gq,gr){gq.display.sizer.style.minHeight=gr.docHeight+"px";gq.display.heightForcer.style.top=gr.docHeight+"px";gq.display.gutters.style.height=(gr.docHeight+gq.display.barHeight+cS(gq))+"px"}function a8(gx){var gv=gx.display;var gr=gv.lineDiv.offsetTop;for(var gs=0;gs<gv.view.length;gs++){var gy=gv.view[gs],gz;if(gy.hidden){continue}if(dK&&k<8){var gu=gy.node.offsetTop+gy.node.offsetHeight;gz=gu-gr;gr=gu}else{var gt=gy.node.getBoundingClientRect();gz=gt.bottom-gt.top}var gw=gy.line.height-gz;if(gz<2){gz=aX(gv)}if(gw>0.001||gw<-0.001){gc(gy.line,gz);ca(gy.line);if(gy.rest){for(var gq=0;gq<gy.rest.length;gq++){ca(gy.rest[gq])}}}}}function ca(gq){if(gq.widgets){for(var gr=0;gr<gq.widgets.length;++gr){gq.widgets[gr].height=gq.widgets[gr].node.parentNode.offsetHeight}}}function fi(gq){var gv=gq.display,gt={},gs={};var gu=gv.gutters.clientLeft;for(var gw=gv.gutters.firstChild,gr=0;gw;gw=gw.nextSibling,++gr){gt[gq.options.gutters[gr]]=gw.offsetLeft+gw.clientLeft+gu;gs[gq.options.gutters[gr]]=gw.clientWidth}return{fixedPos:dX(gv),gutterTotalWidth:gv.gutters.offsetWidth,gutterLeft:gt,gutterWidth:gs,wrapperWidth:gv.wrapper.clientWidth}}function cl(gB,gs,gA){var gx=gB.display,gD=gB.options.lineNumbers;var gq=gx.lineDiv,gC=gq.firstChild;function gw(gF){var gE=gF.nextSibling;if(cZ&&b6&&gB.display.currentWheelTarget==gF){gF.style.display="none"}else{gF.parentNode.removeChild(gF)}return gE}var gy=gx.view,gv=gx.viewFrom;for(var gt=0;gt<gy.length;gt++){var gu=gy[gt];if(gu.hidden){}else{if(!gu.node||gu.node.parentNode!=gq){var gr=aE(gB,gu,gv,gA);gq.insertBefore(gr,gC)}else{while(gC!=gu.node){gC=gw(gC)}var gz=gD&&gs!=null&&gs<=gv&&gu.lineNumber;if(gu.changes){if(dh(gu.changes,"gutter")>-1){gz=false}ab(gB,gu,gv,gA)}if(gz){d2(gu.lineNumber);gu.lineNumber.appendChild(document.createTextNode(ev(gB.options,gv)))}gC=gu.node.nextSibling}}gv+=gu.size}while(gC){gC=gw(gC)}}function ab(gq,gs,gu,gv){for(var gr=0;gr<gs.changes.length;gr++){var gt=gs.changes[gr];if(gt=="text"){fq(gq,gs)}else{if(gt=="gutter"){df(gq,gs,gu,gv)}else{if(gt=="class"){dG(gs)}else{if(gt=="widget"){an(gq,gs,gv)}}}}}gs.changes=null}function fM(gq){if(gq.node==gq.text){gq.node=f9("div",null,null,"position: relative");if(gq.text.parentNode){gq.text.parentNode.replaceChild(gq.node,gq.text)}gq.node.appendChild(gq.text);if(dK&&k<8){gq.node.style.zIndex=2}}return gq.node}function ez(gr){var gq=gr.bgClass?gr.bgClass+" "+(gr.line.bgClass||""):gr.line.bgClass;if(gq){gq+=" CodeMirror-linebackground"}if(gr.background){if(gq){gr.background.className=gq}else{gr.background.parentNode.removeChild(gr.background);gr.background=null}}else{if(gq){var gs=fM(gr);gr.background=gs.insertBefore(f9("div",null,gq),gs.firstChild)}}}function dV(gq,gr){var gs=gq.display.externalMeasured;if(gs&&gs.line==gr.line){gq.display.externalMeasured=null;gr.measure=gs.measure;return gs.built}return eV(gq,gr)}function fq(gq,gt){var gr=gt.text.className;var gs=dV(gq,gt);if(gt.text==gt.node){gt.node=gs.pre}gt.text.parentNode.replaceChild(gs.pre,gt.text);gt.text=gs.pre;if(gs.bgClass!=gt.bgClass||gs.textClass!=gt.textClass){gt.bgClass=gs.bgClass;gt.textClass=gs.textClass;dG(gt)}else{if(gr){gt.text.className=gr}}}function dG(gr){ez(gr);if(gr.line.wrapClass){fM(gr).className=gr.line.wrapClass}else{if(gr.node!=gr.text){gr.node.className=""}}var gq=gr.textClass?gr.textClass+" "+(gr.line.textClass||""):gr.line.textClass;gr.text.className=gq||""}function df(gy,gw,gv,gx){if(gw.gutter){gw.node.removeChild(gw.gutter);gw.gutter=null}if(gw.gutterBackground){gw.node.removeChild(gw.gutterBackground);gw.gutterBackground=null}if(gw.line.gutterClass){var gr=fM(gw);gw.gutterBackground=f9("div",null,"CodeMirror-gutter-background "+gw.line.gutterClass,"left: "+(gy.options.fixedGutter?gx.fixedPos:-gx.gutterTotalWidth)+"px; width: "+gx.gutterTotalWidth+"px");gr.insertBefore(gw.gutterBackground,gw.text)}var gt=gw.line.gutterMarkers;if(gy.options.lineNumbers||gt){var gr=fM(gw);var gu=gw.gutter=f9("div",null,"CodeMirror-gutter-wrapper","left: "+(gy.options.fixedGutter?gx.fixedPos:-gx.gutterTotalWidth)+"px");gy.display.input.setUneditable(gu);gr.insertBefore(gu,gw.text);if(gw.line.gutterClass){gu.className+=" "+gw.line.gutterClass}if(gy.options.lineNumbers&&(!gt||!gt["CodeMirror-linenumbers"])){gw.lineNumber=gu.appendChild(f9("div",ev(gy.options,gv),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+gx.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+gy.display.lineNumInnerWidth+"px"))}if(gt){for(var gs=0;gs<gy.options.gutters.length;++gs){var gq=gy.options.gutters[gs],gz=gt.hasOwnProperty(gq)&&gt[gq];if(gz){gu.appendChild(f9("div",[gz],"CodeMirror-gutter-elt","left: "+gx.gutterLeft[gq]+"px; width: "+gx.gutterWidth[gq]+"px"))}}}}}function an(gq,gr,gu){if(gr.alignable){gr.alignable=null}for(var gt=gr.node.firstChild,gs;gt;gt=gs){var gs=gt.nextSibling;if(gt.className=="CodeMirror-linewidget"){gr.node.removeChild(gt)}}fy(gq,gr,gu)}function aE(gq,gs,gt,gu){var gr=dV(gq,gs);gs.text=gs.node=gr.pre;if(gr.bgClass){gs.bgClass=gr.bgClass}if(gr.textClass){gs.textClass=gr.textClass}dG(gs);df(gq,gs,gt,gu);fy(gq,gs,gu);return gs.node}function fy(gq,gs,gt){ge(gq,gs.line,gs,gt,true);if(gs.rest){for(var gr=0;gr<gs.rest.length;gr++){ge(gq,gs.rest[gr],gs,gt,false)}}}function ge(gy,gz,gv,gx,gt){if(!gz.widgets){return}var gq=fM(gv);for(var gs=0,gw=gz.widgets;gs<gw.length;++gs){var gu=gw[gs],gr=f9("div",[gu.node],"CodeMirror-linewidget");if(!gu.handleMouseEvents){gr.setAttribute("cm-ignore-events","true")}bE(gu,gr,gv,gx);gy.display.input.setUneditable(gr);if(gt&&gu.above){gq.insertBefore(gr,gv.gutter||gv.text)}else{gq.appendChild(gr)}ae(gu,"redraw")}}function bE(gt,gs,gq,gu){if(gt.noHScroll){(gq.alignable||(gq.alignable=[])).push(gs);var gr=gu.wrapperWidth;gs.style.left=gu.fixedPos+"px";if(!gt.coverGutter){gr-=gu.gutterTotalWidth;gs.style.paddingLeft=gu.gutterTotalWidth+"px"}gs.style.width=gr+"px"}if(gt.coverGutter){gs.style.zIndex=5;gs.style.position="relative";if(!gt.noHScroll){gs.style.marginLeft=-gu.gutterTotalWidth+"px"}}}var W=H.Pos=function(gq,gr){if(!(this instanceof W)){return new W(gq,gr)}this.line=gq;this.ch=gr};var ce=H.cmpPos=function(gr,gq){return gr.line-gq.line||gr.ch-gq.ch};function ch(gq){return W(gq.line,gq.ch)}function bw(gr,gq){return ce(gr,gq)<0?gq:gr}function aq(gr,gq){return ce(gr,gq)<0?gr:gq}function r(gq){if(!gq.state.focused){gq.display.input.focus();cA(gq)}}var bl=null;function f5(gE,gu,gs,gr,gD){var gC=gE.doc;gE.display.shift=false;if(!gr){gr=gC.sel}var gt=gE.state.pasteIncoming||gD=="paste";var gx=gC.splitLines(gu),gq=null;if(gt&&gr.ranges.length>1){if(bl&&bl.text.join("\n")==gu){if(gr.ranges.length%bl.text.length==0){gq=[];for(var gv=0;gv<bl.text.length;gv++){gq.push(gC.splitLines(bl.text[gv]))}}}else{if(gx.length==gr.ranges.length){gq=bR(gx,function(gF){return[gF]})}}}for(var gv=gr.ranges.length-1;gv>=0;gv--){var gw=gr.ranges[gv];var gB=gw.from(),gA=gw.to();if(gw.empty()){if(gs&&gs>0){gB=W(gB.line,gB.ch-gs)}else{if(gE.state.overwrite&&!gt){gA=W(gA.line,Math.min(fk(gC,gA.line).text.length,gA.ch+fL(gx).length))}else{if(bl&&bl.lineWise&&bl.text.join("\n")==gu){gB=gA=W(gB.line,0)}}}}var gy=gE.curOp.updateInput;var gz={from:gB,to:gA,text:gq?gq[gv%gq.length]:gx,origin:gD||(gt?"paste":gE.state.cutIncoming?"cut":"+input")};bf(gE.doc,gz);ae(gE,"inputRead",gE,gz)}if(gu&&!gt){f2(gE,gu)}fK(gE);gE.curOp.updateInput=gy;gE.curOp.typing=true;gE.state.pasteIncoming=gE.state.cutIncoming=false}function a9(gs,gq){var gr=gs.clipboardData&&gs.clipboardData.getData("text/plain");if(gr){gs.preventDefault();if(!gq.isReadOnly()&&!gq.options.disableInput){cL(gq,function(){f5(gq,gr,0,null,"paste")})}return true}}function f2(gq,gu){if(!gq.options.electricChars||!gq.options.smartIndent){return}var gv=gq.doc.sel;for(var gt=gv.ranges.length-1;gt>=0;gt--){var gr=gv.ranges[gt];if(gr.head.ch>100||(gt&&gv.ranges[gt-1].head.line==gr.head.line)){continue}var gw=gq.getModeAt(gr.head);var gx=false;if(gw.electricChars){for(var gs=0;gs<gw.electricChars.length;gs++){if(gu.indexOf(gw.electricChars.charAt(gs))>-1){gx=ad(gq,gr.head.line,"smart");break}}}else{if(gw.electricInput){if(gw.electricInput.test(fk(gq.doc,gr.head.line).text.slice(0,gr.head.ch))){gx=ad(gq,gr.head.line,"smart")}}}if(gx){ae(gq,"electricInput",gq,gr.head.line)}}}function dj(gq){var gv=[],gs=[];for(var gt=0;gt<gq.doc.sel.ranges.length;gt++){var gr=gq.doc.sel.ranges[gt].head.line;var gu={anchor:W(gr,0),head:W(gr+1,0)};gs.push(gu);gv.push(gq.getRange(gu.anchor,gu.head))}return{text:gv,ranges:gs}}function fV(gq){gq.setAttribute("autocorrect","off");gq.setAttribute("autocapitalize","off");gq.setAttribute("spellcheck","false")}function Y(gq){this.cm=gq;this.prevInput="";this.pollingFast=false;this.polling=new gp();this.inaccurateSelection=false;this.hasSelection=false;this.composing=null}function aW(){var gq=f9("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none");var gr=f9("div",[gq],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");if(cZ){gq.style.width="1000px"}else{gq.setAttribute("wrap","off")}if(e5){gq.style.border="1px solid black"}fV(gq);return gr}Y.prototype=aM({init:function(gs){var gr=this,gq=this.cm;var gv=this.wrapper=aW();var gt=this.textarea=gv.firstChild;gs.wrapper.insertBefore(gv,gs.wrapper.firstChild);if(e5){gt.style.width="0px"}bW(gt,"input",function(){if(dK&&k>=9&&gr.hasSelection){gr.hasSelection=null}gr.poll()});bW(gt,"paste",function(gw){if(aQ(gq,gw)||a9(gw,gq)){return}gq.state.pasteIncoming=true;gr.fastPoll()});function gu(gx){if(aQ(gq,gx)){return}if(gq.somethingSelected()){bl={lineWise:false,text:gq.getSelections()};if(gr.inaccurateSelection){gr.prevInput="";gr.inaccurateSelection=false;gt.value=bl.text.join("\n");dL(gt)}}else{if(!gq.options.lineWiseCopyCut){return}else{var gw=dj(gq);bl={lineWise:true,text:gw.text};if(gx.type=="cut"){gq.setSelections(gw.ranges,null,Z)}else{gr.prevInput="";gt.value=gw.text.join("\n");dL(gt)}}}if(gx.type=="cut"){gq.state.cutIncoming=true}}bW(gt,"cut",gu);bW(gt,"copy",gu);bW(gs.scroller,"paste",function(gw){if(ba(gs,gw)||aQ(gq,gw)){return}gq.state.pasteIncoming=true;gr.focus()});bW(gs.lineSpace,"selectstart",function(gw){if(!ba(gs,gw)){cF(gw)}});bW(gt,"compositionstart",function(){var gw=gq.getCursor("from");if(gr.composing){gr.composing.range.clear()}gr.composing={start:gw,range:gq.markText(gw,gq.getCursor("to"),{className:"CodeMirror-composing"})}});bW(gt,"compositionend",function(){if(gr.composing){gr.poll();gr.composing.range.clear();gr.composing=null}})},prepareSelection:function(){var gr=this.cm,gv=gr.display,gu=gr.doc;var gq=fN(gr);if(gr.options.moveInputWithCursor){var gw=dU(gr,gu.sel.primary().head,"div");var gs=gv.wrapper.getBoundingClientRect(),gt=gv.lineDiv.getBoundingClientRect();gq.teTop=Math.max(0,Math.min(gv.wrapper.clientHeight-10,gw.top+gt.top-gs.top));gq.teLeft=Math.max(0,Math.min(gv.wrapper.clientWidth-10,gw.left+gt.left-gs.left))}return gq},showSelection:function(gs){var gq=this.cm,gr=gq.display;bQ(gr.cursorDiv,gs.cursors);bQ(gr.selectionDiv,gs.selection);if(gs.teTop!=null){this.wrapper.style.top=gs.teTop+"px";this.wrapper.style.left=gs.teLeft+"px"}},reset:function(gu){if(this.contextMenuPending){return}var gr,gt,gq=this.cm,gw=gq.doc;if(gq.somethingSelected()){this.prevInput="";var gs=gw.sel.primary();gr=c9&&(gs.to().line-gs.from().line>100||(gt=gq.getSelection()).length>1000);var gv=gr?"-":gt||gq.getSelection();this.textarea.value=gv;if(gq.state.focused){dL(this.textarea)}if(dK&&k>=9){this.hasSelection=gv}}else{if(!gu){this.prevInput=this.textarea.value="";if(dK&&k>=9){this.hasSelection=null}}}this.inaccurateSelection=gr},getField:function(){return this.textarea},supportsTouch:function(){return false},focus:function(){if(this.cm.options.readOnly!="nocursor"&&(!ei||dO()!=this.textarea)){try{this.textarea.focus()}catch(gq){}}},blur:function(){this.textarea.blur()},resetPosition:function(){this.wrapper.style.top=this.wrapper.style.left=0},receivedFocus:function(){this.slowPoll()},slowPoll:function(){var gq=this;if(gq.pollingFast){return}gq.polling.set(this.cm.options.pollInterval,function(){gq.poll();if(gq.cm.state.focused){gq.slowPoll()}})},fastPoll:function(){var gr=false,gq=this;gq.pollingFast=true;function gs(){var gt=gq.poll();if(!gt&&!gr){gr=true;gq.polling.set(60,gs)}else{gq.pollingFast=false;gq.slowPoll()}}gq.polling.set(20,gs)},poll:function(){var gq=this.cm,gt=this.textarea,gu=this.prevInput;if(this.contextMenuPending||!gq.state.focused||(br(gt)&&!gu&&!this.composing)||gq.isReadOnly()||gq.options.disableInput||gq.state.keySeq){return false}var gw=gt.value;if(gw==gu&&!gq.somethingSelected()){return false}if(dK&&k>=9&&this.hasSelection===gw||b6&&/[\uf700-\uf7ff]/.test(gw)){gq.display.input.reset();return false}if(gq.doc.sel==gq.display.selForContextMenu){var gv=gw.charCodeAt(0);if(gv==8203&&!gu){gu="\u200b"}if(gv==8666){this.reset();return this.cm.execCommand("undo")}}var gx=0,gr=Math.min(gu.length,gw.length);while(gx<gr&&gu.charCodeAt(gx)==gw.charCodeAt(gx)){++gx}var gs=this;cL(gq,function(){f5(gq,gw.slice(gx),gu.length-gx,null,gs.composing?"*compose":null);if(gw.length>1000||gw.indexOf("\n")>-1){gt.value=gs.prevInput=""}else{gs.prevInput=gw}if(gs.composing){gs.composing.range.clear();gs.composing.range=gq.markText(gs.composing.start,gq.getCursor("to"),{className:"CodeMirror-composing"})}});return true},ensurePolled:function(){if(this.pollingFast&&this.poll()){this.pollingFast=false}},onKeyPress:function(){if(dK&&k>=9){this.hasSelection=null}this.fastPoll()},onContextMenu:function(gv){var gA=this,gB=gA.cm,gx=gB.display,gr=gA.textarea;var gz=cm(gB,gv),gq=gx.scroller.scrollTop;if(!gz||d4){return}var gu=gB.options.resetSelectionOnContextMenu;if(gu&&gB.doc.sel.contains(gz)==-1){c1(gB,bT)(gB.doc,eW(gz),Z)}var gw=gr.style.cssText,gE=gA.wrapper.style.cssText;gA.wrapper.style.cssText="position: absolute";var gD=gA.wrapper.getBoundingClientRect();gr.style.cssText="position: absolute; width: 30px; height: 30px; top: "+(gv.clientY-gD.top-5)+"px; left: "+(gv.clientX-gD.left-5)+"px; z-index: 1000; background: "+(dK?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";if(cZ){var gC=window.scrollY}gx.input.focus();if(cZ){window.scrollTo(null,gC)}gx.input.reset();if(!gB.somethingSelected()){gr.value=gA.prevInput=" "}gA.contextMenuPending=true;gx.selForContextMenu=gB.doc.sel;clearTimeout(gx.detectingSelectAll);function gt(){if(gr.selectionStart!=null){var gF=gB.somethingSelected();var gG="\u200b"+(gF?gr.value:"");gr.value="\u21da";gr.value=gG;gA.prevInput=gF?"":"\u200b";gr.selectionStart=1;gr.selectionEnd=gG.length;gx.selForContextMenu=gB.doc.sel}}function gy(){gA.contextMenuPending=false;gA.wrapper.style.cssText=gE;gr.style.cssText=gw;if(dK&&k<9){gx.scrollbars.setScrollTop(gx.scroller.scrollTop=gq)}if(gr.selectionStart!=null){if(!dK||(dK&&k<9)){gt()}var gF=0,gG=function(){if(gx.selForContextMenu==gB.doc.sel&&gr.selectionStart==0&&gr.selectionEnd>0&&gA.prevInput=="\u200b"){c1(gB,eG.selectAll)(gB)}else{if(gF++<10){gx.detectingSelectAll=setTimeout(gG,500)}else{gx.input.reset()}}};gx.detectingSelectAll=setTimeout(gG,200)}}if(dK&&k>=9){gt()}if(gg){eu(gv);var gs=function(){ef(window,"mouseup",gs);setTimeout(gy,20)};bW(window,"mouseup",gs)}else{setTimeout(gy,50)}},readOnlyChanged:function(gq){if(!gq){this.reset()}},setUneditable:f1,needsContentAttribute:false},Y.prototype);function dv(gq){this.cm=gq;this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null;this.polling=new gp();this.gracePeriod=false}dv.prototype=aM({init:function(gt){var gs=this,gq=gs.cm;var gu=gs.div=gt.lineDiv;fV(gu);bW(gu,"paste",function(gv){if(!aQ(gq,gv)){a9(gv,gq)}});bW(gu,"compositionstart",function(gz){var gy=gz.data;gs.composing={sel:gq.doc.sel,data:gy,startData:gy};if(!gy){return}var gw=gq.doc.sel.primary();var gv=gq.getLine(gw.head.line);var gx=gv.indexOf(gy,Math.max(0,gw.head.ch-gy.length));if(gx>-1&&gx<=gw.head.ch){gs.composing.sel=eW(W(gw.head.line,gx),W(gw.head.line,gx+gy.length))}});bW(gu,"compositionupdate",function(gv){gs.composing.data=gv.data});bW(gu,"compositionend",function(gw){var gv=gs.composing;if(!gv){return}if(gw.data!=gv.startData&&!/\u200b/.test(gw.data)){gv.data=gw.data}setTimeout(function(){if(!gv.handled){gs.applyComposition(gv)}if(gs.composing==gv){gs.composing=null}},50)});bW(gu,"touchstart",function(){gs.forceCompositionEnd()});bW(gu,"input",function(){if(gs.composing){return}if(gq.isReadOnly()||!gs.pollContent()){cL(gs.cm,function(){ah(gq)})}});function gr(gy){if(aQ(gq,gy)){return}if(gq.somethingSelected()){bl={lineWise:false,text:gq.getSelections()};if(gy.type=="cut"){gq.replaceSelection("",null,"cut")}}else{if(!gq.options.lineWiseCopyCut){return}else{var gw=dj(gq);bl={lineWise:true,text:gw.text};if(gy.type=="cut"){gq.operation(function(){gq.setSelections(gw.ranges,0,Z);gq.replaceSelection("",null,"cut")})}}}if(gy.clipboardData&&!e5){gy.preventDefault();gy.clipboardData.clearData();gy.clipboardData.setData("text/plain",bl.text.join("\n"))}else{var gx=aW(),gz=gx.firstChild;gq.display.lineSpace.insertBefore(gx,gq.display.lineSpace.firstChild);gz.value=bl.text.join("\n");var gv=document.activeElement;dL(gz);setTimeout(function(){gq.display.lineSpace.removeChild(gx);gv.focus()},50)}}bW(gu,"copy",gr);bW(gu,"cut",gr)},prepareSelection:function(){var gq=fN(this.cm,false);gq.focus=this.cm.state.focused;return gq},showSelection:function(gr,gq){if(!gr||!this.cm.display.view.length){return}if(gr.focus||gq){this.showPrimarySelection()}this.showMultipleSelections(gr)},showPrimarySelection:function(){var gu=window.getSelection(),gx=this.cm.doc.sel.primary();var gv=ay(this.cm,gu.anchorNode,gu.anchorOffset);var gz=ay(this.cm,gu.focusNode,gu.focusOffset);if(gv&&!gv.bad&&gz&&!gz.bad&&ce(aq(gv,gz),gx.from())==0&&ce(bw(gv,gz),gx.to())==0){return}var gt=cy(this.cm,gx.from());var gy=cy(this.cm,gx.to());if(!gt&&!gy){return}var gB=this.cm.display.view;var gw=gu.rangeCount&&gu.getRangeAt(0);if(!gt){gt={node:gB[0].measure.map[2],offset:0}}else{if(!gy){var gs=gB[gB.length-1].measure;var gr=gs.maps?gs.maps[gs.maps.length-1]:gs.map;gy={node:gr[gr.length-1],offset:gr[gr.length-2]-gr[gr.length-3]}}}try{var gq=ck(gt.node,gt.offset,gy.offset,gy.node)}catch(gA){}if(gq){if(!cn&&this.cm.state.focused){gu.collapse(gt.node,gt.offset);if(!gq.collapsed){gu.addRange(gq)}}else{gu.removeAllRanges();gu.addRange(gq)}if(gw&&gu.anchorNode==null){gu.addRange(gw)}else{if(cn){this.startGracePeriod()}}}this.rememberSelection()},startGracePeriod:function(){var gq=this;clearTimeout(this.gracePeriod);this.gracePeriod=setTimeout(function(){gq.gracePeriod=false;if(gq.selectionChanged()){gq.cm.operation(function(){gq.cm.curOp.selectionChanged=true})}},20)},showMultipleSelections:function(gq){bQ(this.cm.display.cursorDiv,gq.cursors);bQ(this.cm.display.selectionDiv,gq.selection)},rememberSelection:function(){var gq=window.getSelection();this.lastAnchorNode=gq.anchorNode;this.lastAnchorOffset=gq.anchorOffset;this.lastFocusNode=gq.focusNode;this.lastFocusOffset=gq.focusOffset},selectionInEditor:function(){var gr=window.getSelection();if(!gr.rangeCount){return false}var gq=gr.getRangeAt(0).commonAncestorContainer;return gh(this.div,gq)},focus:function(){if(this.cm.options.readOnly!="nocursor"){this.div.focus()}},blur:function(){this.div.blur()},getField:function(){return this.div},supportsTouch:function(){return true},receivedFocus:function(){var gq=this;if(this.selectionInEditor()){this.pollSelection()}else{cL(this.cm,function(){gq.cm.curOp.selectionChanged=true})}function gr(){if(gq.cm.state.focused){gq.pollSelection();gq.polling.set(gq.cm.options.pollInterval,gr)}}this.polling.set(this.cm.options.pollInterval,gr)},selectionChanged:function(){var gq=window.getSelection();return gq.anchorNode!=this.lastAnchorNode||gq.anchorOffset!=this.lastAnchorOffset||gq.focusNode!=this.lastFocusNode||gq.focusOffset!=this.lastFocusOffset},pollSelection:function(){if(!this.composing&&!this.gracePeriod&&this.selectionChanged()){var gt=window.getSelection(),gq=this.cm;this.rememberSelection();var gr=ay(gq,gt.anchorNode,gt.anchorOffset);var gs=ay(gq,gt.focusNode,gt.focusOffset);if(gr&&gs){cL(gq,function(){bT(gq.doc,eW(gr,gs),Z);if(gr.bad||gs.bad){gq.curOp.selectionChanged=true}})}}},pollContent:function(){var gA=this.cm,gK=gA.display,gI=gA.doc.sel.primary();var gJ=gI.from(),gu=gI.to();if(gJ.line<gK.viewFrom||gu.line>gK.viewTo-1){return false}var gx;if(gJ.line==gK.viewFrom||(gx=dr(gA,gJ.line))==0){var gv=bM(gK.view[0].line);var gz=gK.view[0].node}else{var gv=bM(gK.view[gx].line);var gz=gK.view[gx-1].node.nextSibling}var gH=dr(gA,gu.line);if(gH==gK.view.length-1){var gC=gK.viewTo-1;var gF=gK.lineDiv.lastChild}else{var gC=bM(gK.view[gH+1].line)-1;var gF=gK.view[gH+1].node.previousSibling}var gL=gA.doc.splitLines(f6(gA,gz,gF,gv,gC));var gE=gb(gA.doc,W(gv,0),W(gC,fk(gA.doc,gC).text.length));while(gL.length>1&&gE.length>1){if(fL(gL)==fL(gE)){gL.pop();gE.pop();gC--}else{if(gL[0]==gE[0]){gL.shift();gE.shift();gv++}else{break}}}var gG=0,gs=0;var gB=gL[0],gr=gE[0],gq=Math.min(gB.length,gr.length);while(gG<gq&&gB.charCodeAt(gG)==gr.charCodeAt(gG)){++gG}var gy=fL(gL),gM=fL(gE);var gt=Math.min(gy.length-(gL.length==1?gG:0),gM.length-(gE.length==1?gG:0));while(gs<gt&&gy.charCodeAt(gy.length-gs-1)==gM.charCodeAt(gM.length-gs-1)){++gs}gL[gL.length-1]=gy.slice(0,gy.length-gs);gL[0]=gL[0].slice(gG);var gw=W(gv,gG);var gD=W(gC,gE.length?fL(gE).length-gs:0);if(gL.length>1||gL[0]||ce(gw,gD)){a0(gA.doc,gL,gw,gD,"+input");return true}},ensurePolled:function(){this.forceCompositionEnd()},reset:function(){this.forceCompositionEnd()},forceCompositionEnd:function(){if(!this.composing||this.composing.handled){return}this.applyComposition(this.composing);this.composing.handled=true;this.div.blur();this.div.focus()},applyComposition:function(gq){if(this.cm.isReadOnly()){c1(this.cm,ah)(this.cm)}else{if(gq.data&&gq.data!=gq.startData){c1(this.cm,f5)(this.cm,gq.data,0,gq.sel)}}},setUneditable:function(gq){gq.contentEditable="false"},onKeyPress:function(gq){gq.preventDefault();if(!this.cm.isReadOnly()){c1(this.cm,f5)(this.cm,String.fromCharCode(gq.charCode==null?gq.keyCode:gq.charCode),0)}},readOnlyChanged:function(gq){this.div.contentEditable=String(gq!="nocursor")},onContextMenu:f1,resetPosition:f1,needsContentAttribute:true},dv.prototype);function cy(gw,gu){var gv=fg(gw,gu.line);if(!gv||gv.hidden){return null}var gy=fk(gw.doc,gu.line);var gr=cs(gv,gy,gu.line);var gs=a(gy),gt="left";if(gs){var gq=aF(gs,gu.ch);gt=gq%2?"right":"left"}var gx=aK(gr.map,gu.ch,gt);gx.offset=gx.collapse=="right"?gx.end:gx.start;return gx}function ew(gr,gq){if(gq){gr.bad=true}return gr}function ay(gq,gt,gv){var gu;if(gt==gq.display.lineDiv){gu=gq.display.lineDiv.childNodes[gv];if(!gu){return ew(gq.clipPos(W(gq.display.viewTo-1)),true)}gt=null;gv=0}else{for(gu=gt;;gu=gu.parentNode){if(!gu||gu==gq.display.lineDiv){return null}if(gu.parentNode&&gu.parentNode==gq.display.lineDiv){break}}}for(var gs=0;gs<gq.display.view.length;gs++){var gr=gq.display.view[gs];if(gr.node==gu){return aa(gr,gt,gv)}}}function aa(gy,gu,gw){var gs=gy.text.firstChild,gt=false;if(!gu||!gh(gs,gu)){return ew(W(bM(gy.line),0),true)}if(gu==gs){gt=true;gu=gs.childNodes[gw];gw=0;if(!gu){var gE=gy.rest?fL(gy.rest):gy.line;return ew(W(bM(gE),gE.text.length),gt)}}var gv=gu.nodeType==3?gu:null,gC=gu;if(!gv&&gu.childNodes.length==1&&gu.firstChild.nodeType==3){gv=gu.firstChild;if(gw){gw=gv.nodeValue.length}}while(gC.parentNode!=gs){gC=gC.parentNode}var gr=gy.measure,gA=gr.maps;function gx(gH,gM,gJ){for(var gL=-1;gL<(gA?gA.length:0);gL++){var gG=gL<0?gr.map:gA[gL];for(var gK=0;gK<gG.length;gK+=3){var gI=gG[gK+2];if(gI==gH||gI==gM){var gN=bM(gL<0?gy.line:gy.rest[gL]);var gF=gG[gK]+gJ;if(gJ<0||gI!=gH){gF=gG[gK+(gJ?1:0)]}return W(gN,gF)}}}}var gD=gx(gv,gC,gw);if(gD){return ew(gD,gt)}for(var gq=gC.nextSibling,gz=gv?gv.nodeValue.length-gw:0;gq;gq=gq.nextSibling){gD=gx(gq,gq.firstChild,0);if(gD){return ew(W(gD.line,gD.ch-gz),gt)}else{gz+=gq.textContent.length}}for(var gB=gC.previousSibling,gz=gw;gB;gB=gB.previousSibling){gD=gx(gB,gB.firstChild,-1);if(gD){return ew(W(gD.line,gD.ch+gz),gt)}else{gz+=gq.textContent.length}}}function f6(gy,gw,gx,gt,gr){var gz="",gs=false,gq=gy.doc.lineSeparator();function gu(gA){return function(gB){return gB.id==gA}}function gv(gE){if(gE.nodeType==1){var gB=gE.getAttribute("cm-text");if(gB!=null){if(gB==""){gB=gE.textContent.replace(/\u200b/g,"")}gz+=gB;return}var gD=gE.getAttribute("cm-marker"),gA;if(gD){var gF=gy.findMarks(W(gt,0),W(gr+1,0),gu(+gD));if(gF.length&&(gA=gF[0].find())){gz+=gb(gy.doc,gA.from,gA.to).join(gq)}return}if(gE.getAttribute("contenteditable")=="false"){return}for(var gC=0;gC<gE.childNodes.length;gC++){gv(gE.childNodes[gC])}if(/^(pre|div|p)$/i.test(gE.nodeName)){gs=true}}else{if(gE.nodeType==3){var gG=gE.nodeValue;if(!gG){return}if(gs){gz+=gq;gs=false}gz+=gG}}}for(;;){gv(gw);if(gw==gx){break}gw=gw.nextSibling}return gz}H.inputStyles={textarea:Y,contenteditable:dv};function ga(gq,gr){this.ranges=gq;this.primIndex=gr}ga.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(gq){if(gq==this){return true}if(gq.primIndex!=this.primIndex||gq.ranges.length!=this.ranges.length){return false}for(var gs=0;gs<this.ranges.length;gs++){var gr=this.ranges[gs],gt=gq.ranges[gs];if(ce(gr.anchor,gt.anchor)!=0||ce(gr.head,gt.head)!=0){return false}}return true},deepCopy:function(){for(var gq=[],gr=0;gr<this.ranges.length;gr++){gq[gr]=new dY(ch(this.ranges[gr].anchor),ch(this.ranges[gr].head))}return new ga(gq,this.primIndex)},somethingSelected:function(){for(var gq=0;gq<this.ranges.length;gq++){if(!this.ranges[gq].empty()){return true}}return false},contains:function(gt,gq){if(!gq){gq=gt}for(var gs=0;gs<this.ranges.length;gs++){var gr=this.ranges[gs];if(ce(gq,gr.from())>=0&&ce(gt,gr.to())<=0){return gs}}return -1}};function dY(gq,gr){this.anchor=gq;this.head=gr}dY.prototype={from:function(){return aq(this.anchor,this.head)},to:function(){return bw(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};function cv(gq,gx){var gs=gq[gx];gq.sort(function(gA,gz){return ce(gA.from(),gz.from())});gx=dh(gq,gs);for(var gu=1;gu<gq.length;gu++){var gy=gq[gu],gr=gq[gu-1];if(ce(gr.to(),gy.from())>=0){var gv=aq(gr.from(),gy.from()),gw=bw(gr.to(),gy.to());var gt=gr.empty()?gy.from()==gy.head:gr.from()==gr.head;if(gu<=gx){--gx}gq.splice(--gu,2,new dY(gt?gw:gv,gt?gv:gw))}}return new ga(gq,gx)}function eW(gq,gr){return new ga([new dY(gq,gr||gq)],0)}function c4(gq,gr){return Math.max(gq.first,Math.min(gr,gq.first+gq.size-1))}function fP(gr,gs){if(gs.line<gr.first){return W(gr.first,0)}var gq=gr.first+gr.size-1;if(gs.line>gq){return W(gq,fk(gr,gq).text.length)}return fx(gs,fk(gr,gs.line).text.length)}function fx(gs,gr){var gq=gs.ch;if(gq==null||gq>gr){return W(gs.line,gr)}else{if(gq<0){return W(gs.line,0)}else{return gs}}}function b8(gr,gq){return gq>=gr.first&&gq<gr.first+gr.size}function d0(gs,gt){for(var gq=[],gr=0;gr<gt.length;gr++){gq[gr]=fP(gs,gt[gr])}return gq}function fA(gv,gr,gu,gq){if(gv.cm&&gv.cm.display.shift||gv.extend){var gt=gr.anchor;if(gq){var gs=ce(gu,gt)<0;if(gs!=(ce(gq,gt)<0)){gt=gu;gu=gq}else{if(gs!=(ce(gu,gq)<0)){gu=gq}}}return new dY(gt,gu)}else{return new dY(gq||gu,gu)}}function f3(gt,gs,gq,gr){bT(gt,new ga([fA(gt,gt.sel.primary(),gs,gq)],0),gr)}function av(gv,gu,gs){for(var gr=[],gt=0;gt<gv.sel.ranges.length;gt++){gr[gt]=fA(gv,gv.sel.ranges[gt],gu[gt],null)}var gq=cv(gr,gv.sel.primIndex);bT(gv,gq,gs)}function e(gu,gt,gr,gs){var gq=gu.sel.ranges.slice(0);gq[gt]=gr;bT(gu,cv(gq,gu.sel.primIndex),gs)}function F(gt,gr,gs,gq){bT(gt,eW(gr,gs),gq)}function c(gt,gr,gq){var gs={ranges:gr.ranges,update:function(gu){this.ranges=[];for(var gv=0;gv<gu.length;gv++){this.ranges[gv]=new dY(fP(gt,gu[gv].anchor),fP(gt,gu[gv].head))}},origin:gq&&gq.origin};aD(gt,"beforeSelectionChange",gt,gs);if(gt.cm){aD(gt.cm,"beforeSelectionChange",gt.cm,gs)}if(gs.ranges!=gr.ranges){return cv(gs.ranges,gs.ranges.length-1)}else{return gr}}function fc(gu,gt,gr){var gq=gu.history.done,gs=fL(gq);if(gs&&gs.ranges){gq[gq.length-1]=gt;es(gu,gt,gr)}else{bT(gu,gt,gr)}}function bT(gs,gr,gq){es(gs,gr,gq);gi(gs,gs.sel,gs.cm?gs.cm.curOp.id:NaN,gq)}function es(gt,gs,gr){if(fn(gt,"beforeSelectionChange")||gt.cm&&fn(gt.cm,"beforeSelectionChange")){gs=c(gt,gs,gr)}var gq=gr&&gr.bias||(ce(gs.primary().head,gt.sel.primary().head)<0?-1:1);c8(gt,n(gt,gs,gq,true));if(!(gr&&gr.scroll===false)&&gt.cm){fK(gt.cm)}}function c8(gr,gq){if(gq.equals(gr.sel)){return}gr.sel=gq;if(gr.cm){gr.cm.curOp.updateInput=gr.cm.curOp.selectionChanged=true;V(gr.cm)}ae(gr,"cursorActivity",gr)}function eB(gq){c8(gq,n(gq,gq.sel,null,false),Z)}function n(gz,gq,gw,gx){var gt;for(var gu=0;gu<gq.ranges.length;gu++){var gv=gq.ranges[gu];var gr=gq.ranges.length==gz.sel.ranges.length&&gz.sel.ranges[gu];var gy=bU(gz,gv.anchor,gr&&gr.anchor,gw,gx);var gs=bU(gz,gv.head,gr&&gr.head,gw,gx);if(gt||gy!=gv.anchor||gs!=gv.head){if(!gt){gt=gq.ranges.slice(0,gu)}gt[gu]=new dY(gy,gs)}}return gt?cv(gt,gq.primIndex):gq}function eM(gA,gy,gt,gs,gw){var gB=fk(gA,gy.line);if(gB.markedSpans){for(var gu=0;gu<gB.markedSpans.length;++gu){var gq=gB.markedSpans[gu],gr=gq.marker;if((gq.from==null||(gr.inclusiveLeft?gq.from<=gy.ch:gq.from<gy.ch))&&(gq.to==null||(gr.inclusiveRight?gq.to>=gy.ch:gq.to>gy.ch))){if(gw){aD(gr,"beforeCursorEnter");if(gr.explicitlyCleared){if(!gB.markedSpans){break}else{--gu;continue}}}if(!gr.atomic){continue}if(gt){var gx=gr.find(gs<0?1:-1),gz;if(gs<0?gr.inclusiveRight:gr.inclusiveLeft){gx=gm(gA,gx,-gs,gx&&gx.line==gy.line?gB:null)}if(gx&&gx.line==gy.line&&(gz=ce(gx,gt))&&(gs<0?gz<0:gz>0)){return eM(gA,gx,gy,gs,gw)}}var gv=gr.find(gs<0?-1:1);if(gs<0?gr.inclusiveLeft:gr.inclusiveRight){gv=gm(gA,gv,gs,gv.line==gy.line?gB:null)}return gv?eM(gA,gv,gy,gs,gw):null}}}return gy}function bU(gv,gw,gt,gr,gq){var gs=gr||1;var gu=eM(gv,gw,gt,gs,gq)||(!gq&&eM(gv,gw,gt,gs,true))||eM(gv,gw,gt,-gs,gq)||(!gq&&eM(gv,gw,gt,-gs,true));if(!gu){gv.cantEdit=true;return W(gv.first,0)}return gu}function gm(gs,gt,gr,gq){if(gr<0&&gt.ch==0){if(gt.line>gs.first){return fP(gs,W(gt.line-1))}else{return null}}else{if(gr>0&&gt.ch==(gq||fk(gs,gt.line)).text.length){if(gt.line<gs.first+gs.size-1){return W(gt.line+1,0)}else{return null}}else{return new W(gt.line,gt.ch+gr)}}}function bB(gq){gq.display.input.showSelection(gq.display.input.prepareSelection())}function fN(gx,gq){var gw=gx.doc,gy={};var gv=gy.cursors=document.createDocumentFragment();var gr=gy.selection=document.createDocumentFragment();for(var gt=0;gt<gw.sel.ranges.length;gt++){if(gq===false&&gt==gw.sel.primIndex){continue}var gu=gw.sel.ranges[gt];if(gu.from().line>=gx.display.viewTo||gu.to().line<gx.display.viewFrom){continue}var gs=gu.empty();if(gs||gx.options.showCursorWhenSelecting){A(gx,gu.head,gv)}if(!gs){bC(gx,gu,gr)}}return gy}function A(gq,gt,gs){var gv=dU(gq,gt,"div",null,null,!gq.options.singleCursorHeightPerLine);var gu=gs.appendChild(f9("div","\u00a0","CodeMirror-cursor"));gu.style.left=gv.left+"px";gu.style.top=gv.top+"px";gu.style.height=Math.max(0,gv.bottom-gv.top)*gq.options.cursorHeight+"px";if(gv.other){var gr=gs.appendChild(f9("div","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor"));gr.style.display="";gr.style.left=gv.other.left+"px";gr.style.top=gv.other.top+"px";gr.style.height=(gv.other.bottom-gv.other.top)*0.85+"px"}}function bC(gu,gA,gv){var gD=gu.display,gH=gu.doc;var gq=document.createDocumentFragment();var gz=e9(gu.display),gt=gz.left;var gE=Math.max(gD.sizerWidth,dl(gu)-gD.sizer.offsetLeft)-gz.right;function gB(gL,gK,gJ,gI){if(gK<0){gK=0}gK=Math.round(gK);gI=Math.round(gI);gq.appendChild(f9("div",null,"CodeMirror-selected","position: absolute; left: "+gL+"px; top: "+gK+"px; width: "+(gJ==null?gE-gL:gJ)+"px; height: "+(gI-gK)+"px"))}function gr(gJ,gL,gO){var gK=fk(gH,gJ);var gM=gK.text.length;var gP,gI;function gN(gR,gQ){return cI(gu,W(gJ,gR),"div",gK,gQ)}d5(a(gK),gL||0,gO==null?gM:gO,function(gX,gW,gQ){var gT=gN(gX,"left"),gU,gV,gS;if(gX==gW){gU=gT;gV=gS=gT.left}else{gU=gN(gW-1,"right");if(gQ=="rtl"){var gR=gT;gT=gU;gU=gR}gV=gT.left;gS=gU.right}if(gL==null&&gX==0){gV=gt}if(gU.top-gT.top>3){gB(gV,gT.top,null,gT.bottom);gV=gt;if(gT.bottom<gU.top){gB(gV,gT.bottom,null,gU.top)}}if(gO==null&&gW==gM){gS=gE}if(!gP||gT.top<gP.top||gT.top==gP.top&&gT.left<gP.left){gP=gT}if(!gI||gU.bottom>gI.bottom||gU.bottom==gI.bottom&&gU.right>gI.right){gI=gU}if(gV<gt+1){gV=gt}gB(gV,gU.top,gS-gV,gU.bottom)});return{start:gP,end:gI}}var gG=gA.from(),gF=gA.to();if(gG.line==gF.line){gr(gG.line,gG.ch,gF.ch)}else{var gs=fk(gH,gG.line),gx=fk(gH,gF.line);var gw=x(gs)==x(gx);var gy=gr(gG.line,gG.ch,gw?gs.text.length+1:null).end;var gC=gr(gF.line,gw?0:null,gF.ch).start;if(gw){if(gy.top<gC.top-2){gB(gy.right,gy.top,null,gy.bottom);gB(gt,gC.top,gC.left,gC.bottom)}else{gB(gy.right,gy.top,gC.left-gy.right,gy.bottom)}}if(gy.bottom<gC.top){gB(gt,gy.bottom,null,gC.top)}}gv.appendChild(gq)}function o(gq){if(!gq.state.focused){return}var gs=gq.display;clearInterval(gs.blinker);var gr=true;gs.cursorDiv.style.visibility="";if(gq.options.cursorBlinkRate>0){gs.blinker=setInterval(function(){gs.cursorDiv.style.visibility=(gr=!gr)?"":"hidden"},gq.options.cursorBlinkRate)}else{if(gq.options.cursorBlinkRate<0){gs.cursorDiv.style.visibility="hidden"}}}function eh(gq,gr){if(gq.doc.mode.startState&&gq.doc.frontier<gq.display.viewTo){gq.state.highlight.set(gr,cu(cO,gq))}}function cO(gq){var gu=gq.doc;if(gu.frontier<gu.first){gu.frontier=gu.first}if(gu.frontier>=gq.display.viewTo){return}var gs=+new Date+gq.options.workTime;var gt=b2(gu.mode,dC(gq,gu.frontier));var gr=[];gu.iter(gu.frontier,Math.min(gu.first+gu.size,gq.display.viewTo+500),function(gv){if(gu.frontier>=gq.display.viewFrom){var gy=gv.styles,gC=gv.text.length>gq.options.maxHighlightLength;var gA=fE(gq,gv,gC?b2(gu.mode,gt):gt,true);gv.styles=gA.styles;var gx=gv.styleClasses,gz=gA.classes;if(gz){gv.styleClasses=gz}else{if(gx){gv.styleClasses=null}}var gB=!gy||gy.length!=gv.styles.length||gx!=gz&&(!gx||!gz||gx.bgClass!=gz.bgClass||gx.textClass!=gz.textClass);for(var gw=0;!gB&&gw<gy.length;++gw){gB=gy[gw]!=gv.styles[gw]}if(gB){gr.push(gu.frontier)}gv.stateAfter=gC?gt:b2(gu.mode,gt)}else{if(gv.text.length<=gq.options.maxHighlightLength){dx(gq,gv.text,gt)}gv.stateAfter=gu.frontier%5==0?b2(gu.mode,gt):null}++gu.frontier;if(+new Date>gs){eh(gq,gq.options.workDelay);return true}});if(gr.length){cL(gq,function(){for(var gv=0;gv<gr.length;gv++){R(gq,gr[gv],"text")}})}}function cx(gw,gq,gt){var gr,gu,gv=gw.doc;var gs=gt?-1:gq-(gw.doc.mode.innerMode?1000:100);for(var gz=gq;gz>gs;--gz){if(gz<=gv.first){return gv.first}var gy=fk(gv,gz-1);if(gy.stateAfter&&(!gt||gz<=gv.frontier)){return gz}var gx=bS(gy.text,null,gw.options.tabSize);if(gu==null||gr>gx){gu=gz-1;gr=gx}}return gu}function dC(gq,gw,gr){var gu=gq.doc,gt=gq.display;if(!gu.mode.startState){return true}var gv=cx(gq,gw,gr),gs=gv>gu.first&&fk(gu,gv-1).stateAfter;if(!gs){gs=bZ(gu.mode)}else{gs=b2(gu.mode,gs)}gu.iter(gv,gw,function(gx){dx(gq,gx.text,gs);var gy=gv==gw-1||gv%5==0||gv>=gt.viewFrom&&gv<gt.viewTo;gx.stateAfter=gy?b2(gu.mode,gs):null;++gv});if(gr){gu.frontier=gv}return gs}function fd(gq){return gq.lineSpace.offsetTop}function bH(gq){return gq.mover.offsetHeight-gq.lineSpace.offsetHeight}function e9(gt){if(gt.cachedPaddingH){return gt.cachedPaddingH}var gs=bQ(gt.measure,f9("pre","x"));var gq=window.getComputedStyle?window.getComputedStyle(gs):gs.currentStyle;var gr={left:parseInt(gq.paddingLeft),right:parseInt(gq.paddingRight)};if(!isNaN(gr.left)&&!isNaN(gr.right)){gt.cachedPaddingH=gr}return gr}function cS(gq){return dJ-gq.display.nativeBarWidth}function dl(gq){return gq.display.scroller.clientWidth-cS(gq)-gq.display.barWidth}function cU(gq){return gq.display.scroller.clientHeight-cS(gq)-gq.display.barHeight}function cg(gx,gt,gw){var gs=gx.options.lineWrapping;var gu=gs&&dl(gx);if(!gt.measure.heights||gs&&gt.measure.width!=gu){var gv=gt.measure.heights=[];if(gs){gt.measure.width=gu;var gz=gt.text.firstChild.getClientRects();for(var gq=0;gq<gz.length-1;gq++){var gy=gz[gq],gr=gz[gq+1];if(Math.abs(gy.bottom-gr.bottom)>2){gv.push((gy.bottom+gr.top)/2-gw.top)}}}gv.push(gw.bottom-gw.top)}}function cs(gs,gq,gt){if(gs.line==gq){return{map:gs.measure.map,cache:gs.measure.cache}}for(var gr=0;gr<gs.rest.length;gr++){if(gs.rest[gr]==gq){return{map:gs.measure.maps[gr],cache:gs.measure.caches[gr]}}}for(var gr=0;gr<gs.rest.length;gr++){if(bM(gs.rest[gr])>gt){return{map:gs.measure.maps[gr],cache:gs.measure.caches[gr],before:true}}}}function c0(gq,gs){gs=x(gs);var gu=bM(gs);var gr=gq.display.externalMeasured=new bu(gq.doc,gs,gu);gr.lineN=gu;var gt=gr.built=eV(gq,gr);gr.text=gt.pre;bQ(gq.display.lineMeasure,gt.pre);return gr}function ej(gq,gr,gt,gs){return C(gq,a3(gq,gr),gt,gs)}function fg(gq,gs){if(gs>=gq.display.viewFrom&&gs<gq.display.viewTo){return gq.display.view[dr(gq,gs)]}var gr=gq.display.externalMeasured;if(gr&&gs>=gr.lineN&&gs<gr.lineN+gr.size){return gr}}function a3(gq,gs){var gt=bM(gs);var gr=fg(gq,gt);if(gr&&!gr.text){gr=null}else{if(gr&&gr.changes){ab(gq,gr,gt,fi(gq));gq.curOp.forceUpdate=true}}if(!gr){gr=c0(gq,gs)}var gu=cs(gr,gs,gt);return{line:gs,view:gr,rect:null,map:gu.map,cache:gu.cache,before:gu.before,hasHeights:false}}function C(gq,gw,gu,gr,gt){if(gw.before){gu=-1}var gs=gu+(gr||""),gv;if(gw.cache.hasOwnProperty(gs)){gv=gw.cache[gs]}else{if(!gw.rect){gw.rect=gw.view.text.getBoundingClientRect()}if(!gw.hasHeights){cg(gq,gw.view,gw.rect);gw.hasHeights=true}gv=j(gq,gw,gu,gr);if(!gv.bogus){gw.cache[gs]=gv}}return{left:gv.left,right:gv.right,top:gt?gv.rtop:gv.top,bottom:gt?gv.rbottom:gv.bottom}}var eE={left:0,right:0,top:0,bottom:0};function aK(gr,gq,gx){var gt,gs,gv,gy;for(var gw=0;gw<gr.length;gw+=3){var gu=gr[gw],gz=gr[gw+1];if(gq<gu){gs=0;gv=1;gy="left"}else{if(gq<gz){gs=gq-gu;gv=gs+1}else{if(gw==gr.length-3||gq==gz&&gr[gw+3]>gq){gv=gz-gu;gs=gv-1;if(gq>=gz){gy="right"}}}}if(gs!=null){gt=gr[gw+2];if(gu==gz&&gx==(gt.insertLeft?"left":"right")){gy=gx}if(gx=="left"&&gs==0){while(gw&&gr[gw-2]==gr[gw-3]&&gr[gw-1].insertLeft){gt=gr[(gw-=3)+2];gy="left"}}if(gx=="right"&&gs==gz-gu){while(gw<gr.length-3&&gr[gw+3]==gr[gw+4]&&!gr[gw+5].insertLeft){gt=gr[(gw+=3)+2];gy="right"}}break}}return{node:gt,start:gs,end:gv,collapse:gy,coverStart:gu,coverEnd:gz}}function j(gx,gH,gA,gv){var gy=aK(gH.map,gA,gv);var gF=gy.node,gu=gy.start,gt=gy.end,gq=gy.collapse;var gr;if(gF.nodeType==3){for(var gG=0;gG<4;gG++){while(gu&&fu(gH.line.text.charAt(gy.coverStart+gu))){--gu}while(gy.coverStart+gt<gy.coverEnd&&fu(gH.line.text.charAt(gy.coverStart+gt))){++gt}if(dK&&k<9&&gu==0&&gt==gy.coverEnd-gy.coverStart){gr=gF.parentNode.getBoundingClientRect()}else{if(dK&&gx.options.lineWrapping){var gs=ck(gF,gu,gt).getClientRects();if(gs.length){gr=gs[gv=="right"?gs.length-1:0]}else{gr=eE}}else{gr=ck(gF,gu,gt).getBoundingClientRect()||eE}}if(gr.left||gr.right||gu==0){break}gt=gu;gu=gu-1;gq="right"}if(dK&&k<11){gr=eR(gx.display.measure,gr)}}else{if(gu>0){gq=gv="right"}var gs;if(gx.options.lineWrapping&&(gs=gF.getClientRects()).length>1){gr=gs[gv=="right"?gs.length-1:0]}else{gr=gF.getBoundingClientRect()}}if(dK&&k<9&&!gu&&(!gr||!gr.left&&!gr.right)){var gw=gF.parentNode.getClientRects()[0];if(gw){gr={left:gw.left,right:gw.left+dD(gx.display),top:gw.top,bottom:gw.bottom}}else{gr=eE}}var gD=gr.top-gH.rect.top,gB=gr.bottom-gH.rect.top;var gJ=(gD+gB)/2;var gI=gH.view.measure.heights;for(var gG=0;gG<gI.length-1;gG++){if(gJ<gI[gG]){break}}var gE=gG?gI[gG-1]:0,gC=gI[gG];var gz={left:(gq=="right"?gr.right:gr.left)-gH.rect.left,right:(gq=="left"?gr.left:gr.right)-gH.rect.left,top:gE,bottom:gC};if(!gr.left&&!gr.right){gz.bogus=true}if(!gx.options.singleCursorHeightPerLine){gz.rtop=gD;gz.rbottom=gB}return gz}function eR(gs,gt){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!aJ(gs)){return gt}var gr=screen.logicalXDPI/screen.deviceXDPI;var gq=screen.logicalYDPI/screen.deviceYDPI;return{left:gt.left*gr,right:gt.right*gr,top:gt.top*gq,bottom:gt.bottom*gq}}function at(gr){if(gr.measure){gr.measure.cache={};gr.measure.heights=null;if(gr.rest){for(var gq=0;gq<gr.rest.length;gq++){gr.measure.caches[gq]={}}}}}function aN(gq){gq.display.externalMeasure=null;d2(gq.display.lineMeasure);for(var gr=0;gr<gq.display.view.length;gr++){at(gq.display.view[gr])}}function aj(gq){aN(gq);gq.display.cachedCharWidth=gq.display.cachedTextHeight=gq.display.cachedPaddingH=null;if(!gq.options.lineWrapping){gq.display.maxLineChanged=true}gq.display.lineNumChars=null}function ct(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function cr(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function eU(gw,gt,gv,gr){if(gt.widgets){for(var gs=0;gs<gt.widgets.length;++gs){if(gt.widgets[gs].above){var gy=cX(gt.widgets[gs]);gv.top+=gy;gv.bottom+=gy}}}if(gr=="line"){return gv}if(!gr){gr="local"}var gu=bL(gt);if(gr=="local"){gu+=fd(gw.display)}else{gu-=gw.display.viewOffset}if(gr=="page"||gr=="window"){var gq=gw.display.lineSpace.getBoundingClientRect();gu+=gq.top+(gr=="window"?0:cr());var gx=gq.left+(gr=="window"?0:ct());gv.left+=gx;gv.right+=gx}gv.top+=gu;gv.bottom+=gu;return gv}function gl(gr,gu,gs){if(gs=="div"){return gu}var gw=gu.left,gv=gu.top;if(gs=="page"){gw-=ct();gv-=cr()}else{if(gs=="local"||!gs){var gt=gr.display.sizer.getBoundingClientRect();gw+=gt.left;gv+=gt.top}}var gq=gr.display.lineSpace.getBoundingClientRect();return{left:gw-gq.left,top:gv-gq.top}}function cI(gq,gu,gt,gs,gr){if(!gs){gs=fk(gq.doc,gu.line)}return eU(gq,gs,ej(gq,gs,gu.ch,gr),gt)}function dU(gz,gy,gs,gw,gB,gx){gw=gw||fk(gz.doc,gy.line);if(!gB){gB=a3(gz,gw)}function gu(gE,gD){var gC=C(gz,gB,gE,gD?"right":"left",gx);if(gD){gC.left=gC.right}else{gC.right=gC.left}return eU(gz,gw,gC,gs)}function gA(gF,gC){var gD=gv[gC],gE=gD.level%2;if(gF==dy(gD)&&gC&&gD.level<gv[gC-1].level){gD=gv[--gC];gF=gk(gD)-(gD.level%2?0:1);gE=true}else{if(gF==gk(gD)&&gC<gv.length-1&&gD.level<gv[gC+1].level){gD=gv[++gC];gF=dy(gD)-gD.level%2;gE=false}}if(gE&&gF==gD.to&&gF>gD.from){return gu(gF-1)}return gu(gF,gE)}var gv=a(gw),gq=gy.ch;if(!gv){return gu(gq)}var gr=aF(gv,gq);var gt=gA(gq,gr);if(e6!=null){gt.other=gA(gq,e6)}return gt}function dH(gq,gu){var gt=0,gu=fP(gq.doc,gu);if(!gq.options.lineWrapping){gt=dD(gq.display)*gu.ch}var gr=fk(gq.doc,gu.line);var gs=bL(gr)+fd(gq.display);return{left:gt,right:gt,top:gs,bottom:gs+gr.height}}function f8(gq,gr,gs,gu){var gt=W(gq,gr);gt.xRel=gu;if(gs){gt.outside=true}return gt}function fU(gx,gu,gt){var gw=gx.doc;gt+=gx.display.viewOffset;if(gt<0){return f8(gw.first,0,true,-1)}var gs=bF(gw,gt),gy=gw.first+gw.size-1;if(gs>gy){return f8(gw.first+gw.size-1,fk(gw,gy).text.length,true,1)}if(gu<0){gu=0}var gr=fk(gw,gs);for(;;){var gz=cY(gx,gr,gs,gu,gt);var gv=ex(gr);var gq=gv&&gv.find(0,true);if(gv&&(gz.ch>gq.from.ch||gz.ch==gq.from.ch&&gz.xRel>0)){gs=bM(gr=gq.to.line)}else{return gz}}}function cY(gA,gs,gD,gC,gB){var gz=gB-bL(gs);var gw=false,gJ=2*gA.display.wrapper.clientWidth;var gG=a3(gA,gs);function gN(gP){var gQ=dU(gA,W(gD,gP),"line",gs,gG);gw=true;if(gz>gQ.bottom){return gQ.left-gJ}else{if(gz<gQ.top){return gQ.left+gJ}else{gw=false}}return gQ.left}var gF=a(gs),gI=gs.text.length;var gK=cD(gs),gt=cR(gs);var gH=gN(gK),gq=gw,gr=gN(gt),gv=gw;if(gC>gr){return f8(gD,gt,gv,1)}for(;;){if(gF?gt==gK||gt==u(gs,gK,1):gt-gK<=1){var gE=gC<gH||gC-gH<=gr-gC?gK:gt;var gM=gC-(gE==gK?gH:gr);while(fu(gs.text.charAt(gE))){++gE}var gy=f8(gD,gE,gE==gK?gq:gv,gM<-1?-1:gM>1?1:0);return gy}var gx=Math.ceil(gI/2),gO=gK+gx;if(gF){gO=gK;for(var gL=0;gL<gx;++gL){gO=u(gs,gO,1)}}var gu=gN(gO);if(gu>gC){gt=gO;gr=gu;if(gv=gw){gr+=1000}gI=gx}else{gK=gO;gH=gu;gq=gw;gI-=gx}}}var aG;function aX(gs){if(gs.cachedTextHeight!=null){return gs.cachedTextHeight}if(aG==null){aG=f9("pre");for(var gr=0;gr<49;++gr){aG.appendChild(document.createTextNode("x"));aG.appendChild(f9("br"))}aG.appendChild(document.createTextNode("x"))}bQ(gs.measure,aG);var gq=aG.offsetHeight/50;if(gq>3){gs.cachedTextHeight=gq}d2(gs.measure);return gq||1}function dD(gu){if(gu.cachedCharWidth!=null){return gu.cachedCharWidth}var gq=f9("span","xxxxxxxxxx");var gt=f9("pre",[gq]);bQ(gu.measure,gt);var gs=gq.getBoundingClientRect(),gr=(gs.right-gs.left)/10;if(gr>2){gu.cachedCharWidth=gr}return gr||10}var bo=null;var d9=0;function cH(gq){gq.curOp={cm:gq,viewChanged:false,startHeight:gq.doc.height,forceUpdate:false,updateInput:null,typing:false,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:false,updateMaxLine:false,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:false,id:++d9};if(bo){bo.ops.push(gq.curOp)}else{gq.curOp.ownsGroup=bo={ops:[gq.curOp],delayedCallbacks:[]}}}function cT(gt){var gs=gt.delayedCallbacks,gr=0;do{for(;gr<gs.length;gr++){gs[gr].call(null)}for(var gq=0;gq<gt.ops.length;gq++){var gu=gt.ops[gq];if(gu.cursorActivityHandlers){while(gu.cursorActivityCalled<gu.cursorActivityHandlers.length){gu.cursorActivityHandlers[gu.cursorActivityCalled++].call(null,gu.cm)}}}}while(gr<gs.length)}function al(gq){var gt=gq.curOp,gs=gt.ownsGroup;if(!gs){return}try{cT(gs)}finally{bo=null;for(var gr=0;gr<gs.ops.length;gr++){gs.ops[gr].cm.curOp=null}cJ(gs)}}function cJ(gs){var gr=gs.ops;for(var gq=0;gq<gr.length;gq++){b4(gr[gq])}for(var gq=0;gq<gr.length;gq++){ap(gr[gq])}for(var gq=0;gq<gr.length;gq++){b1(gr[gq])}for(var gq=0;gq<gr.length;gq++){ao(gr[gq])}for(var gq=0;gq<gr.length;gq++){e4(gr[gq])}}function b4(gs){var gq=gs.cm,gr=gq.display;J(gq);if(gs.updateMaxLine){h(gq)}gs.mustUpdate=gs.viewChanged||gs.forceUpdate||gs.scrollTop!=null||gs.scrollToPos&&(gs.scrollToPos.from.line<gr.viewFrom||gs.scrollToPos.to.line>=gr.viewTo)||gr.maxLineChanged&&gq.options.lineWrapping;gs.update=gs.mustUpdate&&new aH(gq,gs.mustUpdate&&{top:gs.scrollTop,ensure:gs.scrollToPos},gs.forceUpdate)}function ap(gq){gq.updatedDisplay=gq.mustUpdate&&B(gq.cm,gq.update)}function b1(gs){var gq=gs.cm,gr=gq.display;if(gs.updatedDisplay){a8(gq)}gs.barMeasure=dA(gq);if(gr.maxLineChanged&&!gq.options.lineWrapping){gs.adjustWidthTo=ej(gq,gr.maxLine,gr.maxLine.text.length).left+3;gq.display.sizerWidth=gs.adjustWidthTo;gs.barMeasure.scrollWidth=Math.max(gr.scroller.clientWidth,gr.sizer.offsetLeft+gs.adjustWidthTo+cS(gq)+gq.display.barWidth);gs.maxScrollLeft=Math.max(0,gr.sizer.offsetLeft+gs.adjustWidthTo-dl(gq))}if(gs.updatedDisplay||gs.selectionChanged){gs.preparedSelection=gr.input.prepareSelection(gs.focus)}}function ao(gs){var gq=gs.cm;if(gs.adjustWidthTo!=null){gq.display.sizer.style.minWidth=gs.adjustWidthTo+"px";if(gs.maxScrollLeft<gq.doc.scrollLeft){bD(gq,Math.min(gq.display.scroller.scrollLeft,gs.maxScrollLeft),true)}gq.display.maxLineChanged=false}var gr=gs.focus&&gs.focus==dO()&&(!document.hasFocus||document.hasFocus());if(gs.preparedSelection){gq.display.input.showSelection(gs.preparedSelection,gr)}if(gs.updatedDisplay||gs.startHeight!=gq.doc.height){e2(gq,gs.barMeasure)}if(gs.updatedDisplay){dz(gq,gs.barMeasure)}if(gs.selectionChanged){o(gq)}if(gq.state.focused&&gs.updateInput){gq.display.input.reset(gs.typing)}if(gr){r(gs.cm)}}function e4(gx){var gq=gx.cm,gv=gq.display,gu=gq.doc;if(gx.updatedDisplay){ci(gq,gx.update)}if(gv.wheelStartX!=null&&(gx.scrollTop!=null||gx.scrollLeft!=null||gx.scrollToPos)){gv.wheelStartX=gv.wheelStartY=null}if(gx.scrollTop!=null&&(gv.scroller.scrollTop!=gx.scrollTop||gx.forceScroll)){gu.scrollTop=Math.max(0,Math.min(gv.scroller.scrollHeight-gv.scroller.clientHeight,gx.scrollTop));gv.scrollbars.setScrollTop(gu.scrollTop);gv.scroller.scrollTop=gu.scrollTop}if(gx.scrollLeft!=null&&(gv.scroller.scrollLeft!=gx.scrollLeft||gx.forceScroll)){gu.scrollLeft=Math.max(0,Math.min(gv.scroller.scrollWidth-gv.scroller.clientWidth,gx.scrollLeft));gv.scrollbars.setScrollLeft(gu.scrollLeft);gv.scroller.scrollLeft=gu.scrollLeft;eH(gq)}if(gx.scrollToPos){var gt=D(gq,fP(gu,gx.scrollToPos.from),fP(gu,gx.scrollToPos.to),gx.scrollToPos.margin);if(gx.scrollToPos.isCursor&&gq.state.focused){d7(gq,gt)}}var gs=gx.maybeHiddenMarkers,gw=gx.maybeUnhiddenMarkers;if(gs){for(var gr=0;gr<gs.length;++gr){if(!gs[gr].lines.length){aD(gs[gr],"hide")}}}if(gw){for(var gr=0;gr<gw.length;++gr){if(gw[gr].lines.length){aD(gw[gr],"unhide")}}}if(gv.wrapper.offsetHeight){gu.scrollTop=gq.display.scroller.scrollTop}if(gx.changeObjs){aD(gq,"changes",gq,gx.changeObjs)}if(gx.update){gx.update.finish()}}function cL(gq,gr){if(gq.curOp){return gr()}cH(gq);try{return gr()}finally{al(gq)}}function c1(gq,gr){return function(){if(gq.curOp){return gr.apply(gq,arguments)}cH(gq);try{return gr.apply(gq,arguments)}finally{al(gq)}}}function c7(gq){return function(){if(this.curOp){return gq.apply(this,arguments)}cH(this);try{return gq.apply(this,arguments)}finally{al(this)}}}function cC(gq){return function(){var gr=this.cm;if(!gr||gr.curOp){return gq.apply(this,arguments)}cH(gr);try{return gq.apply(this,arguments)}finally{al(gr)}}}function bu(gs,gq,gr){this.line=gq;this.rest=g(gq);this.size=this.rest?bM(fL(this.rest))-gr+1:1;this.node=this.text=null;this.hidden=fB(gs,gq)}function eZ(gq,gw,gv){var gu=[],gs;for(var gt=gw;gt<gv;gt=gs){var gr=new bu(gq.doc,fk(gq.doc,gt),gt);gs=gt+gr.size;gu.push(gr)}return gu}function ah(gx,gv,gw,gy){if(gv==null){gv=gx.doc.first}if(gw==null){gw=gx.doc.first+gx.doc.size}if(!gy){gy=0}var gs=gx.display;if(gy&&gw<gs.viewTo&&(gs.updateLineNumbers==null||gs.updateLineNumbers>gv)){gs.updateLineNumbers=gv}gx.curOp.viewChanged=true;if(gv>=gs.viewTo){if(a6&&aV(gx.doc,gv)<gs.viewTo){eA(gx)}}else{if(gw<=gs.viewFrom){if(a6&&d3(gx.doc,gw+gy)>gs.viewFrom){eA(gx)}else{gs.viewFrom+=gy;gs.viewTo+=gy}}else{if(gv<=gs.viewFrom&&gw>=gs.viewTo){eA(gx)}else{if(gv<=gs.viewFrom){var gu=de(gx,gw,gw+gy,1);if(gu){gs.view=gs.view.slice(gu.index);gs.viewFrom=gu.lineN;gs.viewTo+=gy}else{eA(gx)}}else{if(gw>=gs.viewTo){var gu=de(gx,gv,gv,-1);if(gu){gs.view=gs.view.slice(0,gu.index);gs.viewTo=gu.lineN}else{eA(gx)}}else{var gt=de(gx,gv,gv,-1);var gr=de(gx,gw,gw+gy,1);if(gt&&gr){gs.view=gs.view.slice(0,gt.index).concat(eZ(gx,gt.lineN,gr.lineN)).concat(gs.view.slice(gr.index));gs.viewTo+=gy}else{eA(gx)}}}}}}var gq=gs.externalMeasured;if(gq){if(gw<gq.lineN){gq.lineN+=gy}else{if(gv<gq.lineN+gq.size){gs.externalMeasured=null}}}}function R(gr,gs,gv){gr.curOp.viewChanged=true;var gw=gr.display,gu=gr.display.externalMeasured;if(gu&&gs>=gu.lineN&&gs<gu.lineN+gu.size){gw.externalMeasured=null}if(gs<gw.viewFrom||gs>=gw.viewTo){return}var gt=gw.view[dr(gr,gs)];if(gt.node==null){return}var gq=gt.changes||(gt.changes=[]);if(dh(gq,gv)==-1){gq.push(gv)}}function eA(gq){gq.display.viewFrom=gq.display.viewTo=gq.doc.first;gq.display.view=[];gq.display.viewOffset=0}function dr(gq,gt){if(gt>=gq.display.viewTo){return null}gt-=gq.display.viewFrom;if(gt<0){return null}var gr=gq.display.view;for(var gs=0;gs<gr.length;gs++){gt-=gr[gs].size;if(gt<0){return gs}}}function de(gy,gs,gu,gr){var gv=dr(gy,gs),gx,gw=gy.display.view;if(!a6||gu==gy.doc.first+gy.doc.size){return{index:gv,lineN:gu}}for(var gt=0,gq=gy.display.viewFrom;gt<gv;gt++){gq+=gw[gt].size}if(gq!=gs){if(gr>0){if(gv==gw.length-1){return null}gx=(gq+gw[gv].size)-gs;gv++}else{gx=gq-gs}gs+=gx;gu+=gx}while(aV(gy.doc,gu)!=gu){if(gv==(gr<0?0:gw.length-1)){return null}gu+=gr*gw[gv-(gr<0?1:0)].size;gv+=gr}return{index:gv,lineN:gu}}function cQ(gq,gu,gt){var gs=gq.display,gr=gs.view;if(gr.length==0||gu>=gs.viewTo||gt<=gs.viewFrom){gs.view=eZ(gq,gu,gt);gs.viewFrom=gu}else{if(gs.viewFrom>gu){gs.view=eZ(gq,gu,gs.viewFrom).concat(gs.view)}else{if(gs.viewFrom<gu){gs.view=gs.view.slice(dr(gq,gu))}}gs.viewFrom=gu;if(gs.viewTo<gt){gs.view=gs.view.concat(eZ(gq,gs.viewTo,gt))}else{if(gs.viewTo>gt){gs.view=gs.view.slice(0,dr(gq,gt))}}}gs.viewTo=gt}function db(gq){var gr=gq.display.view,gu=0;for(var gt=0;gt<gr.length;gt++){var gs=gr[gt];if(!gs.hidden&&(!gs.node||gs.changes)){++gu}}return gu}function fW(gr){var gv=gr.display;bW(gv.scroller,"mousedown",c1(gr,ey));if(dK&&k<11){bW(gv.scroller,"dblclick",c1(gr,function(gz){if(aQ(gr,gz)){return}var gA=cm(gr,gz);if(!gA||l(gr,gz)||ba(gr.display,gz)){return}cF(gz);var gy=gr.findWordAt(gA);f3(gr.doc,gy.anchor,gy.head)}))}else{bW(gv.scroller,"dblclick",function(gy){aQ(gr,gy)||cF(gy)})}if(!gg){bW(gv.scroller,"contextmenu",function(gy){ax(gr,gy)})}var gx,gq={end:0};function gw(){if(gv.activeTouch){gx=setTimeout(function(){gv.activeTouch=null},1000);gq=gv.activeTouch;gq.end=+new Date}}function gt(gy){if(gy.touches.length!=1){return false}var gz=gy.touches[0];return gz.radiusX<=1&&gz.radiusY<=1}function gs(gB,gy){if(gy.left==null){return true}var gA=gy.left-gB.left,gz=gy.top-gB.top;return gA*gA+gz*gz>20*20}bW(gv.scroller,"touchstart",function(gz){if(!aQ(gr,gz)&&!gt(gz)){clearTimeout(gx);var gy=+new Date;gv.activeTouch={start:gy,moved:false,prev:gy-gq.end<=300?gq:null};if(gz.touches.length==1){gv.activeTouch.left=gz.touches[0].pageX;gv.activeTouch.top=gz.touches[0].pageY}}});bW(gv.scroller,"touchmove",function(){if(gv.activeTouch){gv.activeTouch.moved=true}});bW(gv.scroller,"touchend",function(gz){var gB=gv.activeTouch;if(gB&&!ba(gv,gz)&&gB.left!=null&&!gB.moved&&new Date-gB.start<300){var gA=gr.coordsChar(gv.activeTouch,"page"),gy;if(!gB.prev||gs(gB,gB.prev)){gy=new dY(gA,gA)}else{if(!gB.prev.prev||gs(gB,gB.prev.prev)){gy=gr.findWordAt(gA)}else{gy=new dY(W(gA.line,0),fP(gr.doc,W(gA.line+1,0)))}}gr.setSelection(gy.anchor,gy.head);gr.focus();cF(gz)}gw()});bW(gv.scroller,"touchcancel",gw);bW(gv.scroller,"scroll",function(){if(gv.scroller.clientHeight){N(gr,gv.scroller.scrollTop);bD(gr,gv.scroller.scrollLeft,true);aD(gr,"scroll",gr)}});bW(gv.scroller,"mousewheel",function(gy){b(gr,gy)});bW(gv.scroller,"DOMMouseScroll",function(gy){b(gr,gy)});bW(gv.wrapper,"scroll",function(){gv.wrapper.scrollTop=gv.wrapper.scrollLeft=0});gv.dragFunctions={enter:function(gy){if(!aQ(gr,gy)){eu(gy)}},over:function(gy){if(!aQ(gr,gy)){gn(gr,gy);eu(gy)}},start:function(gy){Q(gr,gy)},drop:c1(gr,bj),leave:function(gy){if(!aQ(gr,gy)){da(gr)}}};var gu=gv.input.getField();bW(gu,"keyup",function(gy){bh.call(gr,gy)});bW(gu,"keydown",c1(gr,p));bW(gu,"keypress",c1(gr,cw));bW(gu,"focus",cu(cA,gr));bW(gu,"blur",cu(aU,gr))}function f7(gr,gu,gs){var gv=gs&&gs!=H.Init;if(!gu!=!gv){var gt=gr.display.dragFunctions;var gq=gu?bW:ef;gq(gr.display.scroller,"dragstart",gt.start);gq(gr.display.scroller,"dragenter",gt.enter);gq(gr.display.scroller,"dragover",gt.over);gq(gr.display.scroller,"dragleave",gt.leave);gq(gr.display.scroller,"drop",gt.drop)}}function aS(gq){var gr=gq.display;if(gr.lastWrapHeight==gr.wrapper.clientHeight&&gr.lastWrapWidth==gr.wrapper.clientWidth){return}gr.cachedCharWidth=gr.cachedTextHeight=gr.cachedPaddingH=null;gr.scrollbarsClipped=false;gq.setSize()}function ba(gr,gq){for(var gs=L(gq);gs!=gr.wrapper;gs=gs.parentNode){if(!gs||(gs.nodeType==1&&gs.getAttribute("cm-ignore-events")=="true")||(gs.parentNode==gr.sizer&&gs!=gr.mover)){return true}}}function cm(gz,gu,gr,gs){var gv=gz.display;if(!gr&&L(gu).getAttribute("cm-not-content")=="true"){return null}var gy,gw,gq=gv.lineSpace.getBoundingClientRect();try{gy=gu.clientX-gq.left;gw=gu.clientY-gq.top}catch(gu){return null}var gx=fU(gz,gy,gw),gA;if(gs&&gx.xRel==1&&(gA=fk(gz.doc,gx.line).text).length==gx.ch){var gt=bS(gA,gA.length,gz.options.tabSize)-gA.length;gx=W(gx.line,Math.max(0,Math.round((gy-e9(gz.display).left)/dD(gz.display))-gt))}return gx}function ey(gs){var gq=this,gr=gq.display;if(aQ(gq,gs)||gr.activeTouch&&gr.input.supportsTouch()){return}gr.shift=gs.shiftKey;if(ba(gr,gs)){if(!cZ){gr.scroller.draggable=false;setTimeout(function(){gr.scroller.draggable=true},100)}return}if(l(gq,gs)){return}var gt=cm(gq,gs);window.focus();switch(fT(gs)){case 1:if(gq.state.selectingText){gq.state.selectingText(gs)}else{if(gt){aw(gq,gs,gt)}else{if(L(gs)==gr.scroller){cF(gs)}}}break;case 2:if(cZ){gq.state.lastMiddleDown=+new Date}if(gt){f3(gq.doc,gt)}setTimeout(function(){gr.input.focus()},20);cF(gs);break;case 3:if(gg){ax(gq,gs)}else{ak(gq)}break}}var dn,dd;function aw(gr,gw,gx){if(dK){setTimeout(cu(r,gr),0)}else{gr.curOp.focus=dO()}var gs=+new Date,gu;if(dd&&dd.time>gs-400&&ce(dd.pos,gx)==0){gu="triple"}else{if(dn&&dn.time>gs-400&&ce(dn.pos,gx)==0){gu="double";dd={time:gs,pos:gx}}else{gu="single";dn={time:gs,pos:gx}}}var gv=gr.doc.sel,gq=b6?gw.metaKey:gw.ctrlKey,gt;if(gr.options.dragDrop&&eP&&!gr.isReadOnly()&&gu=="single"&&(gt=gv.contains(gx))>-1&&(ce((gt=gv.ranges[gt]).from(),gx)<0||gx.xRel>0)&&(ce(gt.to(),gx)>0||gx.xRel<0)){a2(gr,gw,gx,gq)}else{m(gr,gw,gx,gu,gq)}}function a2(gs,gv,gw,gr){var gu=gs.display,gt=+new Date;var gq=c1(gs,function(gx){if(cZ){gu.scroller.draggable=false}gs.state.draggingText=false;ef(document,"mouseup",gq);ef(gu.scroller,"drop",gq);if(Math.abs(gv.clientX-gx.clientX)+Math.abs(gv.clientY-gx.clientY)<10){cF(gx);if(!gr&&+new Date-200<gt){f3(gs.doc,gw)}if(cZ||dK&&k==9){setTimeout(function(){document.body.focus();gu.input.focus()},20)}else{gu.input.focus()}}});if(cZ){gu.scroller.draggable=true}gs.state.draggingText=gq;if(gu.scroller.dragDrop){gu.scroller.dragDrop()}bW(document,"mouseup",gq);bW(gu.scroller,"drop",gq)}function m(gu,gI,gt,gr,gw){var gF=gu.display,gK=gu.doc;cF(gI);var gs,gJ,gv=gK.sel,gq=gv.ranges;if(gw&&!gI.shiftKey){gJ=gK.sel.contains(gt);if(gJ>-1){gs=gq[gJ]}else{gs=new dY(gt,gt)}}else{gs=gK.sel.primary();gJ=gK.sel.primIndex}if(fO?gI.shiftKey&&gI.metaKey:gI.altKey){gr="rect";if(!gw){gs=new dY(gt,gt)}gt=cm(gu,gI,true,true);gJ=-1}else{if(gr=="double"){var gG=gu.findWordAt(gt);if(gu.display.shift||gK.extend){gs=fA(gK,gs,gG.anchor,gG.head)}else{gs=gG}}else{if(gr=="triple"){var gz=new dY(W(gt.line,0),fP(gK,W(gt.line+1,0)));if(gu.display.shift||gK.extend){gs=fA(gK,gs,gz.anchor,gz.head)}else{gs=gz}}else{gs=fA(gK,gs,gt)}}}if(!gw){gJ=0;bT(gK,new ga([gs],0),M);gv=gK.sel}else{if(gJ==-1){gJ=gq.length;bT(gK,cv(gq.concat([gs]),gJ),{scroll:false,origin:"*mouse"})}else{if(gq.length>1&&gq[gJ].empty()&&gr=="single"&&!gI.shiftKey){bT(gK,cv(gq.slice(0,gJ).concat(gq.slice(gJ+1)),0),{scroll:false,origin:"*mouse"});gv=gK.sel}else{e(gK,gJ,gs,M)}}}var gE=gt;function gD(gV){if(ce(gE,gV)==0){return}gE=gV;if(gr=="rect"){var gM=[],gS=gu.options.tabSize;var gL=bS(fk(gK,gt.line).text,gt.ch,gS);var gY=bS(fk(gK,gV.line).text,gV.ch,gS);var gN=Math.min(gL,gY),gW=Math.max(gL,gY);for(var gZ=Math.min(gt.line,gV.line),gP=Math.min(gu.lastLine(),Math.max(gt.line,gV.line));gZ<=gP;gZ++){var gX=fk(gK,gZ).text,gO=et(gX,gN,gS);if(gN==gW){gM.push(new dY(W(gZ,gO),W(gZ,gO)))}else{if(gX.length>gO){gM.push(new dY(W(gZ,gO),W(gZ,et(gX,gW,gS))))}}}if(!gM.length){gM.push(new dY(gt,gt))}bT(gK,cv(gv.ranges.slice(0,gJ).concat(gM),gJ),{origin:"*mouse",scroll:false});gu.scrollIntoView(gV)}else{var gT=gs;var gQ=gT.anchor,gU=gV;if(gr!="single"){if(gr=="double"){var gR=gu.findWordAt(gV)}else{var gR=new dY(W(gV.line,0),fP(gK,W(gV.line+1,0)))}if(ce(gR.anchor,gQ)>0){gU=gR.head;gQ=aq(gT.from(),gR.anchor)}else{gU=gR.anchor;gQ=bw(gT.to(),gR.head)}}var gM=gv.ranges.slice(0);gM[gJ]=new dY(fP(gK,gQ),gU);bT(gK,cv(gM,gJ),M)}}var gB=gF.wrapper.getBoundingClientRect();var gx=0;function gH(gN){var gL=++gx;var gP=cm(gu,gN,true,gr=="rect");if(!gP){return}if(ce(gP,gE)!=0){gu.curOp.focus=dO();gD(gP);var gO=b5(gF,gK);if(gP.line>=gO.to||gP.line<gO.from){setTimeout(c1(gu,function(){if(gx==gL){gH(gN)}}),150)}}else{var gM=gN.clientY<gB.top?-20:gN.clientY>gB.bottom?20:0;if(gM){setTimeout(c1(gu,function(){if(gx!=gL){return}gF.scroller.scrollTop+=gM;gH(gN)}),50)}}}function gA(gL){gu.state.selectingText=false;gx=Infinity;cF(gL);gF.input.focus();ef(document,"mousemove",gC);ef(document,"mouseup",gy);gK.history.lastSelOrigin=null}var gC=c1(gu,function(gL){if(!fT(gL)){gA(gL)}else{gH(gL)}});var gy=c1(gu,gA);gu.state.selectingText=gy;bW(document,"mousemove",gC);bW(document,"mouseup",gy)}function go(gA,gw,gy,gz){try{var gr=gw.clientX,gq=gw.clientY}catch(gw){return false}if(gr>=Math.floor(gA.display.gutters.getBoundingClientRect().right)){return false}if(gz){cF(gw)}var gx=gA.display;var gv=gx.lineDiv.getBoundingClientRect();if(gq>gv.bottom||!fn(gA,gy)){return bK(gw)}gq-=gv.top-gx.viewOffset;for(var gt=0;gt<gA.options.gutters.length;++gt){var gu=gx.gutters.childNodes[gt];if(gu&&gu.getBoundingClientRect().right>=gr){var gB=bF(gA.doc,gq);var gs=gA.options.gutters[gt];aD(gA,gy,gA,gB,gs,gw);return bK(gw)}}}function l(gq,gr){return go(gq,gr,"gutterClick",true)}var ag=0;function bj(gw){var gy=this;da(gy);if(aQ(gy,gw)||ba(gy.display,gw)){return}cF(gw);if(dK){ag=+new Date}var gx=cm(gy,gw,true),gq=gw.dataTransfer.files;if(!gx||gy.isReadOnly()){return}if(gq&&gq.length&&window.FileReader&&window.File){var gs=gq.length,gz=Array(gs),gr=0;var gu=function(gC,gB){if(gy.options.allowDropFileTypes&&dh(gy.options.allowDropFileTypes,gC.type)==-1){return}var gA=new FileReader;gA.onload=c1(gy,function(){var gD=gA.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(gD)){gD=""}gz[gB]=gD;if(++gr==gs){gx=fP(gy.doc,gx);var gE={from:gx,to:gx,text:gy.doc.splitLines(gz.join(gy.doc.lineSeparator())),origin:"paste"};bf(gy.doc,gE);fc(gy.doc,eW(gx,cW(gE)))}});gA.readAsText(gC)};for(var gv=0;gv<gs;++gv){gu(gq[gv],gv)}}else{if(gy.state.draggingText&&gy.doc.sel.contains(gx)>-1){gy.state.draggingText(gw);setTimeout(function(){gy.display.input.focus()},20);return}try{var gz=gw.dataTransfer.getData("Text");if(gz){if(gy.state.draggingText&&!(b6?gw.altKey:gw.ctrlKey)){var gt=gy.listSelections()}es(gy.doc,eW(gx,gx));if(gt){for(var gv=0;gv<gt.length;++gv){a0(gy.doc,"",gt[gv].anchor,gt[gv].head,"drag")}}gy.replaceSelection(gz,"around","paste");gy.display.input.focus()}}catch(gw){}}}function Q(gq,gs){if(dK&&(!gq.state.draggingText||+new Date-ag<100)){eu(gs);return}if(aQ(gq,gs)||ba(gq.display,gs)){return}gs.dataTransfer.setData("Text",gq.getSelection());gs.dataTransfer.effectAllowed="copyMove";if(gs.dataTransfer.setDragImage&&!aB){var gr=f9("img",null,null,"position: fixed; left: 0; top: 0;");gr.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";if(d4){gr.width=gr.height=1;gq.display.wrapper.appendChild(gr);gr._top=gr.offsetTop}gs.dataTransfer.setDragImage(gr,0,0);if(d4){gr.parentNode.removeChild(gr)}}}function gn(gq,gr){var gt=cm(gq,gr);if(!gt){return}var gs=document.createDocumentFragment();A(gq,gt,gs);if(!gq.display.dragCursor){gq.display.dragCursor=f9("div",null,"CodeMirror-cursors CodeMirror-dragcursors");gq.display.lineSpace.insertBefore(gq.display.dragCursor,gq.display.cursorDiv)}bQ(gq.display.dragCursor,gs)}function da(gq){if(gq.display.dragCursor){gq.display.lineSpace.removeChild(gq.display.dragCursor);gq.display.dragCursor=null}}function N(gq,gr){if(Math.abs(gq.doc.scrollTop-gr)<2){return}gq.doc.scrollTop=gr;if(!cn){dT(gq,{top:gr})}if(gq.display.scroller.scrollTop!=gr){gq.display.scroller.scrollTop=gr}gq.display.scrollbars.setScrollTop(gr);if(cn){dT(gq)}eh(gq,100)}function bD(gq,gs,gr){if(gr?gs==gq.doc.scrollLeft:Math.abs(gq.doc.scrollLeft-gs)<2){return}gs=Math.min(gs,gq.display.scroller.scrollWidth-gq.display.scroller.clientWidth);gq.doc.scrollLeft=gs;eH(gq);if(gq.display.scroller.scrollLeft!=gs){gq.display.scroller.scrollLeft=gs}gq.display.scrollbars.setScrollLeft(gs)}var fr=0,cf=null;if(dK){cf=-0.53}else{if(cn){cf=15}else{if(dc){cf=-0.7}else{if(aB){cf=-1/3}}}}var cP=function(gs){var gr=gs.wheelDeltaX,gq=gs.wheelDeltaY;if(gr==null&&gs.detail&&gs.axis==gs.HORIZONTAL_AXIS){gr=gs.detail}if(gq==null&&gs.detail&&gs.axis==gs.VERTICAL_AXIS){gq=gs.detail}else{if(gq==null){gq=gs.wheelDelta}}return{x:gr,y:gq}};H.wheelEventPixels=function(gq){var gr=cP(gq);gr.x*=cf;gr.y*=cf;return gr};function b(gA,gu){var gC=cP(gu),gE=gC.x,gD=gC.y;var gw=gA.display,gz=gw.scroller;var gt=gz.scrollWidth>gz.clientWidth;var gs=gz.scrollHeight>gz.clientHeight;if(!(gE&&gt||gD&&gs)){return}if(gD&&b6&&cZ){outer:for(var gB=gu.target,gy=gw.view;gB!=gz;gB=gB.parentNode){for(var gr=0;gr<gy.length;gr++){if(gy[gr].node==gB){gA.display.currentWheelTarget=gB;break outer}}}}if(gE&&!cn&&!d4&&cf!=null){if(gD&&gs){N(gA,Math.max(0,Math.min(gz.scrollTop+gD*cf,gz.scrollHeight-gz.clientHeight)))}bD(gA,Math.max(0,Math.min(gz.scrollLeft+gE*cf,gz.scrollWidth-gz.clientWidth)));if(!gD||(gD&&gs)){cF(gu)}gw.wheelStartX=null;return}if(gD&&cf!=null){var gq=gD*cf;var gx=gA.doc.scrollTop,gv=gx+gw.wrapper.clientHeight;if(gq<0){gx=Math.max(0,gx+gq-50)}else{gv=Math.min(gA.doc.height,gv+gq+50)}dT(gA,{top:gx,bottom:gv})}if(fr<20){if(gw.wheelStartX==null){gw.wheelStartX=gz.scrollLeft;gw.wheelStartY=gz.scrollTop;gw.wheelDX=gE;gw.wheelDY=gD;setTimeout(function(){if(gw.wheelStartX==null){return}var gF=gz.scrollLeft-gw.wheelStartX;var gH=gz.scrollTop-gw.wheelStartY;var gG=(gH&&gw.wheelDY&&gH/gw.wheelDY)||(gF&&gw.wheelDX&&gF/gw.wheelDX);gw.wheelStartX=gw.wheelStartY=null;if(!gG){return}cf=(cf*fr+gG)/(fr+1);++fr},200)}else{gw.wheelDX+=gE;gw.wheelDY+=gD}}}function fX(gr,gu,gq){if(typeof gu=="string"){gu=eG[gu];if(!gu){return false}}gr.display.input.ensurePolled();var gt=gr.display.shift,gs=false;try{if(gr.isReadOnly()){gr.state.suppressEdits=true}if(gq){gr.display.shift=false}gs=gu(gr)!=b9}finally{gr.display.shift=gt;gr.state.suppressEdits=false}return gs}function eb(gr,gs,gu){for(var gt=0;gt<gr.state.keyMaps.length;gt++){var gq=i(gs,gr.state.keyMaps[gt],gu,gr);if(gq){return gq}}return(gr.options.extraKeys&&i(gs,gr.options.extraKeys,gu,gr))||i(gs,gr.options.keyMap,gu,gr)}var dM=new gp;function bc(gr,gt,gv,gu){var gs=gr.state.keySeq;if(gs){if(eF(gt)){return"handled"}dM.set(50,function(){if(gr.state.keySeq==gs){gr.state.keySeq=null;gr.display.input.reset()}});gt=gs+" "+gt}var gq=eb(gr,gt,gu);if(gq=="multi"){gr.state.keySeq=gt}if(gq=="handled"){ae(gr,"keyHandled",gr,gt,gv)}if(gq=="handled"||gq=="multi"){cF(gv);o(gr)}if(gs&&!gq&&/\'$/.test(gt)){cF(gv);return true}return !!gq}function fo(gq,gs){var gr=fw(gs,true);if(!gr){return false}if(gs.shiftKey&&!gq.state.keySeq){return bc(gq,"Shift-"+gr,gs,function(gt){return fX(gq,gt,true)})||bc(gq,gr,gs,function(gt){if(typeof gt=="string"?/^go[A-Z]/.test(gt):gt.motion){return fX(gq,gt)}})}else{return bc(gq,gr,gs,function(gt){return fX(gq,gt)})}}function el(gq,gs,gr){return bc(gq,"'"+gr+"'",gs,function(gt){return fX(gq,gt,true)})}var dm=null;function p(gt){var gq=this;gq.curOp.focus=dO();if(aQ(gq,gt)){return}if(dK&&k<11&&gt.keyCode==27){gt.returnValue=false}var gr=gt.keyCode;gq.display.shift=gr==16||gt.shiftKey;var gs=fo(gq,gt);if(d4){dm=gs?gr:null;if(!gs&&gr==88&&!c9&&(b6?gt.metaKey:gt.ctrlKey)){gq.replaceSelection("",null,"cut")}}if(gr==18&&!/\bCodeMirror-crosshair\b/.test(gq.display.lineDiv.className)){au(gq)}}function au(gr){var gs=gr.display.lineDiv;fF(gs,"CodeMirror-crosshair");function gq(gt){if(gt.keyCode==18||!gt.altKey){f(gs,"CodeMirror-crosshair");ef(document,"keyup",gq);ef(document,"mouseover",gq)}}bW(document,"keyup",gq);bW(document,"mouseover",gq)}function bh(gq){if(gq.keyCode==16){this.doc.sel.shift=false}aQ(this,gq)}function cw(gu){var gq=this;if(ba(gq.display,gu)||aQ(gq,gu)||gu.ctrlKey&&!gu.altKey||b6&&gu.metaKey){return}var gt=gu.keyCode,gr=gu.charCode;if(d4&&gt==dm){dm=null;cF(gu);return}if((d4&&(!gu.which||gu.which<10))&&fo(gq,gu)){return}var gs=String.fromCharCode(gr==null?gt:gr);if(el(gq,gu,gs)){return}gq.display.input.onKeyPress(gu)}function ak(gq){gq.state.delayingBlurEvent=true;setTimeout(function(){if(gq.state.delayingBlurEvent){gq.state.delayingBlurEvent=false;aU(gq)}},100)}function cA(gq){if(gq.state.delayingBlurEvent){gq.state.delayingBlurEvent=false}if(gq.options.readOnly=="nocursor"){return}if(!gq.state.focused){aD(gq,"focus",gq);gq.state.focused=true;fF(gq.display.wrapper,"CodeMirror-focused");if(!gq.curOp&&gq.display.selForContextMenu!=gq.doc.sel){gq.display.input.reset();if(cZ){setTimeout(function(){gq.display.input.reset(true)},20)}}gq.display.input.receivedFocus()}o(gq)}function aU(gq){if(gq.state.delayingBlurEvent){return}if(gq.state.focused){aD(gq,"blur",gq);gq.state.focused=false;f(gq.display.wrapper,"CodeMirror-focused")}clearInterval(gq.display.blinker);setTimeout(function(){if(!gq.state.focused){gq.display.shift=false}},150)}function ax(gq,gr){if(ba(gq.display,gr)||dg(gq,gr)){return}if(aQ(gq,gr,"contextmenu")){return}gq.display.input.onContextMenu(gr)}function dg(gq,gr){if(!fn(gq,"gutterContextMenu")){return false}return go(gq,gr,"gutterContextMenu",false)}var cW=H.changeEnd=function(gq){if(!gq.text){return gq.to}return W(gq.from.line+gq.text.length-1,fL(gq.text).length+(gq.text.length==1?gq.from.ch:0))};function bY(gt,gs){if(ce(gt,gs.from)<0){return gt}if(ce(gt,gs.to)<=0){return cW(gs)}var gq=gt.line+gs.text.length-(gs.to.line-gs.from.line)-1,gr=gt.ch;if(gt.line==gs.to.line){gr+=cW(gs).ch-gs.to.ch}return W(gq,gr)}function fp(gt,gu){var gr=[];for(var gs=0;gs<gt.sel.ranges.length;gs++){var gq=gt.sel.ranges[gs];gr.push(new dY(bY(gq.anchor,gu),bY(gq.head,gu)))}return cv(gr,gt.sel.primIndex)}function bt(gs,gr,gq){if(gs.line==gr.line){return W(gq.line,gs.ch-gr.ch+gq.ch)}else{return W(gq.line+(gs.line-gr.line),gs.ch)}}function af(gA,gx,gr){var gs=[];var gq=W(gA.first,0),gB=gq;for(var gu=0;gu<gx.length;gu++){var gw=gx[gu];var gz=bt(gw.from,gq,gB);var gy=bt(cW(gw),gq,gB);gq=gw.to;gB=gy;if(gr=="around"){var gv=gA.sel.ranges[gu],gt=ce(gv.head,gv.anchor)<0;gs[gu]=new dY(gt?gy:gz,gt?gz:gy)}else{gs[gu]=new dY(gz,gz)}}return new ga(gs,gA.sel.primIndex)}function dR(gr,gt,gs){var gq={canceled:false,from:gt.from,to:gt.to,text:gt.text,origin:gt.origin,cancel:function(){this.canceled=true}};if(gs){gq.update=function(gx,gw,gv,gu){if(gx){this.from=fP(gr,gx)}if(gw){this.to=fP(gr,gw)}if(gv){this.text=gv}if(gu!==undefined){this.origin=gu}}}aD(gr,"beforeChange",gr,gq);if(gr.cm){aD(gr.cm,"beforeChange",gr.cm,gq)}if(gq.canceled){return null}return{from:gq.from,to:gq.to,text:gq.text,origin:gq.origin}}function bf(gt,gu,gs){if(gt.cm){if(!gt.cm.curOp){return c1(gt.cm,bf)(gt,gu,gs)}if(gt.cm.state.suppressEdits){return}}if(fn(gt,"beforeChange")||gt.cm&&fn(gt.cm,"beforeChange")){gu=dR(gt,gu,true);if(!gu){return}}var gr=gj&&!gs&&cG(gt,gu.from,gu.to);if(gr){for(var gq=gr.length-1;gq>=0;--gq){K(gt,{from:gr[gq].from,to:gr[gq].to,text:gq?[""]:gu.text})}}else{K(gt,gu)}}function K(gs,gt){if(gt.text.length==1&&gt.text[0]==""&&ce(gt.from,gt.to)==0){return}var gr=fp(gs,gt);fS(gs,gt,gr,gs.cm?gs.cm.curOp.id:NaN);eg(gs,gt,gr,em(gs,gt));var gq=[];d8(gs,function(gv,gu){if(!gu&&dh(gq,gv.history)==-1){dE(gv.history,gt);gq.push(gv.history)}eg(gv,gt,null,em(gv,gt))})}function b7(gB,gz,gD){if(gB.cm&&gB.cm.state.suppressEdits){return}var gy=gB.history,gs,gu=gB.sel;var gq=gz=="undo"?gy.done:gy.undone,gC=gz=="undo"?gy.undone:gy.done;for(var gv=0;gv<gq.length;gv++){gs=gq[gv];if(gD?gs.ranges&&!gs.equals(gB.sel):!gs.ranges){break}}if(gv==gq.length){return}gy.lastOrigin=gy.lastSelOrigin=null;for(;;){gs=gq.pop();if(gs.ranges){cM(gs,gC);if(gD&&!gs.equals(gB.sel)){bT(gB,gs,{clearRedo:false});return}gu=gs}else{break}}var gx=[];cM(gu,gC);gC.push({changes:gx,generation:gy.generation});gy.generation=gs.generation||++gy.maxGeneration;var gt=fn(gB,"beforeChange")||gB.cm&&fn(gB.cm,"beforeChange");for(var gv=gs.changes.length-1;gv>=0;--gv){var gA=gs.changes[gv];gA.origin=gz;if(gt&&!dR(gB,gA,false)){gq.length=0;return}gx.push(du(gB,gA));var gr=gv?fp(gB,gA):fL(gq);eg(gB,gA,gr,ea(gB,gA));if(!gv&&gB.cm){gB.cm.scrollIntoView({from:gA.from,to:cW(gA)})}var gw=[];d8(gB,function(gF,gE){if(!gE&&dh(gw,gF.history)==-1){dE(gF.history,gA);gw.push(gF.history)}eg(gF,gA,null,ea(gF,gA))})}}function fs(gr,gt){if(gt==0){return}gr.first+=gt;gr.sel=new ga(bR(gr.sel.ranges,function(gu){return new dY(W(gu.anchor.line+gt,gu.anchor.ch),W(gu.head.line+gt,gu.head.ch))}),gr.sel.primIndex);if(gr.cm){ah(gr.cm,gr.first,gr.first-gt,gt);for(var gs=gr.cm.display,gq=gs.viewFrom;gq<gs.viewTo;gq++){R(gr.cm,gq,"gutter")}}}function eg(gu,gv,gt,gr){if(gu.cm&&!gu.cm.curOp){return c1(gu.cm,eg)(gu,gv,gt,gr)}if(gv.to.line<gu.first){fs(gu,gv.text.length-1-(gv.to.line-gv.from.line));return}if(gv.from.line>gu.lastLine()){return}if(gv.from.line<gu.first){var gq=gv.text.length-1-(gu.first-gv.from.line);fs(gu,gq);gv={from:W(gu.first,0),to:W(gv.to.line+gq,gv.to.ch),text:[fL(gv.text)],origin:gv.origin}}var gs=gu.lastLine();if(gv.to.line>gs){gv={from:gv.from,to:W(gs,fk(gu,gs).text.length),text:[gv.text[0]],origin:gv.origin}}gv.removed=gb(gu,gv.from,gv.to);if(!gt){gt=fp(gu,gv)}if(gu.cm){aI(gu.cm,gv,gr)}else{fD(gu,gv,gr)}es(gu,gt,Z)}function aI(gB,gx,gv){var gA=gB.doc,gw=gB.display,gy=gx.from,gz=gx.to;var gq=false,gu=gy.line;if(!gB.options.lineWrapping){gu=bM(x(fk(gA,gy.line)));gA.iter(gu,gz.line+1,function(gD){if(gD==gw.maxLine){gq=true;return true}})}if(gA.sel.contains(gx.from,gx.to)>-1){V(gB)}fD(gA,gx,gv,bd(gB));if(!gB.options.lineWrapping){gA.iter(gu,gy.line+gx.text.length,function(gE){var gD=eq(gE);if(gD>gw.maxLineLength){gw.maxLine=gE;gw.maxLineLength=gD;gw.maxLineChanged=true;gq=false}});if(gq){gB.curOp.updateMaxLine=true}}gA.frontier=Math.min(gA.frontier,gy.line);eh(gB,400);var gC=gx.text.length-(gz.line-gy.line)-1;if(gx.full){ah(gB)}else{if(gy.line==gz.line&&gx.text.length==1&&!dS(gB.doc,gx)){R(gB,gy.line,"text")}else{ah(gB,gy.line,gz.line+1,gC)}}var gs=fn(gB,"changes"),gt=fn(gB,"change");if(gt||gs){var gr={from:gy,to:gz,text:gx.text,removed:gx.removed,origin:gx.origin};if(gt){ae(gB,"change",gB,gr)}if(gs){(gB.curOp.changeObjs||(gB.curOp.changeObjs=[])).push(gr)}}gB.display.selForContextMenu=null}function a0(gt,gs,gv,gu,gq){if(!gu){gu=gv}if(ce(gu,gv)<0){var gr=gu;gu=gv;gv=gr}if(typeof gs=="string"){gs=gt.splitLines(gs)}bf(gt,{from:gv,to:gu,text:gs,origin:gq})}function d7(gr,gu){if(aQ(gr,"scrollCursorIntoView")){return}var gv=gr.display,gs=gv.sizer.getBoundingClientRect(),gq=null;if(gu.top+gs.top<0){gq=true}else{if(gu.bottom+gs.top>(window.innerHeight||document.documentElement.clientHeight)){gq=false}}if(gq!=null&&!fz){var gt=f9("div","\u200b",null,"position: absolute; top: "+(gu.top-gv.viewOffset-fd(gr.display))+"px; height: "+(gu.bottom-gu.top+cS(gr)+gv.barHeight)+"px; left: "+gu.left+"px; width: 2px;");gr.display.lineSpace.appendChild(gt);gt.scrollIntoView(gq);gr.display.lineSpace.removeChild(gt)}}function D(gA,gy,gu,gt){if(gt==null){gt=0}for(var gv=0;gv<5;gv++){var gw=false,gz=dU(gA,gy);var gq=!gu||gu==gy?gz:dU(gA,gu);var gs=G(gA,Math.min(gz.left,gq.left),Math.min(gz.top,gq.top)-gt,Math.max(gz.left,gq.left),Math.max(gz.bottom,gq.bottom)+gt);var gx=gA.doc.scrollTop,gr=gA.doc.scrollLeft;if(gs.scrollTop!=null){N(gA,gs.scrollTop);if(Math.abs(gA.doc.scrollTop-gx)>1){gw=true}}if(gs.scrollLeft!=null){bD(gA,gs.scrollLeft);if(Math.abs(gA.doc.scrollLeft-gr)>1){gw=true}}if(!gw){break}}return gz}function E(gq,gs,gu,gr,gt){var gv=G(gq,gs,gu,gr,gt);if(gv.scrollTop!=null){N(gq,gv.scrollTop)}if(gv.scrollLeft!=null){bD(gq,gv.scrollLeft)}}function G(gC,gt,gB,gr,gA){var gy=gC.display,gw=aX(gC.display);if(gB<0){gB=0}var gu=gC.curOp&&gC.curOp.scrollTop!=null?gC.curOp.scrollTop:gy.scroller.scrollTop;var gE=cU(gC),gG={};if(gA-gB>gE){gA=gB+gE}var gs=gC.doc.height+bH(gy);var gq=gB<gw,gx=gA>gs-gw;if(gB<gu){gG.scrollTop=gq?0:gB}else{if(gA>gu+gE){var gz=Math.min(gB,(gx?gs:gA)-gE);if(gz!=gu){gG.scrollTop=gz}}}var gF=gC.curOp&&gC.curOp.scrollLeft!=null?gC.curOp.scrollLeft:gy.scroller.scrollLeft;var gD=dl(gC)-(gC.options.fixedGutter?gy.gutters.offsetWidth:0);var gv=gr-gt>gD;if(gv){gr=gt+gD}if(gt<10){gG.scrollLeft=0}else{if(gt<gF){gG.scrollLeft=Math.max(0,gt-(gv?0:10))}else{if(gr>gD+gF-3){gG.scrollLeft=gr+(gv?0:10)-gD}}}return gG}function cK(gq,gs,gr){if(gs!=null||gr!=null){fH(gq)}if(gs!=null){gq.curOp.scrollLeft=(gq.curOp.scrollLeft==null?gq.doc.scrollLeft:gq.curOp.scrollLeft)+gs}if(gr!=null){gq.curOp.scrollTop=(gq.curOp.scrollTop==null?gq.doc.scrollTop:gq.curOp.scrollTop)+gr}}function fK(gq){fH(gq);var gr=gq.getCursor(),gt=gr,gs=gr;if(!gq.options.lineWrapping){gt=gr.ch?W(gr.line,gr.ch-1):gr;gs=W(gr.line,gr.ch+1)}gq.curOp.scrollToPos={from:gt,to:gs,margin:gq.options.cursorScrollMargin,isCursor:true}}function fH(gq){var gs=gq.curOp.scrollToPos;if(gs){gq.curOp.scrollToPos=null;var gu=dH(gq,gs.from),gt=dH(gq,gs.to);var gr=G(gq,Math.min(gu.left,gt.left),Math.min(gu.top,gt.top)-gs.margin,Math.max(gu.right,gt.right),Math.max(gu.bottom,gt.bottom)+gs.margin);gq.scrollTo(gr.scrollLeft,gr.scrollTop)}}function ad(gD,gt,gC,gs){var gB=gD.doc,gr;if(gC==null){gC="add"}if(gC=="smart"){if(!gB.mode.indent){gC="prev"}else{gr=dC(gD,gt)}}var gx=gD.options.tabSize;var gE=fk(gB,gt),gw=bS(gE.text,null,gx);if(gE.stateAfter){gE.stateAfter=null}var gq=gE.text.match(/^\s*/)[0],gz;if(!gs&&!/\S/.test(gE.text)){gz=0;gC="not"}else{if(gC=="smart"){gz=gB.mode.indent(gr,gE.text.slice(gq.length),gE.text);if(gz==b9||gz>150){if(!gs){return}gC="prev"}}}if(gC=="prev"){if(gt>gB.first){gz=bS(fk(gB,gt-1).text,null,gx)}else{gz=0}}else{if(gC=="add"){gz=gw+gD.options.indentUnit}else{if(gC=="subtract"){gz=gw-gD.options.indentUnit}else{if(typeof gC=="number"){gz=gw+gC}}}}gz=Math.max(0,gz);var gA="",gy=0;if(gD.options.indentWithTabs){for(var gu=Math.floor(gz/gx);gu;--gu){gy+=gx;gA+="\t"}}if(gy<gz){gA+=co(gz-gy)}if(gA!=gq){a0(gB,gA,W(gt,0),W(gt,gq.length),"+input");gE.stateAfter=null;return true}else{for(var gu=0;gu<gB.sel.ranges.length;gu++){var gv=gB.sel.ranges[gu];if(gv.head.line==gt&&gv.head.ch<gq.length){var gy=W(gt,gq.length);e(gB,gu,new dY(gy,gy));break}}}}function eC(gt,gs,gq,gv){var gu=gs,gr=gs;if(typeof gs=="number"){gr=fk(gt,c4(gt,gs))}else{gu=bM(gs)}if(gu==null){return null}if(gv(gr,gu)&&gt.cm){R(gt.cm,gu,gq)}return gr}function e1(gq,gw){var gr=gq.doc.sel.ranges,gu=[];for(var gt=0;gt<gr.length;gt++){var gs=gw(gr[gt]);while(gu.length&&ce(gs.from,fL(gu).to)<=0){var gv=gu.pop();if(ce(gv.from,gs.from)<0){gs.from=gv.from;break}}gu.push(gs)}cL(gq,function(){for(var gx=gu.length-1;gx>=0;gx--){a0(gq.doc,"",gu[gx].from,gu[gx].to,"+delete")}fK(gq)})}function bv(gH,gu,gC,gB,gw){var gz=gu.line,gA=gu.ch,gG=gC;var gr=fk(gH,gz);function gF(){var gI=gz+gC;if(gI<gH.first||gI>=gH.first+gH.size){return false}gz=gI;return gr=fk(gH,gI)}function gE(gJ){var gI=(gw?u:ai)(gr,gA,gC,true);if(gI==null){if(!gJ&&gF()){if(gw){gA=(gC<0?cR:cD)(gr)}else{gA=gC<0?gr.text.length:0}}else{return false}}else{gA=gI}return true}if(gB=="char"){gE()}else{if(gB=="column"){gE(true)}else{if(gB=="word"||gB=="group"){var gD=null,gx=gB=="group";var gq=gH.cm&&gH.cm.getHelper(gu,"wordChars");for(var gv=true;;gv=false){if(gC<0&&!gE(!gv)){break}var gs=gr.text.charAt(gA)||"\n";var gt=cz(gs,gq)?"w":gx&&gs=="\n"?"n":!gx||/\s/.test(gs)?null:"p";if(gx&&!gv&&!gt){gt="s"}if(gD&&gD!=gt){if(gC<0){gC=1;gE()}break}if(gt){gD=gt}if(gC>0&&!gE(!gv)){break}}}}}var gy=bU(gH,W(gz,gA),gu,gG,true);if(!ce(gu,gy)){gy.hitSide=true}return gy}function bp(gy,gt,gq,gx){var gw=gy.doc,gv=gt.left,gu;if(gx=="page"){var gs=Math.min(gy.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);gu=gt.top+gq*(gs-(gq<0?1.5:0.5)*aX(gy.display))}else{if(gx=="line"){gu=gq>0?gt.bottom+3:gt.top-3}}for(;;){var gr=fU(gy,gv,gu);if(!gr.outside){break}if(gq<0?gu<=0:gu>=gw.height){gr.hitSide=true;break}gu+=gq*5}return gr}H.prototype={constructor:H,focus:function(){window.focus();this.display.input.focus()},setOption:function(gs,gt){var gr=this.options,gq=gr[gs];if(gr[gs]==gt&&gs!="mode"){return}gr[gs]=gt;if(be.hasOwnProperty(gs)){c1(this,be[gs])(this,gt,gq)}},getOption:function(gq){return this.options[gq]},getDoc:function(){return this.doc},addKeyMap:function(gr,gq){this.state.keyMaps[gq?"push":"unshift"](f4(gr))},removeKeyMap:function(gr){var gs=this.state.keyMaps;for(var gq=0;gq<gs.length;++gq){if(gs[gq]==gr||gs[gq].name==gr){gs.splice(gq,1);return true}}},addOverlay:c7(function(gq,gr){var gs=gq.token?gq:H.getMode(this.options,gq);if(gs.startState){throw new Error("Overlays may not be stateful.")}this.state.overlays.push({mode:gs,modeSpec:gq,opaque:gr&&gr.opaque});this.state.modeGen++;ah(this)}),removeOverlay:c7(function(gq){var gs=this.state.overlays;for(var gr=0;gr<gs.length;++gr){var gt=gs[gr].modeSpec;if(gt==gq||typeof gq=="string"&&gt.name==gq){gs.splice(gr,1);this.state.modeGen++;ah(this);return}}}),indentLine:c7(function(gs,gq,gr){if(typeof gq!="string"&&typeof gq!="number"){if(gq==null){gq=this.options.smartIndent?"smart":"prev"}else{gq=gq?"add":"subtract"}}if(b8(this.doc,gs)){ad(this,gs,gq,gr)}}),indentSelection:c7(function(gz){var gq=this.doc.sel.ranges,gt=-1;for(var gv=0;gv<gq.length;gv++){var gw=gq[gv];if(!gw.empty()){var gx=gw.from(),gy=gw.to();var gr=Math.max(gt,gx.line);gt=Math.min(this.lastLine(),gy.line-(gy.ch?0:1))+1;for(var gu=gr;gu<gt;++gu){ad(this,gu,gz)}var gs=this.doc.sel.ranges;if(gx.ch==0&&gq.length==gs.length&&gs[gv].from().ch>0){e(this.doc,gv,new dY(gx,gs[gv].to()),Z)}}else{if(gw.head.line>gt){ad(this,gw.head.line,gz,true);gt=gw.head.line;if(gv==this.doc.sel.primIndex){fK(this)}}}}}),getTokenAt:function(gr,gq){return cp(this,gr,gq)},getLineTokens:function(gr,gq){return cp(this,W(gr),gq,true)},getTokenTypeAt:function(gx){gx=fP(this.doc,gx);var gt=c5(this,fk(this.doc,gx.line));var gv=0,gw=(gt.length-1)/2,gs=gx.ch;var gr;if(gs==0){gr=gt[2]}else{for(;;){var gq=(gv+gw)>>1;if((gq?gt[gq*2-1]:0)>=gs){gw=gq}else{if(gt[gq*2+1]<gs){gv=gq+1}else{gr=gt[gq*2+2];break}}}}var gu=gr?gr.indexOf("cm-overlay "):-1;return gu<0?gr:gu==0?null:gr.slice(0,gu-1)},getModeAt:function(gr){var gq=this.doc.mode;if(!gq.innerMode){return gq}return H.innerMode(gq,this.getTokenAt(gr).state).mode},getHelper:function(gr,gq){return this.getHelpers(gr,gq)[0]},getHelpers:function(gx,gs){var gt=[];if(!ft.hasOwnProperty(gs)){return gt}var gq=ft[gs],gw=this.getModeAt(gx);if(typeof gw[gs]=="string"){if(gq[gw[gs]]){gt.push(gq[gw[gs]])}}else{if(gw[gs]){for(var gr=0;gr<gw[gs].length;gr++){var gv=gq[gw[gs][gr]];if(gv){gt.push(gv)}}}else{if(gw.helperType&&gq[gw.helperType]){gt.push(gq[gw.helperType])}else{if(gq[gw.name]){gt.push(gq[gw.name])}}}}for(var gr=0;gr<gq._global.length;gr++){var gu=gq._global[gr];if(gu.pred(gw,this)&&dh(gt,gu.val)==-1){gt.push(gu.val)}}return gt},getStateAfter:function(gr,gq){var gs=this.doc;gr=c4(gs,gr==null?gs.first+gs.size-1:gr);return dC(this,gr+1,gq)},cursorCoords:function(gt,gr){var gs,gq=this.doc.sel.primary();if(gt==null){gs=gq.head}else{if(typeof gt=="object"){gs=fP(this.doc,gt)}else{gs=gt?gq.from():gq.to()}}return dU(this,gs,gr||"page")},charCoords:function(gr,gq){return cI(this,fP(this.doc,gr),gq||"page")},coordsChar:function(gq,gr){gq=gl(this,gq,gr||"page");return fU(this,gq.left,gq.top)},lineAtHeight:function(gq,gr){gq=gl(this,{top:gq,left:0},gr||"page").top;return bF(this.doc,gq+this.display.viewOffset)},heightAtLine:function(gr,gu){var gq=false,gs;if(typeof gr=="number"){var gt=this.doc.first+this.doc.size-1;if(gr<this.doc.first){gr=this.doc.first}else{if(gr>gt){gr=gt;gq=true}}gs=fk(this.doc,gr)}else{gs=gr}return eU(this,gs,{top:0,left:0},gu||"page").top+(gq?this.doc.height-bL(gs):0)},defaultTextHeight:function(){return aX(this.display)},defaultCharWidth:function(){return dD(this.display)},setGutterMarker:c7(function(gq,gr,gs){return eC(this.doc,gq,"gutter",function(gt){var gu=gt.gutterMarkers||(gt.gutterMarkers={});gu[gr]=gs;if(!gs&&eY(gu)){gt.gutterMarkers=null}return true})}),clearGutter:c7(function(gs){var gq=this,gt=gq.doc,gr=gt.first;gt.iter(function(gu){if(gu.gutterMarkers&&gu.gutterMarkers[gs]){gu.gutterMarkers[gs]=null;R(gq,gr,"gutter");if(eY(gu.gutterMarkers)){gu.gutterMarkers=null}}++gr})}),lineInfo:function(gq){if(typeof gq=="number"){if(!b8(this.doc,gq)){return null}var gr=gq;gq=fk(this.doc,gq);if(!gq){return null}}else{var gr=bM(gq);if(gr==null){return null}}return{line:gr,handle:gq,text:gq.text,gutterMarkers:gq.gutterMarkers,textClass:gq.textClass,bgClass:gq.bgClass,wrapClass:gq.wrapClass,widgets:gq.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(gv,gs,gx,gt,gz){var gu=this.display;gv=dU(this,fP(this.doc,gv));var gw=gv.bottom,gr=gv.left;gs.style.position="absolute";gs.setAttribute("cm-ignore-events","true");this.display.input.setUneditable(gs);gu.sizer.appendChild(gs);if(gt=="over"){gw=gv.top}else{if(gt=="above"||gt=="near"){var gq=Math.max(gu.wrapper.clientHeight,this.doc.height),gy=Math.max(gu.sizer.clientWidth,gu.lineSpace.clientWidth);if((gt=="above"||gv.bottom+gs.offsetHeight>gq)&&gv.top>gs.offsetHeight){gw=gv.top-gs.offsetHeight}else{if(gv.bottom+gs.offsetHeight<=gq){gw=gv.bottom}}if(gr+gs.offsetWidth>gy){gr=gy-gs.offsetWidth}}}gs.style.top=gw+"px";gs.style.left=gs.style.right="";if(gz=="right"){gr=gu.sizer.clientWidth-gs.offsetWidth;gs.style.right="0px"}else{if(gz=="left"){gr=0}else{if(gz=="middle"){gr=(gu.sizer.clientWidth-gs.offsetWidth)/2}}gs.style.left=gr+"px"}if(gx){E(this,gr,gw,gr+gs.offsetWidth,gw+gs.offsetHeight)}},triggerOnKeyDown:c7(p),triggerOnKeyPress:c7(cw),triggerOnKeyUp:bh,execCommand:function(gq){if(eG.hasOwnProperty(gq)){return eG[gq].call(null,this)}},triggerElectric:c7(function(gq){f2(this,gq)}),findPosH:function(gw,gt,gu,gr){var gq=1;if(gt<0){gq=-1;gt=-gt}for(var gs=0,gv=fP(this.doc,gw);gs<gt;++gs){gv=bv(this.doc,gv,gq,gu,gr);if(gv.hitSide){break}}return gv},moveH:c7(function(gr,gs){var gq=this;gq.extendSelectionsBy(function(gt){if(gq.display.shift||gq.doc.extend||gt.empty()){return bv(gq.doc,gt.head,gr,gs,gq.options.rtlMoveVisually)}else{return gr<0?gt.from():gt.to()}},cV)}),deleteH:c7(function(gq,gr){var gs=this.doc.sel,gt=this.doc;if(gs.somethingSelected()){gt.replaceSelection("",null,"+delete")}else{e1(this,function(gv){var gu=bv(gt,gv.head,gq,gr,false);return gq<0?{from:gu,to:gv.head}:{from:gv.head,to:gu}})}}),findPosV:function(gv,gs,gw,gy){var gq=1,gu=gy;if(gs<0){gq=-1;gs=-gs}for(var gr=0,gx=fP(this.doc,gv);gr<gs;++gr){var gt=dU(this,gx,"div");if(gu==null){gu=gt.left}else{gt.left=gu}gx=bp(this,gt,gq,gw);if(gx.hitSide){break}}return gx},moveV:c7(function(gr,gt){var gq=this,gv=this.doc,gu=[];var gw=!gq.display.shift&&!gv.extend&&gv.sel.somethingSelected();gv.extendSelectionsBy(function(gx){if(gw){return gr<0?gx.from():gx.to()}var gz=dU(gq,gx.head,"div");if(gx.goalColumn!=null){gz.left=gx.goalColumn}gu.push(gz.left);var gy=bp(gq,gz,gr,gt);if(gt=="page"&&gx==gv.sel.primary()){cK(gq,null,cI(gq,gy,"div").top-gz.top)}return gy},cV);if(gu.length){for(var gs=0;gs<gv.sel.ranges.length;gs++){gv.sel.ranges[gs].goalColumn=gu[gs]}}}),findWordAt:function(gx){var gv=this.doc,gt=fk(gv,gx.line).text;var gw=gx.ch,gs=gx.ch;if(gt){var gu=this.getHelper(gx,"wordChars");if((gx.xRel<0||gs==gt.length)&&gw){--gw}else{++gs}var gr=gt.charAt(gw);var gq=cz(gr,gu)?function(gy){return cz(gy,gu)}:/\s/.test(gr)?function(gy){return/\s/.test(gy)}:function(gy){return !/\s/.test(gy)&&!cz(gy)};while(gw>0&&gq(gt.charAt(gw-1))){--gw}while(gs<gt.length&&gq(gt.charAt(gs))){++gs}}return new dY(W(gx.line,gw),W(gx.line,gs))},toggleOverwrite:function(gq){if(gq!=null&&gq==this.state.overwrite){return}if(this.state.overwrite=!this.state.overwrite){fF(this.display.cursorDiv,"CodeMirror-overwrite")}else{f(this.display.cursorDiv,"CodeMirror-overwrite")}aD(this,"overwriteToggle",this,this.state.overwrite)},hasFocus:function(){return this.display.input.getField()==dO()},isReadOnly:function(){return !!(this.options.readOnly||this.doc.cantEdit)},scrollTo:c7(function(gq,gr){if(gq!=null||gr!=null){fH(this)}if(gq!=null){this.curOp.scrollLeft=gq}if(gr!=null){this.curOp.scrollTop=gr}}),getScrollInfo:function(){var gq=this.display.scroller;return{left:gq.scrollLeft,top:gq.scrollTop,height:gq.scrollHeight-cS(this)-this.display.barHeight,width:gq.scrollWidth-cS(this)-this.display.barWidth,clientHeight:cU(this),clientWidth:dl(this)}},scrollIntoView:c7(function(gr,gs){if(gr==null){gr={from:this.doc.sel.primary().head,to:null};if(gs==null){gs=this.options.cursorScrollMargin}}else{if(typeof gr=="number"){gr={from:W(gr,0),to:null}}else{if(gr.from==null){gr={from:gr,to:null}}}}if(!gr.to){gr.to=gr.from}gr.margin=gs||0;if(gr.from.line!=null){fH(this);this.curOp.scrollToPos=gr}else{var gq=G(this,Math.min(gr.from.left,gr.to.left),Math.min(gr.from.top,gr.to.top)-gr.margin,Math.max(gr.from.right,gr.to.right),Math.max(gr.from.bottom,gr.to.bottom)+gr.margin);this.scrollTo(gq.scrollLeft,gq.scrollTop)}}),setSize:c7(function(gt,gr){var gq=this;function gs(gv){return typeof gv=="number"||/^\d+$/.test(String(gv))?gv+"px":gv}if(gt!=null){gq.display.wrapper.style.width=gs(gt)}if(gr!=null){gq.display.wrapper.style.height=gs(gr)}if(gq.options.lineWrapping){aN(this)}var gu=gq.display.viewFrom;gq.doc.iter(gu,gq.display.viewTo,function(gv){if(gv.widgets){for(var gw=0;gw<gv.widgets.length;gw++){if(gv.widgets[gw].noHScroll){R(gq,gu,"widget");break}}}++gu});gq.curOp.forceUpdate=true;aD(gq,"refresh",this)}),operation:function(gq){return cL(this,gq)},refresh:c7(function(){var gq=this.display.cachedTextHeight;ah(this);this.curOp.forceUpdate=true;aj(this);this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop);c3(this);if(gq==null||Math.abs(gq-aX(this.display))>0.5){X(this)}aD(this,"refresh",this)}),swapDoc:c7(function(gr){var gq=this.doc;gq.cm=null;ed(this,gr);aj(this);this.display.input.reset();this.scrollTo(gr.scrollLeft,gr.scrollTop);this.curOp.forceScroll=true;ae(this,"swapDoc",this,gq);return gq}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};bx(H);var e7=H.defaults={};var be=H.optionHandlers={};function s(gq,gt,gs,gr){H.defaults[gq]=gt;if(gs){be[gq]=gr?function(gu,gw,gv){if(gv!=cb){gs(gu,gw,gv)}}:gs}}var cb=H.Init={toString:function(){return"CodeMirror.Init"}};s("value","",function(gq,gr){gq.setValue(gr)},true);s("mode",null,function(gq,gr){gq.doc.modeOption=gr;bq(gq)},true);s("indentUnit",2,bq,true);s("indentWithTabs",false);s("smartIndent",true);s("tabSize",4,function(gq){eo(gq);aj(gq);ah(gq)},true);s("lineSeparator",null,function(gq,gt){gq.doc.lineSep=gt;if(!gt){return}var gs=[],gu=gq.doc.first;gq.doc.iter(function(gv){for(var gx=0;;){var gw=gv.text.indexOf(gt,gx);if(gw==-1){break}gx=gw+gt.length;gs.push(W(gu,gw))}gu++});for(var gr=gs.length-1;gr>=0;gr--){a0(gq.doc,gt,gs[gr],W(gs[gr].line,gs[gr].ch+gt.length))}});s("specialChars",/[\u0000-\u001f\u007f\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(gq,gs,gr){gq.state.specialChars=new RegExp(gs.source+(gs.test("\t")?"":"|\t"),"g");if(gr!=H.Init){gq.refresh()}});s("specialCharPlaceholder",fh,function(gq){gq.refresh()},true);s("electricChars",true);s("inputStyle",ei?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},true);s("rtlMoveVisually",!aO);s("wholeLineUpdateBefore",true);s("theme","default",function(gq){cN(gq);dw(gq)},true);s("keyMap","default",function(gq,gu,gr){var gs=f4(gu);var gt=gr!=H.Init&&f4(gr);if(gt&&gt.detach){gt.detach(gq,gs)}if(gs.attach){gs.attach(gq,gt||null)}});s("extraKeys",null);s("lineWrapping",false,eJ,true);s("gutters",[],function(gq){cd(gq.options);dw(gq)},true);s("fixedGutter",true,function(gq,gr){gq.display.gutters.style.left=gr?dX(gq.display)+"px":"0";gq.refresh()},true);s("coverGutterNextToScrollbar",false,function(gq){e2(gq)},true);s("scrollbarStyle","native",function(gq){aC(gq);e2(gq);gq.display.scrollbars.setScrollTop(gq.doc.scrollTop);gq.display.scrollbars.setScrollLeft(gq.doc.scrollLeft)},true);s("lineNumbers",false,function(gq){cd(gq.options);dw(gq)},true);s("firstLineNumber",1,dw,true);s("lineNumberFormatter",function(gq){return gq},dw,true);s("showCursorWhenSelecting",false,bB,true);s("resetSelectionOnContextMenu",true);s("lineWiseCopyCut",true);s("readOnly",false,function(gq,gr){if(gr=="nocursor"){aU(gq);gq.display.input.blur();gq.display.disabled=true}else{gq.display.disabled=false}gq.display.input.readOnlyChanged(gr)});s("disableInput",false,function(gq,gr){if(!gr){gq.display.input.reset()}},true);s("dragDrop",true,f7);s("allowDropFileTypes",null);s("cursorBlinkRate",530);s("cursorScrollMargin",0);s("cursorHeight",1,bB,true);s("singleCursorHeightPerLine",true,bB,true);s("workTime",100);s("workDelay",100);s("flattenSpans",true,eo,true);s("addModeClass",false,eo,true);s("pollInterval",100);s("undoDepth",200,function(gq,gr){gq.doc.history.undoDepth=gr});s("historyEventDelay",1250);s("viewportMargin",10,function(gq){gq.refresh()},true);s("maxHighlightLength",10000,eo,true);s("moveInputWithCursor",true,function(gq,gr){if(!gr){gq.display.input.resetPosition()}});s("tabindex",null,function(gq,gr){gq.display.input.getField().tabIndex=gr||""});s("autofocus",null);var ds=H.modes={},aR=H.mimeModes={};H.defineMode=function(gq,gr){if(!H.defaults.mode&&gq!="null"){H.defaults.mode=gq}if(arguments.length>2){gr.dependencies=Array.prototype.slice.call(arguments,2)}ds[gq]=gr};H.defineMIME=function(gr,gq){aR[gr]=gq};H.resolveMode=function(gq){if(typeof gq=="string"&&aR.hasOwnProperty(gq)){gq=aR[gq]}else{if(gq&&typeof gq.name=="string"&&aR.hasOwnProperty(gq.name)){var gr=aR[gq.name];if(typeof gr=="string"){gr={name:gr}}gq=cj(gr,gq);gq.name=gr.name}else{if(typeof gq=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(gq)){return H.resolveMode("application/xml")}}}if(typeof gq=="string"){return{name:gq}}else{return gq||{name:"null"}}};H.getMode=function(gr,gq){var gq=H.resolveMode(gq);var gt=ds[gq.name];if(!gt){return H.getMode(gr,"text/plain")}var gu=gt(gr,gq);if(dp.hasOwnProperty(gq.name)){var gs=dp[gq.name];for(var gv in gs){if(!gs.hasOwnProperty(gv)){continue}if(gu.hasOwnProperty(gv)){gu["_"+gv]=gu[gv]}gu[gv]=gs[gv]}}gu.name=gq.name;if(gq.helperType){gu.helperType=gq.helperType}if(gq.modeProps){for(var gv in gq.modeProps){gu[gv]=gq.modeProps[gv]}}return gu};H.defineMode("null",function(){return{token:function(gq){gq.skipToEnd()}}});H.defineMIME("text/plain","null");var dp=H.modeExtensions={};H.extendMode=function(gs,gr){var gq=dp.hasOwnProperty(gs)?dp[gs]:(dp[gs]={});aM(gr,gq)};H.defineExtension=function(gq,gr){H.prototype[gq]=gr};H.defineDocExtension=function(gq,gr){ar.prototype[gq]=gr};H.defineOption=s;var a7=[];H.defineInitHook=function(gq){a7.push(gq)};var ft=H.helpers={};H.registerHelper=function(gr,gq,gs){if(!ft.hasOwnProperty(gr)){ft[gr]=H[gr]={_global:[]}}ft[gr][gq]=gs};H.registerGlobalHelper=function(gs,gr,gq,gt){H.registerHelper(gs,gr,gt);ft[gs]._global.push({pred:gq,val:gt})};var b2=H.copyState=function(gt,gq){if(gq===true){return gq}if(gt.copyState){return gt.copyState(gq)}var gs={};for(var gu in gq){var gr=gq[gu];if(gr instanceof Array){gr=gr.concat([])}gs[gu]=gr}return gs};var bZ=H.startState=function(gs,gr,gq){return gs.startState?gs.startState(gr,gq):true};H.innerMode=function(gs,gq){while(gs.innerMode){var gr=gs.innerMode(gq);if(!gr||gr.mode==gs){break}gq=gr.state;gs=gr.mode}return gr||{mode:gs,state:gq}};var eG=H.commands={selectAll:function(gq){gq.setSelection(W(gq.firstLine(),0),W(gq.lastLine()),Z)},singleSelection:function(gq){gq.setSelection(gq.getCursor("anchor"),gq.getCursor("head"),Z)},killLine:function(gq){e1(gq,function(gs){if(gs.empty()){var gr=fk(gq.doc,gs.head.line).text.length;if(gs.head.ch==gr&&gs.head.line<gq.lastLine()){return{from:gs.head,to:W(gs.head.line+1,0)}}else{return{from:gs.head,to:W(gs.head.line,gr)}}}else{return{from:gs.from(),to:gs.to()}}})},deleteLine:function(gq){e1(gq,function(gr){return{from:W(gr.from().line,0),to:fP(gq.doc,W(gr.to().line+1,0))}})},delLineLeft:function(gq){e1(gq,function(gr){return{from:W(gr.from().line,0),to:gr.from()}})},delWrappedLineLeft:function(gq){e1(gq,function(gr){var gt=gq.charCoords(gr.head,"div").top+5;var gs=gq.coordsChar({left:0,top:gt},"div");return{from:gs,to:gr.from()}})},delWrappedLineRight:function(gq){e1(gq,function(gr){var gt=gq.charCoords(gr.head,"div").top+5;var gs=gq.coordsChar({left:gq.display.lineDiv.offsetWidth+100,top:gt},"div");return{from:gr.from(),to:gs}})},undo:function(gq){gq.undo()},redo:function(gq){gq.redo()},undoSelection:function(gq){gq.undoSelection()},redoSelection:function(gq){gq.redoSelection()},goDocStart:function(gq){gq.extendSelection(W(gq.firstLine(),0))},goDocEnd:function(gq){gq.extendSelection(W(gq.lastLine()))},goLineStart:function(gq){gq.extendSelectionsBy(function(gr){return bs(gq,gr.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(gq){gq.extendSelectionsBy(function(gr){return dI(gq,gr.head)},{origin:"+move",bias:1})},goLineEnd:function(gq){gq.extendSelectionsBy(function(gr){return dP(gq,gr.head.line)},{origin:"+move",bias:-1})},goLineRight:function(gq){gq.extendSelectionsBy(function(gr){var gs=gq.charCoords(gr.head,"div").top+5;return gq.coordsChar({left:gq.display.lineDiv.offsetWidth+100,top:gs},"div")},cV)},goLineLeft:function(gq){gq.extendSelectionsBy(function(gr){var gs=gq.charCoords(gr.head,"div").top+5;return gq.coordsChar({left:0,top:gs},"div")},cV)},goLineLeftSmart:function(gq){gq.extendSelectionsBy(function(gr){var gs=gq.charCoords(gr.head,"div").top+5;var gt=gq.coordsChar({left:0,top:gs},"div");if(gt.ch<gq.getLine(gt.line).search(/\S/)){return dI(gq,gr.head)}return gt},cV)},goLineUp:function(gq){gq.moveV(-1,"line")},goLineDown:function(gq){gq.moveV(1,"line")},goPageUp:function(gq){gq.moveV(-1,"page")},goPageDown:function(gq){gq.moveV(1,"page")},goCharLeft:function(gq){gq.moveH(-1,"char")},goCharRight:function(gq){gq.moveH(1,"char")},goColumnLeft:function(gq){gq.moveH(-1,"column")},goColumnRight:function(gq){gq.moveH(1,"column")},goWordLeft:function(gq){gq.moveH(-1,"word")},goGroupRight:function(gq){gq.moveH(1,"group")},goGroupLeft:function(gq){gq.moveH(-1,"group")},goWordRight:function(gq){gq.moveH(1,"word")},delCharBefore:function(gq){gq.deleteH(-1,"char")},delCharAfter:function(gq){gq.deleteH(1,"char")},delWordBefore:function(gq){gq.deleteH(-1,"word")},delWordAfter:function(gq){gq.deleteH(1,"word")},delGroupBefore:function(gq){gq.deleteH(-1,"group")},delGroupAfter:function(gq){gq.deleteH(1,"group")},indentAuto:function(gq){gq.indentSelection("smart")},indentMore:function(gq){gq.indentSelection("add")},indentLess:function(gq){gq.indentSelection("subtract")},insertTab:function(gq){gq.replaceSelection("\t")},insertSoftTab:function(gq){var gs=[],gr=gq.listSelections(),gv=gq.options.tabSize;for(var gu=0;gu<gr.length;gu++){var gw=gr[gu].from();var gt=bS(gq.getLine(gw.line),gw.ch,gv);gs.push(co(gv-gt%gv))}gq.replaceSelections(gs)},defaultTab:function(gq){if(gq.somethingSelected()){gq.indentSelection("add")}else{gq.execCommand("insertTab")}},transposeChars:function(gq){cL(gq,function(){var gt=gq.listSelections(),gs=[];for(var gu=0;gu<gt.length;gu++){var gw=gt[gu].head,gr=fk(gq.doc,gw.line).text;if(gr){if(gw.ch==gr.length){gw=new W(gw.line,gw.ch-1)}if(gw.ch>0){gw=new W(gw.line,gw.ch+1);gq.replaceRange(gr.charAt(gw.ch-1)+gr.charAt(gw.ch-2),W(gw.line,gw.ch-2),gw,"+transpose")}else{if(gw.line>gq.doc.first){var gv=fk(gq.doc,gw.line-1).text;if(gv){gq.replaceRange(gr.charAt(0)+gq.doc.lineSeparator()+gv.charAt(gv.length-1),W(gw.line-1,gv.length-1),W(gw.line,1),"+transpose")}}}}gs.push(new dY(gw,gw))}gq.setSelections(gs)})},newlineAndIndent:function(gq){cL(gq,function(){var gr=gq.listSelections().length;for(var gt=0;gt<gr;gt++){var gs=gq.listSelections()[gt];gq.replaceRange(gq.doc.lineSeparator(),gs.anchor,gs.head,"+input");gq.indentLine(gs.from().line+1,null,true)}fK(gq)})},openLine:function(gq){gq.replaceSelection("\n","start")},toggleOverwrite:function(gq){gq.toggleOverwrite()}};var ff=H.keyMap={};ff.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"};ff.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"};ff.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"};ff.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]};ff["default"]=b6?ff.macDefault:ff.pcDefault;function dt(gr){var gx=gr.split(/-(?!$)/),gr=gx[gx.length-1];var gw,gv,gq,gu;for(var gt=0;gt<gx.length-1;gt++){var gs=gx[gt];if(/^(cmd|meta|m)$/i.test(gs)){gu=true}else{if(/^a(lt)?$/i.test(gs)){gw=true}else{if(/^(c|ctrl|control)$/i.test(gs)){gv=true}else{if(/^s(hift)$/i.test(gs)){gq=true}else{throw new Error("Unrecognized modifier name: "+gs)}}}}}if(gw){gr="Alt-"+gr}if(gv){gr="Ctrl-"+gr}if(gu){gr="Cmd-"+gr}if(gq){gr="Shift-"+gr}return gr}H.normalizeKeyMap=function(gx){var gr={};for(var gw in gx){if(gx.hasOwnProperty(gw)){var gy=gx[gw];if(/^(name|fallthrough|(de|at)tach)$/.test(gw)){continue}if(gy=="..."){delete gx[gw];continue}var gz=bR(gw.split(" "),dt);for(var gv=0;gv<gz.length;gv++){var gt,gs;if(gv==gz.length-1){gs=gz.join(" ");gt=gy}else{gs=gz.slice(0,gv+1).join(" ");gt="..."}var gu=gr[gs];if(!gu){gr[gs]=gt}else{if(gu!=gt){throw new Error("Inconsistent bindings for "+gs)}}}delete gx[gw]}}for(var gq in gr){gx[gq]=gr[gq]}return gx};var i=H.lookupKey=function(gt,gw,gv,gs){gw=f4(gw);var gu=gw.call?gw.call(gt,gs):gw[gt];if(gu===false){return"nothing"}if(gu==="..."){return"multi"}if(gu!=null&&gv(gu)){return"handled"}if(gw.fallthrough){if(Object.prototype.toString.call(gw.fallthrough)!="[object Array]"){return i(gt,gw.fallthrough,gv,gs)}for(var gr=0;gr<gw.fallthrough.length;gr++){var gq=i(gt,gw.fallthrough[gr],gv,gs);if(gq){return gq}}}};var eF=H.isModifierKey=function(gr){var gq=typeof gr=="string"?gr:fl[gr.keyCode];return gq=="Ctrl"||gq=="Alt"||gq=="Shift"||gq=="Mod"};var fw=H.keyName=function(gr,gt){if(d4&&gr.keyCode==34&&gr["char"]){return false}var gs=fl[gr.keyCode],gq=gs;if(gq==null||gr.altGraphKey){return false}if(gr.altKey&&gs!="Alt"){gq="Alt-"+gq}if((bP?gr.metaKey:gr.ctrlKey)&&gs!="Ctrl"){gq="Ctrl-"+gq}if((bP?gr.ctrlKey:gr.metaKey)&&gs!="Cmd"){gq="Cmd-"+gq}if(!gt&&gr.shiftKey&&gs!="Shift"){gq="Shift-"+gq}return gq};function f4(gq){return typeof gq=="string"?ff[gq]:gq}H.fromTextArea=function(gx,gy){gy=gy?aM(gy):{};gy.value=gx.value;if(!gy.tabindex&&gx.tabIndex){gy.tabindex=gx.tabIndex}if(!gy.placeholder&&gx.placeholder){gy.placeholder=gx.placeholder}if(gy.autofocus==null){var gq=dO();gy.autofocus=gq==gx||gx.getAttribute("autofocus")!=null&&gq==document.body}function gu(){gx.value=gw.getValue()}if(gx.form){bW(gx.form,"submit",gu);if(!gy.leaveSubmitMethodAlone){var gr=gx.form,gv=gr.submit;try{var gt=gr.submit=function(){gu();gr.submit=gv;gr.submit();gr.submit=gt}}catch(gs){}}}gy.finishInit=function(gz){gz.save=gu;gz.getTextArea=function(){return gx};gz.toTextArea=function(){gz.toTextArea=isNaN;gu();gx.parentNode.removeChild(gz.getWrapperElement());gx.style.display="";if(gx.form){ef(gx.form,"submit",gu);if(typeof gx.form.submit=="function"){gx.form.submit=gv}}}};gx.style.display="none";var gw=H(function(gz){gx.parentNode.insertBefore(gz,gx.nextSibling)},gy);return gw};var eX=H.StringStream=function(gq,gr){this.pos=this.start=0;this.string=gq;this.tabSize=gr||8;this.lastColumnPos=this.lastColumnValue=0;this.lineStart=0};eX.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||undefined},next:function(){if(this.pos<this.string.length){return this.string.charAt(this.pos++)}},eat:function(gq){var gs=this.string.charAt(this.pos);if(typeof gq=="string"){var gr=gs==gq}else{var gr=gs&&(gq.test?gq.test(gs):gq(gs))}if(gr){++this.pos;return gs}},eatWhile:function(gq){var gr=this.pos;while(this.eat(gq)){}return this.pos>gr},eatSpace:function(){var gq=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos))){++this.pos}return this.pos>gq},skipToEnd:function(){this.pos=this.string.length},skipTo:function(gq){var gr=this.string.indexOf(gq,this.pos);if(gr>-1){this.pos=gr;return true}},backUp:function(gq){this.pos-=gq},column:function(){if(this.lastColumnPos<this.start){this.lastColumnValue=bS(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue);this.lastColumnPos=this.start}return this.lastColumnValue-(this.lineStart?bS(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return bS(this.string,null,this.tabSize)-(this.lineStart?bS(this.string,this.lineStart,this.tabSize):0)},match:function(gu,gr,gq){if(typeof gu=="string"){var gv=function(gw){return gq?gw.toLowerCase():gw};var gt=this.string.substr(this.pos,gu.length);if(gv(gt)==gv(gu)){if(gr!==false){this.pos+=gu.length}return true}}else{var gs=this.string.slice(this.pos).match(gu);if(gs&&gs.index>0){return null}if(gs&&gr!==false){this.pos+=gs[0].length}return gs}},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(gr,gq){this.lineStart+=gr;try{return gq()}finally{this.lineStart-=gr}}};var a4=0;var P=H.TextMarker=function(gr,gq){this.lines=[];this.type=gq;this.doc=gr;this.id=++a4};bx(P);P.prototype.clear=function(){if(this.explicitlyCleared){return}var gx=this.doc.cm,gr=gx&&!gx.curOp;if(gr){cH(gx)}if(fn(this,"clear")){var gy=this.find();if(gy){ae(this,"clear",gy.from,gy.to)}}var gs=null,gv=null;for(var gt=0;gt<this.lines.length;++gt){var gz=this.lines[gt];var gw=fe(gz.markedSpans,this);if(gx&&!this.collapsed){R(gx,bM(gz),"text")}else{if(gx){if(gw.to!=null){gv=bM(gz)}if(gw.from!=null){gs=bM(gz)}}}gz.markedSpans=eK(gz.markedSpans,gw);if(gw.from==null&&this.collapsed&&!fB(this.doc,gz)&&gx){gc(gz,aX(gx.display))}}if(gx&&this.collapsed&&!gx.options.lineWrapping){for(var gt=0;gt<this.lines.length;++gt){var gq=x(this.lines[gt]),gu=eq(gq);if(gu>gx.display.maxLineLength){gx.display.maxLine=gq;gx.display.maxLineLength=gu;gx.display.maxLineChanged=true}}}if(gs!=null&&gx&&this.collapsed){ah(gx,gs,gv+1)}this.lines.length=0;this.explicitlyCleared=true;if(this.atomic&&this.doc.cantEdit){this.doc.cantEdit=false;if(gx){eB(gx.doc)}}if(gx){ae(gx,"markerCleared",gx,this)}if(gr){al(gx)}if(this.parent){this.parent.clear()}};P.prototype.find=function(gt,gr){if(gt==null&&this.type=="bookmark"){gt=1}var gw,gv;for(var gs=0;gs<this.lines.length;++gs){var gq=this.lines[gs];var gu=fe(gq.markedSpans,this);if(gu.from!=null){gw=W(gr?gq:bM(gq),gu.from);if(gt==-1){return gw}}if(gu.to!=null){gv=W(gr?gq:bM(gq),gu.to);if(gt==1){return gv}}}return gw&&{from:gw,to:gv}};P.prototype.changed=function(){var gs=this.find(-1,true),gr=this,gq=this.doc.cm;if(!gs||!gq){return}cL(gq,function(){var gu=gs.line,gv=bM(gs.line);var gt=fg(gq,gv);if(gt){at(gt);gq.curOp.selectionChanged=gq.curOp.forceUpdate=true}gq.curOp.updateMaxLine=true;if(!fB(gr.doc,gu)&&gr.height!=null){var gx=gr.height;gr.height=null;var gw=cX(gr)-gx;if(gw){gc(gu,gu.height+gw)}}})};P.prototype.attachLine=function(gq){if(!this.lines.length&&this.doc.cm){var gr=this.doc.cm.curOp;if(!gr.maybeHiddenMarkers||dh(gr.maybeHiddenMarkers,this)==-1){(gr.maybeUnhiddenMarkers||(gr.maybeUnhiddenMarkers=[])).push(this)}}this.lines.push(gq)};P.prototype.detachLine=function(gq){this.lines.splice(dh(this.lines,gq),1);if(!this.lines.length&&this.doc.cm){var gr=this.doc.cm.curOp;(gr.maybeHiddenMarkers||(gr.maybeHiddenMarkers=[])).push(this)}};var a4=0;function eI(gy,gw,gx,gA,gu){if(gA&&gA.shared){return O(gy,gw,gx,gA,gu)}if(gy.cm&&!gy.cm.curOp){return c1(gy.cm,eI)(gy,gw,gx,gA,gu)}var gt=new P(gy,gu),gz=ce(gw,gx);if(gA){aM(gA,gt,false)}if(gz>0||gz==0&&gt.clearWhenEmpty!==false){return gt}if(gt.replacedWith){gt.collapsed=true;gt.widgetNode=f9("span",[gt.replacedWith],"CodeMirror-widget");if(!gA.handleMouseEvents){gt.widgetNode.setAttribute("cm-ignore-events","true")}if(gA.insertLeft){gt.widgetNode.insertLeft=true}}if(gt.collapsed){if(z(gy,gw.line,gw,gx,gt)||gw.line!=gx.line&&z(gy,gx.line,gw,gx,gt)){throw new Error("Inserting collapsed marker partially overlapping an existing one")}a6=true}if(gt.addToHistory){fS(gy,{from:gw,to:gx,origin:"markText"},gy.sel,NaN)}var gr=gw.line,gv=gy.cm,gq;gy.iter(gr,gx.line+1,function(gB){if(gv&&gt.collapsed&&!gv.options.lineWrapping&&x(gB)==gv.display.maxLine){gq=true}if(gt.collapsed&&gr!=gw.line){gc(gB,0)}cc(gB,new ek(gt,gr==gw.line?gw.ch:null,gr==gx.line?gx.ch:null));++gr});if(gt.collapsed){gy.iter(gw.line,gx.line+1,function(gB){if(fB(gy,gB)){gc(gB,0)}})}if(gt.clearOnEnter){bW(gt,"beforeCursorEnter",function(){gt.clear()})}if(gt.readOnly){gj=true;if(gy.history.done.length||gy.history.undone.length){gy.clearHistory()}}if(gt.collapsed){gt.id=++a4;gt.atomic=true}if(gv){if(gq){gv.curOp.updateMaxLine=true}if(gt.collapsed){ah(gv,gw.line,gx.line+1)}else{if(gt.className||gt.title||gt.startStyle||gt.endStyle||gt.css){for(var gs=gw.line;gs<=gx.line;gs++){R(gv,gs,"text")}}}if(gt.atomic){eB(gv.doc)}ae(gv,"markerAdded",gv,gt)}return gt}var y=H.SharedTextMarker=function(gs,gr){this.markers=gs;this.primary=gr;for(var gq=0;gq<gs.length;++gq){gs[gq].parent=this}};bx(y);y.prototype.clear=function(){if(this.explicitlyCleared){return}this.explicitlyCleared=true;for(var gq=0;gq<this.markers.length;++gq){this.markers[gq].clear()}ae(this,"clear")};y.prototype.find=function(gr,gq){return this.primary.find(gr,gq)};function O(gu,gx,gw,gq,gs){gq=aM(gq);gq.shared=false;var gv=[eI(gu,gx,gw,gq,gs)],gr=gv[0];var gt=gq.widgetNode;d8(gu,function(gz){if(gt){gq.widgetNode=gt.cloneNode(true)}gv.push(eI(gz,fP(gz,gx),fP(gz,gw),gq,gs));for(var gy=0;gy<gz.linked.length;++gy){if(gz.linked[gy].isParent){return}}gr=fL(gv)});return new y(gv,gr)}function eT(gq){return gq.findMarks(W(gq.first,0),gq.clipPos(W(gq.lastLine())),function(gr){return gr.parent})}function dF(gv,gw){for(var gt=0;gt<gw.length;gt++){var gr=gw[gt],gx=gr.find();var gq=gv.clipPos(gx.from),gu=gv.clipPos(gx.to);if(ce(gq,gu)){var gs=eI(gv,gq,gu,gr.primary,gr.primary.type);gr.markers.push(gs);gs.parent=gr}}}function er(gt){for(var gs=0;gs<gt.length;gs++){var gq=gt[gs],gv=[gq.primary.doc];d8(gq.primary.doc,function(gw){gv.push(gw)});for(var gr=0;gr<gq.markers.length;gr++){var gu=gq.markers[gr];if(dh(gv,gu.doc)==-1){gu.parent=null;gq.markers.splice(gr--,1)}}}}function ek(gq,gs,gr){this.marker=gq;this.from=gs;this.to=gr}function fe(gs,gq){if(gs){for(var gr=0;gr<gs.length;++gr){var gt=gs[gr];if(gt.marker==gq){return gt}}}}function eK(gr,gs){for(var gt,gq=0;gq<gr.length;++gq){if(gr[gq]!=gs){(gt||(gt=[])).push(gr[gq])}}return gt}function cc(gq,gr){gq.markedSpans=gq.markedSpans?gq.markedSpans.concat([gr]):[gr];gr.marker.attachLine(gq)}function aP(gr,gs,gw){if(gr){for(var gu=0,gx;gu<gr.length;++gu){var gy=gr[gu],gv=gy.marker;var gq=gy.from==null||(gv.inclusiveLeft?gy.from<=gs:gy.from<gs);if(gq||gy.from==gs&&gv.type=="bookmark"&&(!gw||!gy.marker.insertLeft)){var gt=gy.to==null||(gv.inclusiveRight?gy.to>=gs:gy.to>gs);(gx||(gx=[])).push(new ek(gv,gy.from,gt?null:gy.to))}}}return gx}function aA(gr,gt,gw){if(gr){for(var gu=0,gx;gu<gr.length;++gu){var gy=gr[gu],gv=gy.marker;var gs=gy.to==null||(gv.inclusiveRight?gy.to>=gt:gy.to>gt);if(gs||gy.from==gt&&gv.type=="bookmark"&&(!gw||gy.marker.insertLeft)){var gq=gy.from==null||(gv.inclusiveLeft?gy.from<=gt:gy.from<gt);(gx||(gx=[])).push(new ek(gv,gq?null:gy.from-gt,gy.to==null?null:gy.to-gt))}}}return gx}function em(gC,gz){if(gz.full){return null}var gy=b8(gC,gz.from.line)&&fk(gC,gz.from.line).markedSpans;var gF=b8(gC,gz.to.line)&&fk(gC,gz.to.line).markedSpans;if(!gy&&!gF){return null}var gr=gz.from.ch,gu=gz.to.ch,gx=ce(gz.from,gz.to)==0;var gw=aP(gy,gr,gx);var gE=aA(gF,gu,gx);var gD=gz.text.length==1,gs=fL(gz.text).length+(gD?gr:0);if(gw){for(var gt=0;gt<gw.length;++gt){var gB=gw[gt];if(gB.to==null){var gG=fe(gE,gB.marker);if(!gG){gB.to=gr}else{if(gD){gB.to=gG.to==null?null:gG.to+gs}}}}}if(gE){for(var gt=0;gt<gE.length;++gt){var gB=gE[gt];if(gB.to!=null){gB.to+=gs}if(gB.from==null){var gG=fe(gw,gB.marker);if(!gG){gB.from=gs;if(gD){(gw||(gw=[])).push(gB)}}}else{gB.from+=gs;if(gD){(gw||(gw=[])).push(gB)}}}}if(gw){gw=q(gw)}if(gE&&gE!=gw){gE=q(gE)}var gv=[gw];if(!gD){var gA=gz.text.length-2,gq;if(gA>0&&gw){for(var gt=0;gt<gw.length;++gt){if(gw[gt].to==null){(gq||(gq=[])).push(new ek(gw[gt].marker,null,null))}}}for(var gt=0;gt<gA;++gt){gv.push(gq)}gv.push(gE)}return gv}function q(gr){for(var gq=0;gq<gr.length;++gq){var gs=gr[gq];if(gs.from!=null&&gs.from==gs.to&&gs.marker.clearWhenEmpty!==false){gr.splice(gq--,1)}}if(!gr.length){return null}return gr}function ea(gy,gw){var gq=b3(gy,gw);var gz=em(gy,gw);if(!gq){return gz}if(!gz){return gq}for(var gt=0;gt<gq.length;++gt){var gu=gq[gt],gv=gz[gt];if(gu&&gv){spans:for(var gs=0;gs<gv.length;++gs){var gx=gv[gs];for(var gr=0;gr<gu.length;++gr){if(gu[gr].marker==gx.marker){continue spans}}gu.push(gx)}}else{if(gv){gq[gt]=gv}}}return gq}function cG(gC,gA,gB){var gu=null;gC.iter(gA.line,gB.line+1,function(gD){if(gD.markedSpans){for(var gE=0;gE<gD.markedSpans.length;++gE){var gF=gD.markedSpans[gE].marker;if(gF.readOnly&&(!gu||dh(gu,gF)==-1)){(gu||(gu=[])).push(gF)}}}});if(!gu){return null}var gv=[{from:gA,to:gB}];for(var gw=0;gw<gu.length;++gw){var gx=gu[gw],gs=gx.find(0);for(var gt=0;gt<gv.length;++gt){var gr=gv[gt];if(ce(gr.to,gs.from)<0||ce(gr.from,gs.to)>0){continue}var gz=[gt,1],gq=ce(gr.from,gs.from),gy=ce(gr.to,gs.to);if(gq<0||!gx.inclusiveLeft&&!gq){gz.push({from:gr.from,to:gs.from})}if(gy>0||!gx.inclusiveRight&&!gy){gz.push({from:gs.to,to:gr.to})}gv.splice.apply(gv,gz);gt+=gz.length-1}}return gv}function gf(gq){var gs=gq.markedSpans;if(!gs){return}for(var gr=0;gr<gs.length;++gr){gs[gr].marker.detachLine(gq)}gq.markedSpans=null}function c2(gq,gs){if(!gs){return}for(var gr=0;gr<gs.length;++gr){gs[gr].marker.attachLine(gq)}gq.markedSpans=gs}function v(gq){return gq.inclusiveLeft?-1:0}function bV(gq){return gq.inclusiveRight?1:0}function dQ(gt,gr){var gv=gt.lines.length-gr.lines.length;if(gv!=0){return gv}var gs=gt.find(),gw=gr.find();var gq=ce(gs.from,gw.from)||v(gt)-v(gr);if(gq){return -gq}var gu=ce(gs.to,gw.to)||bV(gt)-bV(gr);if(gu){return gu}return gr.id-gt.id}function a5(gr,gv){var gq=a6&&gr.markedSpans,gu;if(gq){for(var gt,gs=0;gs<gq.length;++gs){gt=gq[gs];if(gt.marker.collapsed&&(gv?gt.from:gt.to)==null&&(!gu||dQ(gu,gt.marker)<0)){gu=gt.marker}}}return gu}function eS(gq){return a5(gq,true)}function ex(gq){return a5(gq,false)}function z(gy,gs,gw,gx,gu){var gB=fk(gy,gs);var gq=a6&&gB.markedSpans;if(gq){for(var gt=0;gt<gq.length;++gt){var gr=gq[gt];if(!gr.marker.collapsed){continue}var gA=gr.marker.find(0);var gz=ce(gA.from,gw)||v(gr.marker)-v(gu);var gv=ce(gA.to,gx)||bV(gr.marker)-bV(gu);if(gz>=0&&gv<=0||gz<=0&&gv>=0){continue}if(gz<=0&&(gr.marker.inclusiveRight&&gu.inclusiveLeft?ce(gA.to,gw)>=0:ce(gA.to,gw)>0)||gz>=0&&(gr.marker.inclusiveRight&&gu.inclusiveLeft?ce(gA.from,gx)<=0:ce(gA.from,gx)<0)){return true}}}}function x(gr){var gq;while(gq=eS(gr)){gr=gq.find(-1,true).line}return gr}function g(gs){var gq,gr;while(gq=ex(gs)){gs=gq.find(1,true).line;(gr||(gr=[])).push(gs)}return gr}function aV(gt,gr){var gq=fk(gt,gr),gs=x(gq);if(gq==gs){return gr}return bM(gs)}function d3(gt,gs){if(gs>gt.lastLine()){return gs}var gr=fk(gt,gs),gq;if(!fB(gt,gr)){return gs}while(gq=ex(gr)){gr=gq.find(1,true).line}return bM(gr)+1}function fB(gu,gr){var gq=a6&&gr.markedSpans;if(gq){for(var gt,gs=0;gs<gq.length;++gs){gt=gq[gs];if(!gt.marker.collapsed){continue}if(gt.from==null){return true}if(gt.marker.widgetNode){continue}if(gt.from==0&&gt.marker.inclusiveLeft&&T(gu,gr,gt)){return true}}}}function T(gv,gr,gt){if(gt.to==null){var gq=gt.marker.find(1,true);return T(gv,gq.line,fe(gq.line.markedSpans,gt.marker))}if(gt.marker.inclusiveRight&&gt.to==gr.text.length){return true}for(var gu,gs=0;gs<gr.markedSpans.length;++gs){gu=gr.markedSpans[gs];if(gu.marker.collapsed&&!gu.marker.widgetNode&&gu.from==gt.to&&(gu.to==null||gu.to!=gt.from)&&(gu.marker.inclusiveLeft||gt.marker.inclusiveRight)&&T(gv,gr,gu)){return true}}}var dB=H.LineWidget=function(gt,gs,gq){if(gq){for(var gr in gq){if(gq.hasOwnProperty(gr)){this[gr]=gq[gr]}}}this.doc=gt;this.node=gs};bx(dB);function dZ(gq,gr,gs){if(bL(gr)<((gq.curOp&&gq.curOp.scrollTop)||gq.doc.scrollTop)){cK(gq,null,gs)}}dB.prototype.clear=function(){var gr=this.doc.cm,gt=this.line.widgets,gs=this.line,gv=bM(gs);if(gv==null||!gt){return}for(var gu=0;gu<gt.length;++gu){if(gt[gu]==this){gt.splice(gu--,1)}}if(!gt.length){gs.widgets=null}var gq=cX(this);gc(gs,Math.max(0,gs.height-gq));if(gr){cL(gr,function(){dZ(gr,gs,-gq);R(gr,gv,"widget")})}};dB.prototype.changed=function(){var gr=this.height,gq=this.doc.cm,gs=this.line;this.height=null;var gt=cX(this)-gr;if(!gt){return}gc(gs,gs.height+gt);if(gq){cL(gq,function(){gq.curOp.forceUpdate=true;dZ(gq,gs,gt)})}};function cX(gs){if(gs.height!=null){return gs.height}var gq=gs.doc.cm;if(!gq){return 0}if(!gh(document.body,gs.node)){var gr="position: relative;";if(gs.coverGutter){gr+="margin-left: -"+gq.display.gutters.offsetWidth+"px;"}if(gs.noHScroll){gr+="width: "+gq.display.wrapper.clientWidth+"px;"}bQ(gq.display.measure,f9("div",[gs.node],null,gr))}return gs.height=gs.node.parentNode.offsetHeight}function bG(gv,gu,gs,gr){var gt=new dB(gv,gs,gr);var gq=gv.cm;if(gq&&gt.noHScroll){gq.display.alignWidgets=true}eC(gv,gu,"widget",function(gx){var gy=gx.widgets||(gx.widgets=[]);if(gt.insertAt==null){gy.push(gt)}else{gy.splice(Math.min(gy.length-1,Math.max(0,gt.insertAt)),0,gt)}gt.line=gx;if(gq&&!fB(gv,gx)){var gw=bL(gx)<gv.scrollTop;gc(gx,gx.height+cX(gt));if(gw){cK(gq,null,gt.height)}gq.curOp.forceUpdate=true}return true});return gt}var gd=H.Line=function(gs,gr,gq){this.text=gs;c2(this,gr);this.height=gq?gq(this):1};bx(gd);gd.prototype.lineNo=function(){return bM(this)};function ep(gr,gu,gs,gq){gr.text=gu;if(gr.stateAfter){gr.stateAfter=null}if(gr.styles){gr.styles=null}if(gr.order!=null){gr.order=null}gf(gr);c2(gr,gs);var gt=gq?gq(gr):1;if(gt!=gr.height){gc(gr,gt)}}function bA(gq){gq.parent=null;gf(gq)}function di(gs,gr){if(gs){for(;;){var gq=gs.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!gq){break}gs=gs.slice(0,gq.index)+gs.slice(gq.index+gq[0].length);var gt=gq[1]?"bgClass":"textClass";if(gr[gt]==null){gr[gt]=gq[2]}else{if(!(new RegExp("(?:^|s)"+gq[2]+"(?:$|s)")).test(gr[gt])){gr[gt]+=" "+gq[2]}}}}return gs}function fv(gs,gr){if(gs.blankLine){return gs.blankLine(gr)}if(!gs.innerMode){return}var gq=H.innerMode(gs,gr);if(gq.mode.blankLine){return gq.mode.blankLine(gq.state)}}function eD(gv,gu,gt,gq){for(var gr=0;gr<10;gr++){if(gq){gq[0]=H.innerMode(gv,gt).mode}var gs=gv.token(gu,gt);if(gu.pos>gu.start){return gs}}throw new Error("Mode "+gv.name+" failed to advance stream.")}function cp(gz,gx,gu,gt){function gq(gC){return{start:gA.start,end:gA.pos,string:gA.current(),type:gs||null,state:gC?b2(gy.mode,gr):gr}}var gy=gz.doc,gv=gy.mode,gs;gx=fP(gy,gx);var gB=fk(gy,gx.line),gr=dC(gz,gx.line,gu);var gA=new eX(gB.text,gz.options.tabSize),gw;if(gt){gw=[]}while((gt||gA.pos<gx.ch)&&!gA.eol()){gA.start=gA.pos;gs=eD(gv,gA,gr);if(gt){gw.push(gq(true))}}return gt?gw:gq()}function w(gA,gC,gv,gr,gw,gt,gu){var gs=gv.flattenSpans;if(gs==null){gs=gA.options.flattenSpans}var gy=0,gx=null;var gB=new eX(gC,gA.options.tabSize),gq;var gE=gA.options.addModeClass&&[null];if(gC==""){di(fv(gv,gr),gt)}while(!gB.eol()){if(gB.pos>gA.options.maxHighlightLength){gs=false;if(gu){dx(gA,gC,gr,gB.pos)}gB.pos=gC.length;gq=null}else{gq=di(eD(gv,gB,gr,gE),gt)}if(gE){var gD=gE[0].name;if(gD){gq="m-"+(gq?gD+" "+gq:gD)}}if(!gs||gx!=gq){while(gy<gB.start){gy=Math.min(gB.start,gy+50000);gw(gy,gx)}gx=gq}gB.start=gB.pos}while(gy<gB.pos){var gz=Math.min(gB.pos,gy+50000);gw(gz,gx);gy=gz}}function fE(gx,gz,gq,gu){var gy=[gx.state.modeGen],gt={};w(gx,gz.text,gx.doc.mode,gq,function(gA,gB){gy.push(gA,gB)},gt,gu);for(var gr=0;gr<gx.state.overlays.length;++gr){var gv=gx.state.overlays[gr],gw=1,gs=0;w(gx,gz.text,gv.mode,true,function(gA,gC){var gE=gw;while(gs<gA){var gB=gy[gw];if(gB>gA){gy.splice(gw,1,gA,gy[gw+1],gB)}gw+=2;gs=Math.min(gA,gB)}if(!gC){return}if(gv.opaque){gy.splice(gE,gw-gE,gA,"cm-overlay "+gC);gw=gE+2}else{for(;gE<gw;gE+=2){var gD=gy[gE+1];gy[gE+1]=(gD?gD+" ":"")+"cm-overlay "+gC}}},gt)}return{styles:gy,classes:gt.bgClass||gt.textClass?gt:null}}function c5(gr,gs,gu){if(!gs.styles||gs.styles[0]!=gr.state.modeGen){var gt=dC(gr,bM(gs));var gq=fE(gr,gs,gs.text.length>gr.options.maxHighlightLength?b2(gr.doc.mode,gt):gt);gs.stateAfter=gt;gs.styles=gq.styles;if(gq.classes){gs.styleClasses=gq.classes}else{if(gs.styleClasses){gs.styleClasses=null}}if(gu===gr.doc.frontier){gr.doc.frontier++}}return gs.styles}function dx(gq,gv,gs,gr){var gu=gq.doc.mode;var gt=new eX(gv,gq.options.tabSize);gt.start=gt.pos=gr||0;if(gv==""){fv(gu,gs)}while(!gt.eol()){eD(gu,gt,gs);gt.start=gt.pos}}var dW={},b0={};function e0(gs,gr){if(!gs||/^\s*$/.test(gs)){return null}var gq=gr.addModeClass?b0:dW;return gq[gs]||(gq[gs]=gs.replace(/\S+/g,"cm-$&"))}function eV(gw,gv){var gu=f9("span",null,null,cZ?"padding-right: .1px":null);var gt={pre:f9("pre",[gu],"CodeMirror-line"),content:gu,col:0,pos:0,cm:gw,splitSpaces:(dK||cZ)&&gw.getOption("lineWrapping")};gv.measure={};for(var gs=0;gs<=(gv.rest?gv.rest.length:0);gs++){var gy=gs?gv.rest[gs-1]:gv.line,gr;gt.pos=0;gt.addToken=t;if(bN(gw.display.measure)&&(gr=a(gy))){gt.addToken=U(gt.addToken,gr)}gt.map=[];var gq=gv!=gw.display.externalMeasured&&bM(gy);bn(gy,gt,c5(gw,gy,gq));if(gy.styleClasses){if(gy.styleClasses.bgClass){gt.bgClass=fZ(gy.styleClasses.bgClass,gt.bgClass||"")}if(gy.styleClasses.textClass){gt.textClass=fZ(gy.styleClasses.textClass,gt.textClass||"")}}if(gt.map.length==0){gt.map.push(0,0,gt.content.appendChild(bm(gw.display.measure)))}if(gs==0){gv.measure.map=gt.map;gv.measure.cache={}}else{(gv.measure.maps||(gv.measure.maps=[])).push(gt.map);(gv.measure.caches||(gv.measure.caches=[])).push({})}}if(cZ){var gx=gt.content.lastChild;if(/\bcm-tab\b/.test(gx.className)||(gx.querySelector&&gx.querySelector(".cm-tab"))){gt.content.className="cm-tab-wrap-hack"}}aD(gw,"renderLine",gw,gv.line,gt.pre);if(gt.pre.className){gt.textClass=fZ(gt.pre.className,gt.textClass||"")}return gt}function fh(gr){var gq=f9("span","\u2022","cm-invalidchar");gq.title="\\u"+gr.charCodeAt(0).toString(16);gq.setAttribute("aria-label",gq.title);return gq}function t(gB,gw,gG,gD,gz,gI,gv){if(!gw){return}var gF=gB.splitSpaces?gw.replace(/ {3,}/g,cE):gw;var gq=gB.cm.state.specialChars,gr=false;if(!gq.test(gw)){gB.col+=gw.length;var gE=document.createTextNode(gF);gB.map.push(gB.pos,gB.pos+gw.length,gE);if(dK&&k<9){gr=true}gB.pos+=gw.length}else{var gE=document.createDocumentFragment(),gt=0;while(true){gq.lastIndex=gt;var gC=gq.exec(gw);var gH=gC?gC.index-gt:gw.length-gt;if(gH){var gy=document.createTextNode(gF.slice(gt,gt+gH));if(dK&&k<9){gE.appendChild(f9("span",[gy]))}else{gE.appendChild(gy)}gB.map.push(gB.pos,gB.pos+gH,gy);gB.col+=gH;gB.pos+=gH}if(!gC){break}gt+=gH+1;if(gC[0]=="\t"){var gA=gB.cm.options.tabSize,gx=gA-gB.col%gA;var gy=gE.appendChild(f9("span",co(gx),"cm-tab"));gy.setAttribute("role","presentation");gy.setAttribute("cm-text","\t");gB.col+=gx}else{if(gC[0]=="\r"||gC[0]=="\n"){var gy=gE.appendChild(f9("span",gC[0]=="\r"?"\u240d":"\u2424","cm-invalidchar"));gy.setAttribute("cm-text",gC[0]);gB.col+=1}else{var gy=gB.cm.options.specialCharPlaceholder(gC[0]);gy.setAttribute("cm-text",gC[0]);if(dK&&k<9){gE.appendChild(f9("span",[gy]))}else{gE.appendChild(gy)}gB.col+=1}}gB.map.push(gB.pos,gB.pos+1,gy);gB.pos++}}if(gG||gD||gz||gr||gv){var gs=gG||"";if(gD){gs+=gD}if(gz){gs+=gz}var gu=f9("span",[gE],gs,gv);if(gI){gu.title=gI}return gB.content.appendChild(gu)}gB.content.appendChild(gE)}function cE(gq){var gr=" ";for(var gs=0;gs<gq.length-2;++gs){gr+=gs%2?" ":"\u00a0"}gr+=" ";return gr}function U(gr,gq){return function(gz,gB,gs,gw,gC,gA,gy){gs=gs?gs+" cm-force-border":"cm-force-border";var gt=gz.pos,gv=gt+gB.length;for(;;){for(var gx=0;gx<gq.length;gx++){var gu=gq[gx];if(gu.to>gt&&gu.from<=gt){break}}if(gu.to>=gv){return gr(gz,gB,gs,gw,gC,gA,gy)}gr(gz,gB.slice(0,gu.to-gt),gs,gw,null,gA,gy);gw=null;gB=gB.slice(gu.to-gt);gt=gu.to}}}function ac(gr,gt,gq,gs){var gu=!gs&&gq.widgetNode;if(gu){gr.map.push(gr.pos,gr.pos+gt,gu)}if(!gs&&gr.cm.display.input.needsContentAttribute){if(!gu){gu=gr.content.appendChild(document.createElement("span"))}gu.setAttribute("cm-marker",gq.id)}if(gu){gr.cm.display.input.setUneditable(gu);gr.content.appendChild(gu)}gr.pos+=gt}function bn(gA,gH,gz){var gv=gA.markedSpans,gx=gA.text,gF=0;if(!gv){for(var gK=1;gK<gz.length;gK+=2){gH.addToken(gH,gx.slice(gF,gF=gz[gK]),e0(gz[gK+1],gH.cm.options))}return}var gL=gx.length,gu=0,gK=1,gD="",gM,gB;var gO=0,gq,gN,gE,gP,gs;for(;;){if(gO==gu){gq=gN=gE=gP=gB="";gs=null;gO=Infinity;var gw=[],gy;for(var gI=0;gI<gv.length;++gI){var gJ=gv[gI],gG=gJ.marker;if(gG.type=="bookmark"&&gJ.from==gu&&gG.widgetNode){gw.push(gG)}else{if(gJ.from<=gu&&(gJ.to==null||gJ.to>gu||gG.collapsed&&gJ.to==gu&&gJ.from==gu)){if(gJ.to!=null&&gJ.to!=gu&&gO>gJ.to){gO=gJ.to;gN=""}if(gG.className){gq+=" "+gG.className}if(gG.css){gB=(gB?gB+";":"")+gG.css}if(gG.startStyle&&gJ.from==gu){gE+=" "+gG.startStyle}if(gG.endStyle&&gJ.to==gO){(gy||(gy=[])).push(gG.endStyle,gJ.to)}if(gG.title&&!gP){gP=gG.title}if(gG.collapsed&&(!gs||dQ(gs.marker,gG)<0)){gs=gJ}}else{if(gJ.from>gu&&gO>gJ.from){gO=gJ.from}}}}if(gy){for(var gI=0;gI<gy.length;gI+=2){if(gy[gI+1]==gO){gN+=" "+gy[gI]}}}if(!gs||gs.from==gu){for(var gI=0;gI<gw.length;++gI){ac(gH,0,gw[gI])}}if(gs&&(gs.from||0)==gu){ac(gH,(gs.to==null?gL+1:gs.to)-gu,gs.marker,gs.from==null);if(gs.to==null){return}if(gs.to==gu){gs=false}}}if(gu>=gL){break}var gC=Math.min(gL,gO);while(true){if(gD){var gr=gu+gD.length;if(!gs){var gt=gr>gC?gD.slice(0,gC-gu):gD;gH.addToken(gH,gt,gM?gM+gq:gq,gE,gu+gt.length==gO?gN:"",gP,gB)}if(gr>=gC){gD=gD.slice(gC-gu);gu=gC;break}gu=gr;gE=""}gD=gx.slice(gF,gF=gz[gK++]);gM=e0(gz[gK++],gH.cm.options)}}}function dS(gq,gr){return gr.from.ch==0&&gr.to.ch==0&&fL(gr.text)==""&&(!gq.cm||gq.cm.options.wholeLineUpdateBefore)}function fD(gD,gy,gr,gu){function gE(gG){return gr?gr[gG]:null}function gs(gG,gI,gH){ep(gG,gI,gH,gu);ae(gG,"change",gG,gy)}function gq(gJ,gH){for(var gI=gJ,gG=[];gI<gH;++gI){gG.push(new gd(gF[gI],gE(gI),gu))}return gG}var gC=gy.from,gB=gy.to,gF=gy.text;var gz=fk(gD,gC.line),gA=fk(gD,gB.line);var gx=fL(gF),gt=gE(gF.length-1),gw=gB.line-gC.line;if(gy.full){gD.insert(0,gq(0,gF.length));gD.remove(gF.length,gD.size-gF.length)}else{if(dS(gD,gy)){var gv=gq(0,gF.length-1);gs(gA,gA.text,gt);if(gw){gD.remove(gC.line,gw)}if(gv.length){gD.insert(gC.line,gv)}}else{if(gz==gA){if(gF.length==1){gs(gz,gz.text.slice(0,gC.ch)+gx+gz.text.slice(gB.ch),gt)}else{var gv=gq(1,gF.length-1);gv.push(new gd(gx+gz.text.slice(gB.ch),gt,gu));gs(gz,gz.text.slice(0,gC.ch)+gF[0],gE(0));gD.insert(gC.line+1,gv)}}else{if(gF.length==1){gs(gz,gz.text.slice(0,gC.ch)+gF[0]+gA.text.slice(gB.ch),gE(0));gD.remove(gC.line+1,gw)}else{gs(gz,gz.text.slice(0,gC.ch)+gF[0],gE(0));gs(gA,gx+gA.text.slice(gB.ch),gt);var gv=gq(1,gF.length-1);if(gw>1){gD.remove(gC.line+1,gw-1)}gD.insert(gC.line+1,gv)}}}}ae(gD,"change",gD,gy)}function e3(gr){this.lines=gr;this.parent=null;for(var gs=0,gq=0;gs<gr.length;++gs){gr[gs].parent=this;gq+=gr[gs].height}this.height=gq}e3.prototype={chunkSize:function(){return this.lines.length},removeInner:function(gq,gu){for(var gs=gq,gt=gq+gu;gs<gt;++gs){var gr=this.lines[gs];this.height-=gr.height;bA(gr);ae(gr,"delete")}this.lines.splice(gq,gu)},collapse:function(gq){gq.push.apply(gq,this.lines)},insertInner:function(gr,gs,gq){this.height+=gq;this.lines=this.lines.slice(0,gr).concat(gs).concat(this.lines.slice(gr));for(var gt=0;gt<gs.length;++gt){gs[gt].parent=this}},iterN:function(gq,gt,gs){for(var gr=gq+gt;gq<gr;++gq){if(gs(this.lines[gq])){return true}}}};function fC(gt){this.children=gt;var gs=0,gq=0;for(var gr=0;gr<gt.length;++gr){var gu=gt[gr];gs+=gu.chunkSize();gq+=gu.height;gu.parent=this}this.size=gs;this.height=gq;this.parent=null}fC.prototype={chunkSize:function(){return this.size},removeInner:function(gq,gx){this.size-=gx;for(var gs=0;gs<this.children.length;++gs){var gw=this.children[gs],gu=gw.chunkSize();if(gq<gu){var gt=Math.min(gx,gu-gq),gv=gw.height;gw.removeInner(gq,gt);this.height-=gv-gw.height;if(gu==gt){this.children.splice(gs--,1);gw.parent=null}if((gx-=gt)==0){break}gq=0}else{gq-=gu}}if(this.size-gx<25&&(this.children.length>1||!(this.children[0] instanceof e3))){var gr=[];this.collapse(gr);this.children=[new e3(gr)];this.children[0].parent=this}},collapse:function(gq){for(var gr=0;gr<this.children.length;++gr){this.children[gr].collapse(gq)}},insertInner:function(gr,gy,gx){this.size+=gy.length;this.height+=gx;for(var gt=0;gt<this.children.length;++gt){var gq=this.children[gt],gv=gq.chunkSize();if(gr<=gv){gq.insertInner(gr,gy,gx);if(gq.lines&&gq.lines.length>50){var gs=gq.lines.length%25+25;for(var gw=gs;gw<gq.lines.length;){var gu=new e3(gq.lines.slice(gw,gw+=25));gq.height-=gu.height;this.children.splice(++gt,0,gu);gu.parent=this}gq.lines=gq.lines.slice(0,gs);this.maybeSpill()}break}gr-=gv}},maybeSpill:function(){if(this.children.length<=10){return}var gt=this;do{var gr=gt.children.splice(gt.children.length-5,5);var gs=new fC(gr);if(!gt.parent){var gu=new fC(gt.children);gu.parent=gt;gt.children=[gu,gs];gt=gu}else{gt.size-=gs.size;gt.height-=gs.height;var gq=dh(gt.parent.children,gt);gt.parent.children.splice(gq+1,0,gs)}gs.parent=gt.parent}while(gt.children.length>10);gt.parent.maybeSpill()},iterN:function(gq,gw,gv){for(var gr=0;gr<this.children.length;++gr){var gu=this.children[gr],gt=gu.chunkSize();if(gq<gt){var gs=Math.min(gw,gt-gq);if(gu.iterN(gq,gs,gv)){return true}if((gw-=gs)==0){break}gq=0}else{gq-=gt}}}};var cq=0;var ar=H.Doc=function(gt,gs,gq,gr){if(!(this instanceof ar)){return new ar(gt,gs,gq,gr)}if(gq==null){gq=0}fC.call(this,[new e3([new gd("",null)])]);this.first=gq;this.scrollTop=this.scrollLeft=0;this.cantEdit=false;this.cleanGeneration=1;this.frontier=gq;var gu=W(gq,0);this.sel=eW(gu);this.history=new f0(null);this.id=++cq;this.modeOption=gs;this.lineSep=gr;this.extend=false;if(typeof gt=="string"){gt=this.splitLines(gt)}fD(this,{from:gu,to:gu,text:gt});bT(this,eW(gu),Z)};ar.prototype=cj(fC.prototype,{constructor:ar,iter:function(gs,gr,gq){if(gq){this.iterN(gs-this.first,gr-gs,gq)}else{this.iterN(this.first,this.first+this.size,gs)}},insert:function(gr,gs){var gq=0;for(var gt=0;gt<gs.length;++gt){gq+=gs[gt].height}this.insertInner(gr-this.first,gs,gq)},remove:function(gq,gr){this.removeInner(gq-this.first,gr)},getValue:function(gr){var gq=a1(this,this.first,this.first+this.size);if(gr===false){return gq}return gq.join(gr||this.lineSeparator())},setValue:cC(function(gr){var gs=W(this.first,0),gq=this.first+this.size-1;bf(this,{from:gs,to:W(gq,fk(this,gq).text.length),text:this.splitLines(gr),origin:"setValue",full:true},true);bT(this,eW(gs))}),replaceRange:function(gr,gt,gs,gq){gt=fP(this,gt);gs=gs?fP(this,gs):gt;a0(this,gr,gt,gs,gq)},getRange:function(gt,gs,gr){var gq=gb(this,fP(this,gt),fP(this,gs));if(gr===false){return gq}return gq.join(gr||this.lineSeparator())},getLine:function(gr){var gq=this.getLineHandle(gr);return gq&&gq.text},getLineHandle:function(gq){if(b8(this,gq)){return fk(this,gq)}},getLineNumber:function(gq){return bM(gq)},getLineHandleVisualStart:function(gq){if(typeof gq=="number"){gq=fk(this,gq)}return x(gq)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(gq){return fP(this,gq)},getCursor:function(gs){var gq=this.sel.primary(),gr;if(gs==null||gs=="head"){gr=gq.head}else{if(gs=="anchor"){gr=gq.anchor}else{if(gs=="end"||gs=="to"||gs===false){gr=gq.to()}else{gr=gq.from()}}}return gr},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:cC(function(gq,gs,gr){F(this,fP(this,typeof gq=="number"?W(gq,gs||0):gq),null,gr)}),setSelection:cC(function(gr,gs,gq){F(this,fP(this,gr),fP(this,gs||gr),gq)}),extendSelection:cC(function(gs,gq,gr){f3(this,fP(this,gs),gq&&fP(this,gq),gr)}),extendSelections:cC(function(gr,gq){av(this,d0(this,gr),gq)}),extendSelectionsBy:cC(function(gs,gq){var gr=bR(this.sel.ranges,gs);av(this,d0(this,gr),gq)}),setSelections:cC(function(gq,gu,gs){if(!gq.length){return}for(var gt=0,gr=[];gt<gq.length;gt++){gr[gt]=new dY(fP(this,gq[gt].anchor),fP(this,gq[gt].head))}if(gu==null){gu=Math.min(gq.length-1,this.sel.primIndex)}bT(this,cv(gr,gu),gs)}),addSelection:cC(function(gs,gt,gr){var gq=this.sel.ranges.slice(0);gq.push(new dY(fP(this,gs),fP(this,gt||gs)));bT(this,cv(gq,gq.length-1),gr)}),getSelection:function(gu){var gr=this.sel.ranges,gq;for(var gs=0;gs<gr.length;gs++){var gt=gb(this,gr[gs].from(),gr[gs].to());gq=gq?gq.concat(gt):gt}if(gu===false){return gq}else{return gq.join(gu||this.lineSeparator())}},getSelections:function(gu){var gt=[],gq=this.sel.ranges;for(var gr=0;gr<gq.length;gr++){var gs=gb(this,gq[gr].from(),gq[gr].to());if(gu!==false){gs=gs.join(gu||this.lineSeparator())}gt[gr]=gs}return gt},replaceSelection:function(gs,gu,gq){var gt=[];for(var gr=0;gr<this.sel.ranges.length;gr++){gt[gr]=gs}this.replaceSelections(gt,gu,gq||"+input")},replaceSelections:cC(function(gv,gx,gs){var gu=[],gw=this.sel;for(var gt=0;gt<gw.ranges.length;gt++){var gr=gw.ranges[gt];gu[gt]={from:gr.from(),to:gr.to(),text:this.splitLines(gv[gt]),origin:gs}}var gq=gx&&gx!="end"&&af(this,gu,gx);for(var gt=gu.length-1;gt>=0;gt--){bf(this,gu[gt])}if(gq){fc(this,gq)}else{if(this.cm){fK(this.cm)}}}),undo:cC(function(){b7(this,"undo")}),redo:cC(function(){b7(this,"redo")}),undoSelection:cC(function(){b7(this,"undo",true)}),redoSelection:cC(function(){b7(this,"redo",true)}),setExtending:function(gq){this.extend=gq},getExtending:function(){return this.extend},historySize:function(){var gt=this.history,gq=0,gs=0;for(var gr=0;gr<gt.done.length;gr++){if(!gt.done[gr].ranges){++gq}}for(var gr=0;gr<gt.undone.length;gr++){if(!gt.undone[gr].ranges){++gs}}return{undo:gq,redo:gs}},clearHistory:function(){this.history=new f0(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(true)},changeGeneration:function(gq){if(gq){this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null}return this.history.generation},isClean:function(gq){return this.history.generation==(gq||this.cleanGeneration)},getHistory:function(){return{done:bO(this.history.done),undone:bO(this.history.undone)}},setHistory:function(gr){var gq=this.history=new f0(this.history.maxGeneration);gq.done=bO(gr.done.slice(0),null,true);gq.undone=bO(gr.undone.slice(0),null,true)},addLineClass:cC(function(gs,gr,gq){return eC(this,gs,gr=="gutter"?"gutter":"class",function(gt){var gu=gr=="text"?"textClass":gr=="background"?"bgClass":gr=="gutter"?"gutterClass":"wrapClass";if(!gt[gu]){gt[gu]=gq}else{if(S(gq).test(gt[gu])){return false}else{gt[gu]+=" "+gq}}return true})}),removeLineClass:cC(function(gs,gr,gq){return eC(this,gs,gr=="gutter"?"gutter":"class",function(gu){var gx=gr=="text"?"textClass":gr=="background"?"bgClass":gr=="gutter"?"gutterClass":"wrapClass";var gw=gu[gx];if(!gw){return false}else{if(gq==null){gu[gx]=null}else{var gv=gw.match(S(gq));if(!gv){return false}var gt=gv.index+gv[0].length;gu[gx]=gw.slice(0,gv.index)+(!gv.index||gt==gw.length?"":" ")+gw.slice(gt)||null}}return true})}),addLineWidget:cC(function(gs,gr,gq){return bG(this,gs,gr,gq)}),removeLineWidget:function(gq){gq.clear()},markText:function(gs,gr,gq){return eI(this,fP(this,gs),fP(this,gr),gq,gq&&gq.type||"range")},setBookmark:function(gs,gq){var gr={replacedWith:gq&&(gq.nodeType==null?gq.widget:gq),insertLeft:gq&&gq.insertLeft,clearWhenEmpty:false,shared:gq&&gq.shared,handleMouseEvents:gq&&gq.handleMouseEvents};gs=fP(this,gs);return eI(this,gs,gs,gr,"bookmark")},findMarksAt:function(gu){gu=fP(this,gu);var gt=[],gr=fk(this,gu.line).markedSpans;if(gr){for(var gq=0;gq<gr.length;++gq){var gs=gr[gq];if((gs.from==null||gs.from<=gu.ch)&&(gs.to==null||gs.to>=gu.ch)){gt.push(gs.marker.parent||gs.marker)}}}return gt},findMarks:function(gu,gt,gq){gu=fP(this,gu);gt=fP(this,gt);var gr=[],gs=gu.line;this.iter(gu.line,gt.line+1,function(gv){var gx=gv.markedSpans;if(gx){for(var gw=0;gw<gx.length;gw++){var gy=gx[gw];if(!(gy.to!=null&&gs==gu.line&&gu.ch>=gy.to||gy.from==null&&gs!=gu.line||gy.from!=null&&gs==gt.line&&gy.from>=gt.ch)&&(!gq||gq(gy.marker))){gr.push(gy.marker.parent||gy.marker)}}}++gs});return gr},getAllMarks:function(){var gq=[];this.iter(function(gs){var gr=gs.markedSpans;if(gr){for(var gt=0;gt<gr.length;++gt){if(gr[gt].from!=null){gq.push(gr[gt].marker)}}}});return gq},posFromIndex:function(gs){var gq,gt=this.first,gr=this.lineSeparator().length;this.iter(function(gu){var gv=gu.text.length+gr;if(gv>gs){gq=gs;return true}gs-=gv;++gt});return fP(this,W(gt,gq))},indexFromPos:function(gs){gs=fP(this,gs);var gq=gs.ch;if(gs.line<this.first||gs.ch<0){return 0}var gr=this.lineSeparator().length;this.iter(this.first,gs.line,function(gt){gq+=gt.text.length+gr});return gq},copy:function(gq){var gr=new ar(a1(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep);gr.scrollTop=this.scrollTop;gr.scrollLeft=this.scrollLeft;gr.sel=this.sel;gr.extend=false;if(gq){gr.history.undoDepth=this.history.undoDepth;gr.setHistory(this.getHistory())}return gr},linkedDoc:function(gq){if(!gq){gq={}}var gt=this.first,gs=this.first+this.size;if(gq.from!=null&&gq.from>gt){gt=gq.from}if(gq.to!=null&&gq.to<gs){gs=gq.to}var gr=new ar(a1(this,gt,gs),gq.mode||this.modeOption,gt,this.lineSep);if(gq.sharedHist){gr.history=this.history}(this.linked||(this.linked=[])).push({doc:gr,sharedHist:gq.sharedHist});gr.linked=[{doc:this,isParent:true,sharedHist:gq.sharedHist}];dF(gr,eT(this));return gr},unlinkDoc:function(gr){if(gr instanceof H){gr=gr.doc}if(this.linked){for(var gs=0;gs<this.linked.length;++gs){var gt=this.linked[gs];if(gt.doc!=gr){continue}this.linked.splice(gs,1);gr.unlinkDoc(this);er(eT(this));break}}if(gr.history==this.history){var gq=[gr.id];d8(gr,function(gu){gq.push(gu.id)},true);gr.history=new f0(null);gr.history.done=bO(this.history.done,gq);gr.history.undone=bO(this.history.undone,gq)}},iterLinkedDocs:function(gq){d8(this,gq)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(gq){if(this.lineSep){return gq.split(this.lineSep)}return fY(gq)},lineSeparator:function(){return this.lineSep||"\n"}});ar.prototype.eachLine=ar.prototype.iter;var d="iter insert remove copy getEditor constructor".split(" ");for(var bJ in ar.prototype){if(ar.prototype.hasOwnProperty(bJ)&&dh(d,bJ)<0){H.prototype[bJ]=(function(gq){return function(){return gq.apply(this.doc,arguments)}})(ar.prototype[bJ])}}bx(ar);function d8(gt,gs,gr){function gq(gz,gx,gv){if(gz.linked){for(var gw=0;gw<gz.linked.length;++gw){var gu=gz.linked[gw];if(gu.doc==gx){continue}var gy=gv&&gu.sharedHist;if(gr&&!gy){continue}gs(gu.doc,gy);gq(gu.doc,gz,gy)}}}gq(gt,null,true)}function ed(gq,gr){if(gr.cm){throw new Error("This document is already in use.")}gq.doc=gr;gr.cm=gq;X(gq);bq(gq);if(!gq.options.lineWrapping){h(gq)}gq.options.mode=gr.modeOption;ah(gq)}function fk(gt,gv){gv-=gt.first;if(gv<0||gv>=gt.size){throw new Error("There is no line "+(gv+gt.first)+" in the document.")}for(var gq=gt;!gq.lines;){for(var gr=0;;++gr){var gu=gq.children[gr],gs=gu.chunkSize();if(gv<gs){gq=gu;break}gv-=gs}}return gq.lines[gv]}function gb(gs,gu,gq){var gr=[],gt=gu.line;gs.iter(gu.line,gq.line+1,function(gv){var gw=gv.text;if(gt==gq.line){gw=gw.slice(0,gq.ch)}if(gt==gu.line){gw=gw.slice(gu.ch)}gr.push(gw);++gt});return gr}function a1(gr,gt,gs){var gq=[];gr.iter(gt,gs,function(gu){gq.push(gu.text)});return gq}function gc(gr,gq){var gs=gq-gr.height;if(gs){for(var gt=gr;gt;gt=gt.parent){gt.height+=gs}}}function bM(gq){if(gq.parent==null){return null}var gu=gq.parent,gt=dh(gu.lines,gq);for(var gr=gu.parent;gr;gu=gr,gr=gr.parent){for(var gs=0;;++gs){if(gr.children[gs]==gu){break}gt+=gr.children[gs].chunkSize()}}return gt+gu.first}function bF(gs,gv){var gx=gs.first;outer:do{for(var gt=0;gt<gs.children.length;++gt){var gw=gs.children[gt],gu=gw.height;if(gv<gu){gs=gw;continue outer}gv-=gu;gx+=gw.chunkSize()}return gx}while(!gs.lines);for(var gt=0;gt<gs.lines.length;++gt){var gr=gs.lines[gt],gq=gr.height;if(gv<gq){break}gv-=gq}return gx+gt}function bL(gs){gs=x(gs);var gu=0,gr=gs.parent;for(var gt=0;gt<gr.lines.length;++gt){var gq=gr.lines[gt];if(gq==gs){break}else{gu+=gq.height}}for(var gv=gr.parent;gv;gr=gv,gv=gr.parent){for(var gt=0;gt<gv.children.length;++gt){var gw=gv.children[gt];if(gw==gr){break}else{gu+=gw.height}}}return gu}function a(gr){var gq=gr.order;if(gq==null){gq=gr.order=bg(gr.text)}return gq}function f0(gq){this.done=[];this.undone=[];this.undoDepth=Infinity;this.lastModTime=this.lastSelTime=0;this.lastOp=this.lastSelOp=null;this.lastOrigin=this.lastSelOrigin=null;this.generation=this.maxGeneration=gq||1}function du(gq,gs){var gr={from:ch(gs.from),to:cW(gs),text:gb(gq,gs.from,gs.to)};bX(gq,gr,gs.from.line,gs.to.line+1);d8(gq,function(gt){bX(gt,gr,gs.from.line,gs.to.line+1)},true);return gr}function fG(gr){while(gr.length){var gq=fL(gr);if(gq.ranges){gr.pop()}else{break}}}function eQ(gr,gq){if(gq){fG(gr.done);return fL(gr.done)}else{if(gr.done.length&&!fL(gr.done).ranges){return fL(gr.done)}else{if(gr.done.length>1&&!gr.done[gr.done.length-2].ranges){gr.done.pop();return fL(gr.done)}}}}function fS(gw,gu,gq,gt){var gs=gw.history;gs.undone.length=0;var gr=+new Date,gx;if((gs.lastOp==gt||gs.lastOrigin==gu.origin&&gu.origin&&((gu.origin.charAt(0)=="+"&&gw.cm&&gs.lastModTime>gr-gw.cm.options.historyEventDelay)||gu.origin.charAt(0)=="*"))&&(gx=eQ(gs,gs.lastOp==gt))){var gy=fL(gx.changes);if(ce(gu.from,gu.to)==0&&ce(gu.from,gy.to)==0){gy.to=cW(gu)}else{gx.changes.push(du(gw,gu))}}else{var gv=fL(gs.done);if(!gv||!gv.ranges){cM(gw.sel,gs.done)}gx={changes:[du(gw,gu)],generation:gs.generation};gs.done.push(gx);while(gs.done.length>gs.undoDepth){gs.done.shift();if(!gs.done[0].ranges){gs.done.shift()}}}gs.done.push(gq);gs.generation=++gs.maxGeneration;gs.lastModTime=gs.lastSelTime=gr;gs.lastOp=gs.lastSelOp=gt;gs.lastOrigin=gs.lastSelOrigin=gu.origin;if(!gy){aD(gw,"historyAdded")}}function bz(gu,gq,gs,gt){var gr=gq.charAt(0);return gr=="*"||gr=="+"&&gs.ranges.length==gt.ranges.length&&gs.somethingSelected()==gt.somethingSelected()&&new Date-gu.history.lastSelTime<=(gu.cm?gu.cm.options.historyEventDelay:500)}function gi(gv,gt,gq,gs){var gu=gv.history,gr=gs&&gs.origin;if(gq==gu.lastSelOp||(gr&&gu.lastSelOrigin==gr&&(gu.lastModTime==gu.lastSelTime&&gu.lastOrigin==gr||bz(gv,gr,fL(gu.done),gt)))){gu.done[gu.done.length-1]=gt}else{cM(gt,gu.done)}gu.lastSelTime=+new Date;gu.lastSelOrigin=gr;gu.lastSelOp=gq;if(gs&&gs.clearRedo!==false){fG(gu.undone)}}function cM(gr,gq){var gs=fL(gq);if(!(gs&&gs.ranges&&gs.equals(gr))){gq.push(gr)}}function bX(gr,gv,gu,gt){var gq=gv["spans_"+gr.id],gs=0;gr.iter(Math.max(gr.first,gu),Math.min(gr.first+gr.size,gt),function(gw){if(gw.markedSpans){(gq||(gq=gv["spans_"+gr.id]={}))[gs]=gw.markedSpans}++gs})}function bk(gs){if(!gs){return null}for(var gr=0,gq;gr<gs.length;++gr){if(gs[gr].marker.explicitlyCleared){if(!gq){gq=gs.slice(0,gr)}}else{if(gq){gq.push(gs[gr])}}}return !gq?gs:gq.length?gq:null}function b3(gt,gu){var gs=gu["spans_"+gt.id];if(!gs){return null}for(var gr=0,gq=[];gr<gu.text.length;++gr){gq.push(bk(gs[gr]))}return gq}function bO(gB,gt,gA){for(var gw=0,gr=[];gw<gB.length;++gw){var gs=gB[gw];if(gs.ranges){gr.push(gA?ga.prototype.deepCopy.call(gs):gs);continue}var gy=gs.changes,gz=[];gr.push({changes:gz});for(var gv=0;gv<gy.length;++gv){var gx=gy[gv],gu;gz.push({from:gx.from,to:gx.to,text:gx.text});if(gt){for(var gq in gx){if(gu=gq.match(/^spans_(\d+)$/)){if(dh(gt,Number(gu[1]))>-1){fL(gz)[gq]=gx[gq];delete gx[gq]}}}}}}return gr}function I(gt,gs,gr,gq){if(gr<gt.line){gt.line+=gq}else{if(gs<gt.line){gt.line=gs;gt.ch=0}}}function fm(gt,gv,gw,gx){for(var gs=0;gs<gt.length;++gs){var gq=gt[gs],gu=true;if(gq.ranges){if(!gq.copied){gq=gt[gs]=gq.deepCopy();gq.copied=true}for(var gr=0;gr<gq.ranges.length;gr++){I(gq.ranges[gr].anchor,gv,gw,gx);I(gq.ranges[gr].head,gv,gw,gx)}continue}for(var gr=0;gr<gq.changes.length;++gr){var gy=gq.changes[gr];if(gw<gy.from.line){gy.from=W(gy.from.line+gx,gy.from.ch);gy.to=W(gy.to.line+gx,gy.to.ch)}else{if(gv<=gy.to.line){gu=false;break}}}if(!gu){gt.splice(0,gs+1);gs=0}}}function dE(gr,gu){var gt=gu.from.line,gs=gu.to.line,gq=gu.text.length-(gs-gt)-1;fm(gr.done,gt,gs,gq);fm(gr.undone,gt,gs,gq)}var cF=H.e_preventDefault=function(gq){if(gq.preventDefault){gq.preventDefault()}else{gq.returnValue=false}};var dq=H.e_stopPropagation=function(gq){if(gq.stopPropagation){gq.stopPropagation()}else{gq.cancelBubble=true}};function bK(gq){return gq.defaultPrevented!=null?gq.defaultPrevented:gq.returnValue==false}var eu=H.e_stop=function(gq){cF(gq);dq(gq)};function L(gq){return gq.target||gq.srcElement}function fT(gr){var gq=gr.which;if(gq==null){if(gr.button&1){gq=1}else{if(gr.button&2){gq=3}else{if(gr.button&4){gq=2}}}}if(b6&&gr.ctrlKey&&gq==1){gq=3}return gq}var bW=H.on=function(gt,gr,gs){if(gt.addEventListener){gt.addEventListener(gr,gs,false)}else{if(gt.attachEvent){gt.attachEvent("on"+gr,gs)}else{var gu=gt._handlers||(gt._handlers={});var gq=gu[gr]||(gu[gr]=[]);gq.push(gs)}}};var fa=[];function en(gs,gr,gt){var gq=gs._handlers&&gs._handlers[gr];if(gt){return gq&&gq.length>0?gq.slice():fa}else{return gq||fa}}var ef=H.off=function(gu,gs,gt){if(gu.removeEventListener){gu.removeEventListener(gs,gt,false)}else{if(gu.detachEvent){gu.detachEvent("on"+gs,gt)}else{var gq=en(gu,gs,false);for(var gr=0;gr<gq.length;++gr){if(gq[gr]==gt){gq.splice(gr,1);break}}}}};var aD=H.signal=function(gu,gt){var gq=en(gu,gt,true);if(!gq.length){return}var gr=Array.prototype.slice.call(arguments,2);for(var gs=0;gs<gq.length;++gs){gq[gs].apply(null,gr)}};var by=null;function ae(gw,gu){var gq=en(gw,gu,false);if(!gq.length){return}var gs=Array.prototype.slice.call(arguments,2),gv;if(bo){gv=bo.delayedCallbacks}else{if(by){gv=by}else{gv=by=[];setTimeout(aL,0)}}function gr(gx){return function(){gx.apply(null,gs)}}for(var gt=0;gt<gq.length;++gt){gv.push(gr(gq[gt]))}}function aL(){var gq=by;by=null;for(var gr=0;gr<gq.length;++gr){gq[gr]()}}function aQ(gq,gs,gr){if(typeof gs=="string"){gs={type:gs,preventDefault:function(){this.defaultPrevented=true}}}aD(gq,gr||gs.type,gq,gs);return bK(gs)||gs.codemirrorIgnore}function V(gr){var gq=gr._handlers&&gr._handlers.cursorActivity;if(!gq){return}var gt=gr.curOp.cursorActivityHandlers||(gr.curOp.cursorActivityHandlers=[]);for(var gs=0;gs<gq.length;++gs){if(dh(gt,gq[gs])==-1){gt.push(gq[gs])}}}function fn(gr,gq){return en(gr,gq).length>0}function bx(gq){gq.prototype.on=function(gr,gs){bW(this,gr,gs)};gq.prototype.off=function(gr,gs){ef(this,gr,gs)}}var dJ=30;var b9=H.Pass={toString:function(){return"CodeMirror.Pass"}};var Z={scroll:false},M={origin:"*mouse"},cV={origin:"+move"};function gp(){this.id=null}gp.prototype.set=function(gq,gr){clearTimeout(this.id);this.id=setTimeout(gr,gq)};var bS=H.countColumn=function(gt,gr,gv,gw,gs){if(gr==null){gr=gt.search(/[^\s\u00a0]/);if(gr==-1){gr=gt.length}}for(var gu=gw||0,gx=gs||0;;){var gq=gt.indexOf("\t",gu);if(gq<0||gq>=gr){return gx+(gr-gu)}gx+=gq-gu;gx+=gv-(gx%gv);gu=gq+1}};var et=H.findColumn=function(gu,gt,gv){for(var gw=0,gs=0;;){var gr=gu.indexOf("\t",gw);if(gr==-1){gr=gu.length}var gq=gr-gw;if(gr==gu.length||gs+gq>=gt){return gw+Math.min(gq,gt-gs)}gs+=gr-gw;gs+=gv-(gs%gv);gw=gr+1;if(gs>=gt){return gw}}};var aZ=[""];function co(gq){while(aZ.length<=gq){aZ.push(fL(aZ)+" ")}return aZ[gq]}function fL(gq){return gq[gq.length-1]}var dL=function(gq){gq.select()};if(e5){dL=function(gq){gq.selectionStart=0;gq.selectionEnd=gq.value.length}}else{if(dK){dL=function(gr){try{gr.select()}catch(gq){}}}}function dh(gs,gq){for(var gr=0;gr<gs.length;++gr){if(gs[gr]==gq){return gr}}return -1}function bR(gt,gs){var gq=[];for(var gr=0;gr<gt.length;gr++){gq[gr]=gs(gt[gr],gr)}return gq}function f1(){}function cj(gs,gq){var gr;if(Object.create){gr=Object.create(gs)}else{f1.prototype=gs;gr=new f1()}if(gq){aM(gq,gr)}return gr}function aM(gs,gr,gq){if(!gr){gr={}}for(var gt in gs){if(gs.hasOwnProperty(gt)&&(gq!==false||!gr.hasOwnProperty(gt))){gr[gt]=gs[gt]}}return gr}function cu(gr){var gq=Array.prototype.slice.call(arguments,1);return function(){return gr.apply(null,gq)}}var bb=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;var fI=H.isWordChar=function(gq){return/\w/.test(gq)||gq>"\x80"&&(gq.toUpperCase()!=gq.toLowerCase()||bb.test(gq))};function cz(gq,gr){if(!gr){return fI(gq)}if(gr.source.indexOf("\\w")>-1&&fI(gq)){return true}return gr.test(gq)}function eY(gq){for(var gr in gq){if(gq.hasOwnProperty(gr)&&gq[gr]){return false}}return true}var eN=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function fu(gq){return gq.charCodeAt(0)>=768&&eN.test(gq)}function f9(gq,gu,gt,gs){var gv=document.createElement(gq);if(gt){gv.className=gt}if(gs){gv.style.cssText=gs}if(typeof gu=="string"){gv.appendChild(document.createTextNode(gu))}else{if(gu){for(var gr=0;gr<gu.length;++gr){gv.appendChild(gu[gr])}}}return gv}var ck;if(document.createRange){ck=function(gt,gu,gr,gq){var gs=document.createRange();gs.setEnd(gq||gt,gr);gs.setStart(gt,gu);return gs}}else{ck=function(gs,gu,gq){var gr=document.body.createTextRange();try{gr.moveToElementText(gs.parentNode)}catch(gt){return gr}gr.collapse(true);gr.moveEnd("character",gq);gr.moveStart("character",gu);return gr}}function d2(gr){for(var gq=gr.childNodes.length;gq>0;--gq){gr.removeChild(gr.firstChild)}return gr}function bQ(gq,gr){return d2(gq).appendChild(gr)}var gh=H.contains=function(gq,gr){if(gr.nodeType==3){gr=gr.parentNode}if(gq.contains){return gq.contains(gr)}do{if(gr.nodeType==11){gr=gr.host}if(gr==gq){return true}}while(gr=gr.parentNode)};function dO(){var gq=document.activeElement;while(gq&&gq.root&&gq.root.activeElement){gq=gq.root.activeElement}return gq}if(dK&&k<11){dO=function(){try{return document.activeElement}catch(gq){return document.body}}}function S(gq){return new RegExp("(^|\\s)"+gq+"(?:$|\\s)\\s*")}var f=H.rmClass=function(gs,gq){var gt=gs.className;var gr=S(gq).exec(gt);if(gr){var gu=gt.slice(gr.index+gr[0].length);gs.className=gt.slice(0,gr.index)+(gu?gr[1]+gu:"")}};var fF=H.addClass=function(gr,gq){var gs=gr.className;if(!S(gq).test(gs)){gr.className+=(gs?" ":"")+gq}};function fZ(gs,gq){var gr=gs.split(" ");for(var gt=0;gt<gr.length;gt++){if(gr[gt]&&!S(gr[gt]).test(gq)){gq+=" "+gr[gt]}}return gq}function az(gt){if(!document.body.getElementsByClassName){return}var gs=document.body.getElementsByClassName("CodeMirror");for(var gr=0;gr<gs.length;gr++){var gq=gs[gr].CodeMirror;if(gq){gt(gq)}}}var cB=false;function bi(){if(cB){return}fJ();cB=true}function fJ(){var gq;bW(window,"resize",function(){if(gq==null){gq=setTimeout(function(){gq=null;az(aS)},100)}});bW(window,"blur",function(){az(aU)})}var eP=function(){if(dK&&k<9){return false}var gq=f9("div");return"draggable" in gq||"dragDrop" in gq}();var fR;function bm(gq){if(fR==null){var gs=f9("span","\u200b");bQ(gq,f9("span",[gs,document.createTextNode("x")]));if(gq.firstChild.offsetHeight!=0){fR=gs.offsetWidth<=1&&gs.offsetHeight>2&&!(dK&&k<8)}}var gr=fR?f9("span","\u200b"):f9("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px");gr.setAttribute("cm-text","");return gr}var fQ;function bN(gt){if(fQ!=null){return fQ}var gq=bQ(gt,document.createTextNode("A\u062eA"));var gs=ck(gq,0,1).getBoundingClientRect();if(!gs||gs.left==gs.right){return false}var gr=ck(gq,1,2).getBoundingClientRect();return fQ=(gr.right-gs.right<3)}var fY=H.splitLines="\n\nb".split(/\n/).length!=3?function(gv){var gw=0,gq=[],gu=gv.length;while(gw<=gu){var gt=gv.indexOf("\n",gw);if(gt==-1){gt=gv.length}var gs=gv.slice(gw,gv.charAt(gt-1)=="\r"?gt-1:gt);var gr=gs.indexOf("\r");if(gr!=-1){gq.push(gs.slice(0,gr));gw+=gr+1}else{gq.push(gs);gw=gt+1}}return gq}:function(gq){return gq.split(/\r\n?|\n/)};var br=window.getSelection?function(gr){try{return gr.selectionStart!=gr.selectionEnd}catch(gq){return false}}:function(gs){try{var gq=gs.ownerDocument.selection.createRange()}catch(gr){}if(!gq||gq.parentElement()!=gs){return false}return gq.compareEndPoints("StartToEnd",gq)!=0};var c9=(function(){var gq=f9("div");if("oncopy" in gq){return true}gq.setAttribute("oncopy","return;");return typeof gq.oncopy=="function"})();var fb=null;function aJ(gr){if(fb!=null){return fb}var gs=bQ(gr,f9("span","x"));var gt=gs.getBoundingClientRect();var gq=ck(gs,0,1).getBoundingClientRect();return fb=Math.abs(gt.left-gq.left)>1}var fl=H.keyNames={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};(function(){for(var gq=0;gq<10;gq++){fl[gq+48]=fl[gq+96]=String(gq)}for(var gq=65;gq<=90;gq++){fl[gq]=String.fromCharCode(gq)}for(var gq=1;gq<=12;gq++){fl[gq+111]=fl[gq+63235]="F"+gq}})();function d5(gq,gw,gv,gu){if(!gq){return gu(gw,gv,"ltr")}var gt=false;for(var gs=0;gs<gq.length;++gs){var gr=gq[gs];if(gr.from<gv&&gr.to>gw||gw==gv&&gr.to==gw){gu(Math.max(gr.from,gw),Math.min(gr.to,gv),gr.level==1?"rtl":"ltr");gt=true}}if(!gt){gu(gw,gv,"ltr")}}function dy(gq){return gq.level%2?gq.to:gq.from}function gk(gq){return gq.level%2?gq.from:gq.to}function cD(gr){var gq=a(gr);return gq?dy(gq[0]):0}function cR(gr){var gq=a(gr);if(!gq){return gr.text.length}return gk(fL(gq))}function bs(gr,gu){var gs=fk(gr.doc,gu);var gv=x(gs);if(gv!=gs){gu=bM(gv)}var gq=a(gv);var gt=!gq?0:gq[0].level%2?cR(gv):cD(gv);return W(gu,gt)}function dP(gs,gv){var gr,gt=fk(gs.doc,gv);while(gr=ex(gt)){gt=gr.find(1,true).line;gv=null}var gq=a(gt);var gu=!gq?gt.text.length:gq[0].level%2?cD(gt):cR(gt);return W(gv==null?bM(gt):gv,gu)}function dI(gr,gw){var gv=bs(gr,gw.line);var gs=fk(gr.doc,gv.line);var gq=a(gs);if(!gq||gq[0].level==0){var gu=Math.max(0,gs.text.search(/\S/));var gt=gw.line==gv.line&&gw.ch<=gu&&gw.ch;return W(gv.line,gt?0:gu)}return gv}function am(gr,gs,gq){var gt=gr[0].level;if(gs==gt){return true}if(gq==gt){return false}return gs<gq}var e6;function aF(gq,gu){e6=null;for(var gr=0,gs;gr<gq.length;++gr){var gt=gq[gr];if(gt.from<gu&&gt.to>gu){return gr}if((gt.from==gu||gt.to==gu)){if(gs==null){gs=gr}else{if(am(gq,gt.level,gq[gs].level)){if(gt.from!=gt.to){e6=gs}return gr}else{if(gt.from!=gt.to){e6=gr}return gs}}}}return gs}function fj(gq,gt,gr,gs){if(!gs){return gt+gr}do{gt+=gr}while(gt>0&&fu(gq.text.charAt(gt)));return gt}function u(gq,gx,gs,gt){var gu=a(gq);if(!gu){return ai(gq,gx,gs,gt)}var gw=aF(gu,gx),gr=gu[gw];var gv=fj(gq,gx,gr.level%2?-gs:gs,gt);for(;;){if(gv>gr.from&&gv<gr.to){return gv}if(gv==gr.from||gv==gr.to){if(aF(gu,gv)==gw){return gv}gr=gu[gw+=gs];return(gs>0)==gr.level%2?gr.to:gr.from}else{gr=gu[gw+=gs];if(!gr){return null}if((gs>0)==gr.level%2){gv=fj(gq,gr.to,-1,gt)}else{gv=fj(gq,gr.from,1,gt)}}}}function ai(gq,gu,gr,gs){var gt=gu+gr;if(gs){while(gt>0&&fu(gq.text.charAt(gt))){gt+=gr}}return gt<0||gt>gq.text.length?null:gt}var bg=(function(){var gw="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN";var gu="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm";function gt(gA){if(gA<=247){return gw.charAt(gA)}else{if(1424<=gA&&gA<=1524){return"R"}else{if(1536<=gA&&gA<=1773){return gu.charAt(gA-1536)}else{if(1774<=gA&&gA<=2220){return"r"}else{if(8192<=gA&&gA<=8203){return"w"}else{if(gA==8204){return"b"}else{return"L"}}}}}}}var gq=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;var gz=/[stwN]/,gs=/[LRr]/,gr=/[Lb1n]/,gv=/[1n]/;var gy="L";function gx(gC,gB,gA){this.level=gC;this.from=gB;this.to=gA}return function(gK){if(!gq.test(gK)){return false}var gQ=gK.length,gG=[];for(var gP=0,gC;gP<gQ;++gP){gG.push(gC=gt(gK.charCodeAt(gP)))}for(var gP=0,gJ=gy;gP<gQ;++gP){var gC=gG[gP];if(gC=="m"){gG[gP]=gJ}else{gJ=gC}}for(var gP=0,gA=gy;gP<gQ;++gP){var gC=gG[gP];if(gC=="1"&&gA=="r"){gG[gP]="n"}else{if(gs.test(gC)){gA=gC;if(gC=="r"){gG[gP]="R"}}}}for(var gP=1,gJ=gG[0];gP<gQ-1;++gP){var gC=gG[gP];if(gC=="+"&&gJ=="1"&&gG[gP+1]=="1"){gG[gP]="1"}else{if(gC==","&&gJ==gG[gP+1]&&(gJ=="1"||gJ=="n")){gG[gP]=gJ}}gJ=gC}for(var gP=0;gP<gQ;++gP){var gC=gG[gP];if(gC==","){gG[gP]="N"}else{if(gC=="%"){for(var gD=gP+1;gD<gQ&&gG[gD]=="%";++gD){}var gR=(gP&&gG[gP-1]=="!")||(gD<gQ&&gG[gD]=="1")?"1":"N";for(var gN=gP;gN<gD;++gN){gG[gN]=gR}gP=gD-1}}}for(var gP=0,gA=gy;gP<gQ;++gP){var gC=gG[gP];if(gA=="L"&&gC=="1"){gG[gP]="L"}else{if(gs.test(gC)){gA=gC}}}for(var gP=0;gP<gQ;++gP){if(gz.test(gG[gP])){for(var gD=gP+1;gD<gQ&&gz.test(gG[gD]);++gD){}var gH=(gP?gG[gP-1]:gy)=="L";var gB=(gD<gQ?gG[gD]:gy)=="L";var gR=gH||gB?"L":"R";for(var gN=gP;gN<gD;++gN){gG[gN]=gR}gP=gD-1}}var gO=[],gL;for(var gP=0;gP<gQ;){if(gr.test(gG[gP])){var gE=gP;for(++gP;gP<gQ&&gr.test(gG[gP]);++gP){}gO.push(new gx(0,gE,gP))}else{var gF=gP,gI=gO.length;for(++gP;gP<gQ&&gG[gP]!="L";++gP){}for(var gN=gF;gN<gP;){if(gv.test(gG[gN])){if(gF<gN){gO.splice(gI,0,new gx(1,gF,gN))}var gM=gN;for(++gN;gN<gP&&gv.test(gG[gN]);++gN){}gO.splice(gI,0,new gx(2,gM,gN));gF=gN}else{++gN}}if(gF<gP){gO.splice(gI,0,new gx(1,gF,gP))}}}if(gO[0].level==1&&(gL=gK.match(/^\s+/))){gO[0].from=gL[0].length;gO.unshift(new gx(0,0,gL[0].length))}if(fL(gO).level==1&&(gL=gK.match(/\s+$/))){fL(gO).to-=gL[0].length;gO.push(new gx(0,gQ-gL[0].length,gQ))}if(gO[0].level==2){gO.unshift(new gx(1,gO[0].to,gO[0].to))}if(gO[0].level!=fL(gO).level){gO.push(new gx(gO[0].level,gQ,gQ))}return gO}})();H.version="5.15.2";return H});!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)}(function(b){b.defineMode("rpm-changes",function(){var e=/^-+$/,d=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)  ?\d{1,2} \d{2}:\d{2}(:\d{2})? [A-Z]{3,4} \d{4} - /,f=/^[\w+.-]+@[\w.-]+/;return{token:function(a){if(a.sol()){if(a.match(e)){return"tag"}if(a.match(d)){return"tag"}}return a.match(f)?"string":(a.next(),null)}}}),b.defineMIME("text/x-rpm-changes","rpm-changes"),b.defineMode("rpm-spec",function(){var h=/^(i386|i586|i686|x86_64|ppc64le|ppc64|ppc|ia64|s390x|s390|sparc64|sparcv9|sparc|noarch|alphaev6|alpha|hppa|mipsel)/,g=/^[a-zA-Z0-9()]+:/,l=/^%(debug_package|package|description|prep|build|install|files|clean|changelog|preinstall|preun|postinstall|postun|pretrans|posttrans|pre|post|triggerin|triggerun|verifyscript|check|triggerpostun|triggerprein|trigger)/,k=/^%(ifnarch|ifarch|if)/,j=/^%(else|endif)/,i=/^(\!|\?|\<\=|\<|\>\=|\>|\=\=|\&\&|\|\|)/;return{startState:function(){return{controlFlow:!1,macroParameters:!1,section:!1}},token:function(d,c){var a=d.peek();if("#"==a){return d.skipToEnd(),"comment"}if(d.sol()){if(d.match(g)){return"header"}if(d.match(l)){return"atom"}}if(d.match(/^\$\w+/)){return"def"}if(d.match(/^\$\{\w+\}/)){return"def"}if(d.match(j)){return"keyword"}if(d.match(k)){return c.controlFlow=!0,"keyword"}if(c.controlFlow){if(d.match(i)){return"operator"}if(d.match(/^(\d+)/)){return"number"}d.eol()&&(c.controlFlow=!1)}if(d.match(h)){return d.eol()&&(c.controlFlow=!1),"number"}if(d.match(/^%[\w]+/)){return d.match(/^\(/)&&(c.macroParameters=!0),"keyword"}if(c.macroParameters){if(d.match(/^\d+/)){return"number"}if(d.match(/^\)/)){return c.macroParameters=!1,"keyword"}}return d.match(/^%\{\??[\w \-\:\!]+\}/)?(d.eol()&&(c.controlFlow=!1),"def"):(d.next(),null)}}}),b.defineMIME("text/x-rpm-spec","rpm-spec")});!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)}(function(e){function d(h,g,k){var i,j=h.getWrapperElement();return i=j.appendChild(document.createElement("div")),i.className=k?"CodeMirror-dialog CodeMirror-dialog-bottom":"CodeMirror-dialog CodeMirror-dialog-top","string"==typeof g?i.innerHTML=g:i.appendChild(g),i}function f(g,c){g.state.currentNotificationClose&&g.state.currentNotificationClose(),g.state.currentNotificationClose=c}e.defineExtension("openDialog",function(r,q,p){function c(g){if("string"==typeof g){b.value=g}else{if(n){return}n=!0,o.parentNode.removeChild(o),m.focus(),p.onClose&&p.onClose(o)}}p||(p={}),f(this,null);var a,o=d(this,r,p.bottom),n=!1,m=this,b=o.getElementsByTagName("input")[0];return b?(b.focus(),p.value&&(b.value=p.value,p.selectValueOnOpen!==!1&&b.select()),p.onInput&&e.on(b,"input",function(g){p.onInput(g,b.value,c)}),p.onKeyUp&&e.on(b,"keyup",function(g){p.onKeyUp(g,b.value,c)}),e.on(b,"keydown",function(g){p&&p.onKeyDown&&p.onKeyDown(g,b.value,c)||((27==g.keyCode||p.closeOnEnter!==!1&&13==g.keyCode)&&(b.blur(),e.e_stop(g),c()),13==g.keyCode&&q(b.value,g))}),p.closeOnBlur!==!1&&e.on(b,"blur",c)):(a=o.getElementsByTagName("button")[0])&&(e.on(a,"click",function(){c(),m.focus()}),p.closeOnBlur!==!1&&e.on(a,"blur",c),a.focus()),c}),e.defineExtension("openConfirm",function(v,u,t){function c(){q||(q=!0,s.parentNode.removeChild(s),p.focus())}f(this,null);var s=d(this,v,t&&t.bottom),r=s.getElementsByTagName("button"),q=!1,p=this,o=1;r[0].focus();for(var b=0;b<r.length;++b){var a=r[b];!function(g){e.on(a,"click",function(h){e.e_preventDefault(h),c(),g&&g(p)})}(u[b]),e.on(a,"blur",function(){--o,setTimeout(function(){o<=0&&c()},200)}),e.on(a,"focus",function(){++o})}}),e.defineExtension("openNotification",function(n,m){function a(){k||(k=!0,clearTimeout(c),l.parentNode.removeChild(l))}f(this,a);var c,l=d(this,n,m&&m.bottom),k=!1,b=m&&"undefined"!==typeof m.duration?m.duration:5000;return e.on(l,"click",function(g){e.e_preventDefault(g),a()}),b&&(c=setTimeout(a,b)),a})});!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror"),require("./searchcursor"),require("../dialog/dialog")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./searchcursor","../dialog/dialog"],b):b(CodeMirror)}(function(P){function O(d,c){return"string"==typeof d?d=new RegExp(d.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),c?"gi":"g"):d.global||(d=new RegExp(d.source,d.ignoreCase?"gi":"g")),{token:function(a){d.lastIndex=a.pos;var e=d.exec(a.string);return e&&e.index==a.pos?(a.pos+=e[0].length||1,"searching"):void (e?a.pos=e.index:a.skipToEnd())}}}function N(){this.posFrom=this.posTo=this.lastQuery=this.query=null,this.overlay=null}function M(b){return b.state.search||(b.state.search=new N)}function L(b){return"string"==typeof b&&b==b.toLowerCase()}function K(e,d,f){return e.getSearchCursor(d,f,L(d))}function J(f,e,h,g){f.openDialog(e,g,{value:h,selectValueOnOpen:!0,closeOnEnter:!1,onClose:function(){A(f)}})}function I(g,f,j,i,h){g.openDialog?g.openDialog(f,h,{value:i,selectValueOnOpen:!0}):h(prompt(j,i))}function H(f,e,h,g){f.openConfirm?f.openConfirm(e,g):confirm(h)&&g[0]()}function G(b){return b.replace(/\\(.)/g,function(d,c){return"n"==c?"\n":"r"==c?"\r":c})}function F(e){var d=e.match(/^\/(.*)\/([a-z]*)$/);if(d){try{e=new RegExp(d[1],-1==d[2].indexOf("i")?"":"i")}catch(f){}}else{e=G(e)}return("string"==typeof e?""==e:e.test(""))&&(e=/x^/),e}function D(b,f,e){f.queryText=e,f.query=F(e),b.removeOverlay(f.overlay,L(f.query)),f.overlay=O(f.query,L(f.query)),b.addOverlay(f.overlay),b.showMatchesOnScrollbar&&(f.annotate&&(f.annotate.clear(),f.annotate=null),f.annotate=b.showMatchesOnScrollbar(f.query,L(f.query)))}function C(a,l,k){var h=M(a);if(h.query){return B(a,l)}var g=a.getSelection()||h.lastQuery;if(k&&a.openDialog){var d=null;J(a,E,g,function(e,b){P.e_stop(b),e&&(e!=h.queryText&&D(a,h,e),d&&(d.style.opacity=1),B(a,b.shiftKey,function(f,j){var i;j.line<3&&document.querySelector&&(i=a.display.wrapper.querySelector(".CodeMirror-dialog"))&&i.getBoundingClientRect().bottom-4>a.cursorCoords(j,"window").top&&((d=i).style.opacity=0.4)}))})}else{I(a,E,"Search for:",g,function(b){b&&!h.query&&a.operation(function(){D(a,h,b),h.posFrom=h.posTo=a.getCursor(),B(a,l)})})}}function B(a,f,d){a.operation(function(){var c=M(a),b=K(a,c.query,f?c.posFrom:c.posTo);(b.find(f)||(b=K(a,c.query,f?P.Pos(a.lastLine()):P.Pos(a.firstLine(),0)),b.find(f)))&&(a.setSelection(b.from(),b.to()),a.scrollIntoView({from:b.from(),to:b.to()},20),c.posFrom=b.from(),c.posTo=b.to(),d&&d(b.from(),b.to()))})}function A(b){b.operation(function(){var a=M(b);a.lastQuery=a.query,a.query&&(a.query=a.queryText=null,b.removeOverlay(a.overlay),a.annotate&&(a.annotate.clear(),a.annotate=null))})}function w(e,d,f){e.operation(function(){for(var b=K(e,d);b.findNext();){if("string"!=typeof d){var a=e.getRange(b.from(),b.to()).match(d);b.replace(f.replace(/\$(\d)/g,function(g,c){return a[c]}))}else{b.replace(f)}}})}function v(f,d){if(!f.getOption("readOnly")){var h=f.getSelection()||M(f).lastQuery,g=d?"Replace all:":"Replace:";I(f,g+z,g,h,function(a){a&&(a=F(a),I(f,y,"Replace with:","",function(j){if(j=G(j),d){w(f,a,j)}else{A(f);var i=K(f,a,f.getCursor()),c=function(){var k,e=i.from();!(k=i.findNext())&&(i=K(f,a),!(k=i.findNext())||e&&i.from().line==e.line&&i.from().ch==e.ch)||(f.setSelection(i.from(),i.to()),f.scrollIntoView({from:i.from(),to:i.to()}),H(f,x,"Replace?",[function(){b(k)},c,function(){w(f,a,j)}]))},b=function(e){i.replace("string"==typeof a?j:j.replace(/\$(\d)/g,function(k,l){return e[l]})),c()};c()}}))})}}var E='Search: <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">(Use /re/ syntax for regexp search)</span>',z=' <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">(Use /re/ syntax for regexp search)</span>',y='With: <input type="text" style="width: 10em" class="CodeMirror-search-field"/>',x="Replace? <button>Yes</button> <button>No</button> <button>All</button> <button>Stop</button>";P.commands.find=function(b){A(b),C(b)},P.commands.findPersistent=function(b){A(b),C(b,!1,!0)},P.commands.findNext=C,P.commands.findPrev=function(b){C(b,!0)},P.commands.clearSearch=A,P.commands.replace=v,P.commands.replaceAll=function(b){v(b,!0)}});!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)}(function(f){function h(b,p,o,n){if(this.atOccurrence=!1,this.doc=b,null==n&&"string"==typeof p&&(n=!1),o=o?b.clipPos(o):e(0,0),this.pos={from:o,to:o},"string"!=typeof p){p.global||(p=new RegExp(p.source,p.ignoreCase?"ig":"g")),this.matches=function(v,u){if(v){p.lastIndex=0;for(var r,q,t=b.getLine(u.line).slice(0,u.ch),s=0;;){p.lastIndex=s;var c=p.exec(t);if(!c){break}if(r=c,q=r.index,s=r.index+(r[0].length||1),s==t.length){break}}var a=r&&r[0].length||0;a||(0==q&&0==t.length?r=void 0:q!=b.getLine(u.line).length&&a++)}else{p.lastIndex=u.ch;var t=b.getLine(u.line),r=p.exec(t),a=r&&r[0].length||0,q=r&&r.index;q+a==t.length||a||(a=1)}return r&&a?{from:e(u.line,q),to:e(u.line,q+a),match:r}:void 0}}else{var m=p;n&&(p=p.toLowerCase());var l=n?function(c){return c.toLowerCase()}:function(c){return c},k=p.split("\n");if(1==k.length){this.matches=p.length?function(s,r){if(s){var q=b.getLine(r.line).slice(0,r.ch),c=l(q),a=c.lastIndexOf(p);if(a>-1){return a=g(q,c,a),{from:e(r.line,a),to:e(r.line,a+m.length)}}}else{var q=b.getLine(r.line).slice(r.ch),c=l(q),a=c.indexOf(p);if(a>-1){return a=g(q,c,a)+r.ch,{from:e(r.line,a),to:e(r.line,a+m.length)}}}}:function(){}}else{var d=m.split("\n");this.matches=function(v,u){var t=k.length-1;if(v){if(u.line-(k.length-1)<b.firstLine()){return}if(l(b.getLine(u.line).slice(0,d[t].length))!=k[k.length-1]){return}for(var s=e(u.line,d[t].length),r=u.line-1,q=t-1;q>=1;--q,--r){if(k[q]!=l(b.getLine(r))){return}}var j=b.getLine(r),i=j.length-d[0].length;if(l(j.slice(i))!=k[0]){return}return{from:e(r,i),to:s}}if(!(u.line+(k.length-1)>b.lastLine())){var j=b.getLine(u.line),i=j.length-d[0].length;if(l(j.slice(i))==k[0]){for(var a=e(u.line,i),r=u.line+1,q=1;q<t;++q,++r){if(k[q]!=l(b.getLine(r))){return}}if(l(b.getLine(r).slice(0,d[t].length))==k[t]){return{from:a,to:e(r,d[t].length)}}}}}}}}function g(j,i,m){if(j.length==i.length){return m}for(var l=Math.min(m,j.length);;){var k=j.slice(0,l).toLowerCase().length;if(k<m){++l}else{if(!(k>m)){return l}--l}}}var e=f.Pos;h.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(b){function j(c){var m=e(c,0);return l.pos={from:m,to:m},l.atOccurrence=!1,!1}for(var l=this,k=this.doc.clipPos(b?this.pos.from:this.pos.to);;){if(this.pos=this.matches(b,k)){return this.atOccurrence=!0,this.pos.match||!0}if(b){if(!k.line){return j(0)}k=e(k.line-1,this.doc.getLine(k.line-1).length)}else{var i=this.doc.lineCount();if(k.line==i-1){return j(i)}k=e(k.line+1,0)}}},from:function(){return this.atOccurrence?this.pos.from:void 0},to:function(){return this.atOccurrence?this.pos.to:void 0},replace:function(i,b){if(this.atOccurrence){var a=f.splitLines(i);this.doc.replaceRange(a,this.pos.from,this.pos.to,b),this.pos.to=e(this.pos.from.line+a.length-1,a[a.length-1].length+(1==a.length?this.pos.from.ch:0))}}},f.defineExtension("getSearchCursor",function(i,c,j){return new h(this.doc,i,c,j)}),f.defineDocExtension("getSearchCursor",function(i,c,j){return new h(this,i,c,j)}),f.defineExtension("selectMatches",function(a,k){for(var j=[],i=this.getSearchCursor(a,this.getCursor("from"),k);i.findNext()&&!(f.cmpPos(i.to(),this.getCursor("to"))>0);){j.push({anchor:i.from(),head:i.to()})}j.length&&this.setSelections(j,0)})});!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror"),require("../dialog/dialog")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../dialog/dialog"],b):b(CodeMirror)}(function(f){function e(j,i,m,l,k){j.openDialog?j.openDialog(i,k,{value:l,selectValueOnOpen:!0}):k(prompt(m,l))}function g(i,d){var j=Number(d);return/^[-+]/.test(d)?i.getCursor().line+j:j-1}var h='Jump to line: <input type="text" style="width: 10em" class="CodeMirror-search-field"/> <span style="color: #888" class="CodeMirror-search-hint">(Use line:column or scroll% syntax)</span>';f.commands.jumpToLine=function(b){var c=b.getCursor();e(b,h,"Jump to line:",c.line+1+":"+c.ch,function(a){if(a){var i;if(i=/^\s*([\+\-]?\d+)\s*\:\s*(\d+)\s*$/.exec(a)){b.setCursor(g(b,i[1]),Number(i[2]))}else{if(i=/^\s*([\+\-]?\d+(\.\d+)?)\%\s*/.exec(a)){var d=Math.round(b.lineCount()*Number(i[1])/100);/^[-+]/.test(i[1])&&(d=c.line+d+1),b.setCursor(d-1,c.ch)}else{(i=/^\s*\:?\s*([\+\-]?\d+)\s*/.exec(a))&&b.setCursor(g(b,i[1]),c.ch)}}}})},f.keyMap["default"]["Alt-G"]="jumpToLine"});!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror"),require("./searchcursor"),require("../scroll/annotatescrollbar")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./searchcursor","../scroll/annotatescrollbar"],b):b(CodeMirror)}(function(f){function e(j,i,o,n){this.cm=j,this.options=n;var m={listenForChanges:!1};for(var l in n){m[l]=n[l]}m.className||(m.className="CodeMirror-search-match"),this.annotation=j.annotateScrollbar(m),this.query=i,this.caseFold=o,this.gap={from:j.firstLine(),to:j.lastLine()+1},this.matches=[],this.update=null,this.findMatches(),this.annotation.update(this.matches);var k=this;j.on("change",this.changeHandler=function(d,c){k.onChange(c)})}function g(i,d,j){return i<=d?i:Math.max(d,i+j)}f.defineExtension("showMatchesOnScrollbar",function(b,j,i){return"string"==typeof i&&(i={className:i}),i||(i={}),new e(this,b,j,i)});var h=1000;e.prototype.findMatches=function(){if(this.gap){for(var a=0;a<this.matches.length;a++){var j=this.matches[a];if(j.from.line>=this.gap.to){break}j.to.line>=this.gap.from&&this.matches.splice(a--,1)}for(var i=this.cm.getSearchCursor(this.query,f.Pos(this.gap.from,0),this.caseFold),c=this.options&&this.options.maxMatches||h;i.findNext();){var j={from:i.from(),to:i.to()};if(j.from.line>=this.gap.to){break}if(this.matches.splice(a++,0,j),this.matches.length>c){break}}this.gap=null}},e.prototype.onChange=function(r){var q=r.from.line,p=f.changeEnd(r).line,o=p-r.to.line;if(this.gap?(this.gap.from=Math.min(g(this.gap.from,q,o),r.from.line),this.gap.to=Math.max(g(this.gap.to,q,o),r.from.line)):this.gap={from:r.from.line,to:p+1},o){for(var n=0;n<this.matches.length;n++){var m=this.matches[n],l=g(m.from.line,q,o);l!=m.from.line&&(m.from=f.Pos(l,m.from.ch));var d=g(m.to.line,q,o);d!=m.to.line&&(m.to=f.Pos(d,m.to.ch))}}clearTimeout(this.update);var a=this;this.update=setTimeout(function(){a.updateAfterChange()},250)},e.prototype.updateAfterChange=function(){this.findMatches(),this.annotation.update(this.matches)},e.prototype.clear=function(){this.cm.off("change",this.changeHandler),this.annotation.clear()}});!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror"),require("./matchesonscrollbar")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./matchesonscrollbar"],b):b(CodeMirror)}(function(z){function u(b){"object"==typeof b&&(this.minChars=b.minChars,this.style=b.style,this.showToken=b.showToken,this.delay=b.delay,this.wordsOnly=b.wordsOnly,this.annotateScrollbar=b.annotateScrollbar),null==this.style&&(this.style=x),null==this.minChars&&(this.minChars=y),null==this.delay&&(this.delay=w),null==this.wordsOnly&&(this.wordsOnly=v),this.overlay=this.timeout=null,this.matchesonscroll=null}function t(d){var c=d.state.matchHighlighter;clearTimeout(c.timeout),c.timeout=setTimeout(function(){q(d)},c.delay)}function s(h,g,l,k){var j=h.state.matchHighlighter;if(h.addOverlay(j.overlay=n(g,l,k)),j.annotateScrollbar){var i=l?new RegExp("\\b"+g+"\\b"):g;j.matchesonscroll=h.showMatchesOnScrollbar(i,!0,{className:"CodeMirror-selection-highlight-scrollbar"})}}function r(d){var c=d.state.matchHighlighter;c.overlay&&(d.removeOverlay(c.overlay),c.overlay=null,c.annotateScrollbar&&(c.matchesonscroll.clear(),c.matchesonscroll=null))}function q(b){b.operation(function(){var E=b.state.matchHighlighter;if(r(b),!b.somethingSelected()&&E.showToken){for(var D=E.showToken===!0?/[\w$]/:E.showToken,C=b.getCursor(),B=b.getLine(C.line),A=C.ch,k=A;A&&D.test(B.charAt(A-1));){--A}for(;k<B.length&&D.test(B.charAt(k));){++k}return void (A<k&&s(b,B.slice(A,k),D,E.style))}var i=b.getCursor("from"),h=b.getCursor("to");if(i.line==h.line&&(!E.wordsOnly||p(b,i,h))){var a=b.getRange(i,h).replace(/^\s+|\s+$/g,"");a.length>=E.minChars&&s(b,a,!1,E.style)}})}function p(h,g,l){var k=h.getRange(g,l);if(null!==k.match(/^\w+$/)){if(g.ch>0){var j={line:g.line,ch:g.ch-1},i=h.getRange(j,g);if(null===i.match(/\W/)){return !1}}if(l.ch<h.getLine(g.line).length){var j={line:l.line,ch:l.ch+1},i=h.getRange(l,j);if(null===i.match(/\W/)){return !1}}return !0}return !1}function o(d,c){return(!d.start||!c.test(d.string.charAt(d.start-1)))&&(d.pos==d.string.length||!c.test(d.string.charAt(d.pos)))}function n(e,d,f){return{token:function(a){return !a.match(e)||d&&!o(a,d)?(a.next(),void (a.skipTo(e.charAt(0))||a.skipToEnd())):f}}}var y=2,x="matchhighlight",w=100,v=!1;z.defineOption("highlightSelectionMatches",!1,function(a,f,e){e&&e!=z.Init&&(r(a),clearTimeout(a.state.matchHighlighter.timeout),a.state.matchHighlighter=null,a.off("cursorActivity",t)),f&&(a.state.matchHighlighter=new u(f),q(a),a.on("cursorActivity",t))})});!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)}(function(d){function c(f,e){function h(b){clearTimeout(g.doRedraw),g.doRedraw=setTimeout(function(){g.redraw()},b)}this.cm=f,this.options=e,this.buttonHeight=e.scrollButtonHeight||f.getOption("scrollButtonHeight"),this.annotations=[],this.doRedraw=this.doUpdate=null,this.div=f.getWrapperElement().appendChild(document.createElement("div")),this.div.style.cssText="position: absolute; right: 0; top: 0; z-index: 7; pointer-events: none",this.computeScale();var g=this;f.on("refresh",this.resizeHandler=function(){clearTimeout(g.doUpdate),g.doUpdate=setTimeout(function(){g.computeScale()&&h(20)},100)}),f.on("markerAdded",this.resizeHandler),f.on("markerCleared",this.resizeHandler),e.listenForChanges!==!1&&f.on("change",this.changeHandler=function(){h(250)})}d.defineExtension("annotateScrollbar",function(b){return"string"==typeof b&&(b={className:b}),new c(this,b)}),d.defineOption("scrollButtonHeight",0),c.prototype.computeScale=function(){var f=this.cm,e=(f.getWrapperElement().clientHeight-f.display.barHeight-2*this.buttonHeight)/f.getScrollerElement().scrollHeight;return e!=this.hScale?(this.hScale=e,!0):void 0},c.prototype.update=function(b){this.annotations=b,this.redraw()},c.prototype.redraw=function(H){function y(b,f){if(A!=b.line&&(A=b.line,z=G.getLineHandle(A)),C&&z.height>B){return G.charCoords(b,"local")[f?"top":"bottom"]}var e=G.heightAtLine(z,"local");return e+(f?0:z.height)}H!==!1&&this.computeScale();var G=this.cm,F=this.hScale,E=document.createDocumentFragment(),D=this.annotations,C=G.getOption("lineWrapping"),B=C&&1.5*G.defaultTextHeight(),A=null,z=null;if(G.display.barWidth){for(var w,x=0;x<D.length;x++){for(var v=D[x],u=w||y(v.from,!0)*F,t=y(v.to,!1)*F;x<D.length-1&&(w=y(D[x+1].from,!0)*F,!(w>t+0.9));){v=D[++x],t=y(v.to,!1)*F}if(t!=u){var s=Math.max(t-u,3),r=E.appendChild(document.createElement("div"));r.style.cssText="position: absolute; right: 0px; width: "+Math.max(G.display.barWidth-1,2)+"px; top: "+(u+this.buttonHeight)+"px; height: "+s+"px",r.className=this.options.className,v.id&&r.setAttribute("annotation-id",v.id)}}}this.div.textContent="",this.div.appendChild(E)},c.prototype.clear=function(){this.cm.off("refresh",this.resizeHandler),this.cm.off("markerAdded",this.resizeHandler),this.cm.off("markerCleared",this.resizeHandler),this.changeHandler&&this.cm.off("change",this.changeHandler),this.div.parentNode.removeChild(this.div)}});!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../lib/codemirror"),require("../addon/search/searchcursor"),require("../addon/edit/matchbrackets")):"function"==typeof define&&define.amd?define(["../lib/codemirror","../addon/search/searchcursor","../addon/edit/matchbrackets"],b):b(CodeMirror)}(function(J){function D(M,L,K){if(K<0&&0==L.ch){return M.clipPos(G(L.line-1))}var s=M.getLine(L.line);if(K>0&&L.ch>=s.length){return M.clipPos(G(L.line+1,0))}for(var q,r="start",p=L.ch,o=K<0?0:s.length,n=0;p!=o;p+=K,n++){var d=s.charAt(K<0?p-1:p),a="_"!=d&&J.isWordChar(d)?"w":"o";if("w"==a&&d.toUpperCase()==d&&(a="W"),"start"==r){"o"!=a&&(r="in",q=a)}else{if("in"==r&&q!=a){if("w"==q&&"W"==a&&K<0&&p--,"W"==q&&"w"==a&&K>0){q="w";continue}break}}}return G(L.line,p)}function C(d,c){d.extendSelectionsBy(function(a){return d.display.shift||d.doc.extend||a.empty()?D(d.doc,a.head,c):c<0?a.from():a.to()})}function A(a,k){for(var i=k.ch,h=i,d=a.getLine(k.line);i&&J.isWordChar(d.charAt(i-1));){--i}for(;h<d.length&&J.isWordChar(d.charAt(h));){++h}return{from:G(k.line,i),to:G(k.line,h),word:d.slice(i,h)}}function y(f){var d=f.getCursor(),h=f.scanForBracket(d,-1);if(h){for(;;){var g=f.scanForBracket(d,1);if(!g){return}if(g.ch==z.charAt(z.indexOf(h.ch)+1)){return f.setSelection(G(h.pos.line,h.pos.ch+1),g.pos,!1),!0}d=G(g.pos.line,g.pos.ch+1)}}}function w(r,q){if(r.isReadOnly()){return J.Pass}for(var n,p=r.listSelections(),o=[],m=0;m<p.length;m++){var l=p[m];if(!l.empty()){for(var d=l.from().line,a=l.to().line;m<p.length-1&&p[m+1].from().line==a;){a=l[++m].to().line}o.push(d,a)}}o.length?n=!0:o.push(r.firstLine(),r.lastLine()),r.operation(function(){for(var c=[],L=0;L<o.length;L+=2){var K=o[L],s=o[L+1],g=G(K,0),f=G(s),b=r.getRange(g,f,!1);q?b.sort():b.sort(function(h,e){var k=h.toUpperCase(),i=e.toUpperCase();return k!=i&&(h=k,e=i),h<e?-1:h==e?0:1}),r.replaceRange(b,g,f),n&&c.push({anchor:g,head:f})}n&&r.setSelections(c,0)})}function u(a,d){a.operation(function(){for(var o=a.listSelections(),n=[],m=[],l=0;l<o.length;l++){var k=o[l];k.empty()?(n.push(l),m.push("")):m.push(d(a.getRange(k.from(),k.to())))}a.replaceSelections(m,"around","case");for(var c,l=n.length-1;l>=0;l--){var k=o[n[l]];if(!(c&&J.cmpPos(k.head,c)>0)){var b=A(a,k.head);c=b.from,a.replaceRange(d(b.word),b.from,b.to)}}})}function t(a){var h=a.getCursor("from"),g=a.getCursor("to");if(0==J.cmpPos(h,g)){var f=A(a,h);if(!f.word){return}h=f.from,g=f.to}return{from:h,to:g,query:a.getRange(h,g),word:f}}function j(g,d){var k=t(g);if(k){var i=k.query,h=g.getSearchCursor(i,d?k.to:k.from);(d?h.findNext():h.findPrevious())?g.setSelection(h.from(),h.to()):(h=g.getSearchCursor(i,d?G(g.firstLine(),0):g.clipPos(G(g.lastLine()))),(d?h.findNext():h.findPrevious())?g.setSelection(h.from(),h.to()):k.word&&g.setSelection(k.from,k.to))}}var I=J.keyMap.sublime={fallthrough:"default"},H=J.commands,G=J.Pos,F=J.keyMap["default"]==J.keyMap.macDefault,E=F?"Cmd-":"Ctrl-";H[I["Alt-Left"]="goSubwordLeft"]=function(b){C(b,-1)},H[I["Alt-Right"]="goSubwordRight"]=function(b){C(b,1)};var B=F?"Ctrl-Alt-":"Ctrl-";H[I[B+"Up"]="scrollLineUp"]=function(e){var d=e.getScrollInfo();if(!e.somethingSelected()){var f=e.lineAtHeight(d.top+d.clientHeight,"local");e.getCursor().line>=f&&e.execCommand("goLineUp")}e.scrollTo(null,d.top-e.defaultTextHeight())},H[I[B+"Down"]="scrollLineDown"]=function(e){var d=e.getScrollInfo();if(!e.somethingSelected()){var f=e.lineAtHeight(d.top,"local")+1;e.getCursor().line<=f&&e.execCommand("goLineDown")}e.scrollTo(null,d.top+e.defaultTextHeight())},H[I["Shift-"+E+"L"]="splitSelectionByLine"]=function(i){for(var d=i.listSelections(),o=[],n=0;n<d.length;n++){for(var m=d[n].from(),l=d[n].to(),k=m.line;k<=l.line;++k){l.line>m.line&&k==l.line&&0==l.ch||o.push({anchor:k==m.line?m:G(k,0),head:k==l.line?l:G(k)})}}i.setSelections(o,0)},I["Shift-Tab"]="indentLess",H[I.Esc="singleSelectionTop"]=function(d){var c=d.listSelections()[0];d.setSelection(c.anchor,c.head,{scroll:!1})},H[I[E+"L"]="selectLine"]=function(g){for(var d=g.listSelections(),k=[],i=0;i<d.length;i++){var h=d[i];k.push({anchor:G(h.from().line,0),head:G(h.to().line+1,0)})}g.setSelections(k)},I["Shift-Ctrl-K"]="deleteLine",H[I[E+"D"]="selectNextOccurrence"]=function(a){var p=a.getCursor("from"),o=a.getCursor("to"),n=a.state.sublimeFindFullWord==a.doc.sel;if(0==J.cmpPos(p,o)){var m=A(a,p);if(!m.word){return}a.setSelection(m.from,m.to),n=!0}else{var l=a.getRange(p,o),k=n?new RegExp("\\b"+l+"\\b"):l,d=a.getSearchCursor(k,o);d.findNext()?a.addSelection(d.from(),d.to()):(d=a.getSearchCursor(k,G(a.firstLine(),0)),d.findNext()&&a.addSelection(d.from(),d.to()))}n&&(a.state.sublimeFindFullWord=a.doc.sel)};var z="(){}[]";H[I["Shift-"+E+"Space"]="selectScope"]=function(b){y(b)||b.execCommand("selectAll")},H[I["Shift-"+E+"M"]="selectBetweenBrackets"]=function(a){return y(a)?void 0:J.Pass},H[I[E+"M"]="goToBracket"]=function(a){a.extendSelectionsBy(function(g){var d=a.scanForBracket(g.head,1);if(d&&0!=J.cmpPos(d.pos,g.head)){return d.pos}var b=a.scanForBracket(g.head,-1);return b&&G(b.pos.line,b.pos.ch+1)||g.head})};var x=F?"Cmd-Ctrl-":"Shift-Ctrl-";H[I[x+"Up"]="swapLineUp"]=function(r){if(r.isReadOnly()){return J.Pass}for(var q=r.listSelections(),p=[],o=r.firstLine()-1,n=[],m=0;m<q.length;m++){var l=q[m],d=l.from().line-1,a=l.to().line;n.push({anchor:G(l.anchor.line-1,l.anchor.ch),head:G(l.head.line-1,l.head.ch)}),0!=l.to().ch||l.empty()||--a,d>o?p.push(d,a):p.length&&(p[p.length-1]=a),o=a}r.operation(function(){for(var b=0;b<p.length;b+=2){var i=p[b],g=p[b+1],e=r.getLine(i);r.replaceRange("",G(i,0),G(i+1,0),"+swapLine"),g>r.lastLine()?r.replaceRange("\n"+e,G(r.lastLine()),null,"+swapLine"):r.replaceRange(e+"\n",G(g,0),null,"+swapLine")}r.setSelections(n),r.scrollIntoView()})},H[I[x+"Down"]="swapLineDown"]=function(a){if(a.isReadOnly()){return J.Pass}for(var p=a.listSelections(),o=[],n=a.lastLine()+1,m=p.length-1;m>=0;m--){var l=p[m],k=l.to().line+1,d=l.from().line;0!=l.to().ch||l.empty()||k--,k<n?o.push(k,d):o.length&&(o[o.length-1]=d),n=d}a.operation(function(){for(var b=o.length-2;b>=0;b-=2){var i=o[b],h=o[b+1],e=a.getLine(i);i==a.lastLine()?a.replaceRange("",G(i-1),G(i),"+swapLine"):a.replaceRange("",G(i,0),G(i+1,0),"+swapLine"),a.replaceRange(e+"\n",G(h,0),null,"+swapLine")}a.scrollIntoView()})},H[I[E+"/"]="toggleCommentIndented"]=function(b){b.toggleComment({indent:!0})},H[I[E+"J"]="joinLines"]=function(k){for(var d=k.listSelections(),q=[],p=0;p<d.length;p++){for(var o=d[p],n=o.from(),m=n.line,l=o.to().line;p<d.length-1&&d[p+1].from().line==l;){l=d[++p].to().line}q.push({start:m,end:l,anchor:!o.empty()&&n})}k.operation(function(){for(var a=0,N=[],M=0;M<q.length;M++){for(var s,L=q[M],K=L.anchor&&G(L.anchor.line-a,L.anchor.ch),r=L.start;r<=L.end;r++){var c=r-a;r==L.end&&(s=G(c,k.getLine(c).length+1)),c<k.lastLine()&&(k.replaceRange(" ",G(c),G(c+1,/^\s*/.exec(k.getLine(c+1))[0].length)),++a)}N.push({anchor:K||s,head:s})}k.setSelections(N,0)})},H[I["Shift-"+E+"D"]="duplicateLine"]=function(b){b.operation(function(){for(var a=b.listSelections().length,f=0;f<a;f++){var d=b.listSelections()[f];d.empty()?b.replaceRange(b.getLine(d.head.line)+"\n",G(d.head.line,0)):b.replaceRange(b.getRange(d.from(),d.to()),d.from())}b.scrollIntoView()})},I[E+"T"]="transposeChars",H[I.F9="sortLines"]=function(b){w(b,!0)},H[I[E+"F9"]="sortLinesInsensitive"]=function(b){w(b,!1)},H[I.F2="nextBookmark"]=function(f){var e=f.state.sublimeBookmarks;if(e){for(;e.length;){var h=e.shift(),g=h.find();if(g){return e.push(h),f.setSelection(g.from,g.to)}}}},H[I["Shift-F2"]="prevBookmark"]=function(e){var d=e.state.sublimeBookmarks;if(d){for(;d.length;){d.unshift(d.pop());var f=d[d.length-1].find();if(f){return e.setSelection(f.from,f.to)}d.pop()}}},H[I[E+"F2"]="toggleBookmark"]=function(s){for(var r=s.listSelections(),q=s.state.sublimeBookmarks||(s.state.sublimeBookmarks=[]),p=0;p<r.length;p++){for(var o=r[p].from(),n=r[p].to(),m=s.findMarks(o,n),l=0;l<m.length;l++){if(m[l].sublimeBookmark){m[l].clear();for(var k=0;k<q.length;k++){q[k]==m[l]&&q.splice(k--,1)}break}}l==m.length&&q.push(s.markText(o,n,{sublimeBookmark:!0,clearWhenEmpty:!1}))}},H[I["Shift-"+E+"F2"]="clearBookmarks"]=function(e){var d=e.state.sublimeBookmarks;if(d){for(var f=0;f<d.length;f++){d[f].clear()}}d.length=0},H[I["Alt-F2"]="selectBookmarks"]=function(g){var f=g.state.sublimeBookmarks,k=[];if(f){for(var i=0;i<f.length;i++){var h=f[i].find();h?k.push({anchor:h.from,head:h.to}):f.splice(i--,0)}}k.length&&g.setSelections(k,0)},I["Alt-Q"]="wrapLines";var v=E+"K ";I[v+E+"Backspace"]="delLineLeft",H[I.Backspace="smartBackspace"]=function(a){if(a.somethingSelected()){return J.Pass}var m=a.getCursor(),l=a.getRange({line:m.line,ch:0},m),k=J.countColumn(l,null,a.getOption("tabSize")),i=a.getOption("indentUnit");if(l&&!/\S/.test(l)&&k%i==0){var d=new G(m.line,J.findColumn(l,k-i,i));return d.ch==m.ch?J.Pass:a.replaceRange("",d,m,"+delete")}return J.Pass},H[I[v+E+"K"]="delLineRight"]=function(b){b.operation(function(){for(var a=b.listSelections(),d=a.length-1;d>=0;d--){b.replaceRange("",a[d].anchor,G(a[d].to().line),"+delete")}b.scrollIntoView()})},H[I[v+E+"U"]="upcaseAtCursor"]=function(b){u(b,function(c){return c.toUpperCase()})},H[I[v+E+"L"]="downcaseAtCursor"]=function(b){u(b,function(c){return c.toLowerCase()})},H[I[v+E+"Space"]="setSublimeMark"]=function(b){b.state.sublimeMark&&b.state.sublimeMark.clear(),b.state.sublimeMark=b.setBookmark(b.getCursor())},H[I[v+E+"A"]="selectToSublimeMark"]=function(d){var c=d.state.sublimeMark&&d.state.sublimeMark.find();c&&d.setSelection(d.getCursor(),c)},H[I[v+E+"W"]="deleteToSublimeMark"]=function(a){var k=a.state.sublimeMark&&a.state.sublimeMark.find();if(k){var i=a.getCursor(),h=k;if(J.cmpPos(i,h)>0){var g=h;h=i,i=g}a.state.sublimeKilled=a.getRange(i,h),a.replaceRange("",i,h)}},H[I[v+E+"X"]="swapWithSublimeMark"]=function(d){var c=d.state.sublimeMark&&d.state.sublimeMark.find();c&&(d.state.sublimeMark.clear(),d.state.sublimeMark=d.setBookmark(d.getCursor()),d.setCursor(c))},H[I[v+E+"Y"]="sublimeYank"]=function(b){null!=b.state.sublimeKilled&&b.replaceSelection(b.state.sublimeKilled,null,"paste")},I[v+E+"G"]="clearBookmarks",H[I[v+E+"C"]="showInCenter"]=function(d){var c=d.cursorCoords(null,"local");d.scrollTo(null,(c.top+c.bottom)/2-d.getScrollInfo().clientHeight/2)},H[I["Shift-Alt-Up"]="selectLinesUpward"]=function(b){b.operation(function(){for(var a=b.listSelections(),f=0;f<a.length;f++){var d=a[f];d.head.line>b.firstLine()&&b.addSelection(G(d.head.line-1,d.head.ch))}})},H[I["Shift-Alt-Down"]="selectLinesDownward"]=function(b){b.operation(function(){for(var a=b.listSelections(),f=0;f<a.length;f++){var d=a[f];d.head.line<b.lastLine()&&b.addSelection(G(d.head.line+1,d.head.ch))}})},H[I[E+"F3"]="findUnder"]=function(b){j(b,!0)},H[I["Shift-"+E+"F3"]="findUnderPrevious"]=function(b){j(b,!1)},H[I["Alt-F3"]="findAllUnder"]=function(g){var f=t(g);if(f){for(var k=g.getSearchCursor(f.query),i=[],h=-1;k.findNext();){i.push({anchor:k.from(),head:k.to()}),k.from().line<=f.from.line&&k.from().ch<=f.from.ch&&h++}g.setSelections(i,h)}},I["Shift-"+E+"["]="fold",I["Shift-"+E+"]"]="unfold",I[v+E+"0"]=I[v+E+"j"]="unfoldAll",I[E+"I"]="findIncremental",I["Shift-"+E+"I"]="findIncrementalReverse",I[E+"H"]="replace",I.F3="findNext",I["Shift-F3"]="findPrev",J.normalizeKeyMap(I)});!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../lib/codemirror")):"function"==typeof define&&define.amd?define(["../lib/codemirror"],b):b(CodeMirror)}(function(aC){function aA(d,c){return d.line==c.line&&d.ch==c.ch}function ay(b){az.push(b),az.length>50&&az.shift()}function ax(b){return az.length?void (az[az.length-1]+=b):ay(b)}function aw(b){return az[az.length-(b?Math.min(b,1):1)]||""}function av(){return az.length>1&&az.pop(),aw()}function at(e,c,j,i,f){null==f&&(f=e.getRange(c,j)),i&&au&&au.cm==e&&aA(c,au.pos)&&e.isClean(au.gen)?ax(f):ay(f),e.replaceRange("",c,j,"+delete"),au=i?{cm:e,pos:c,gen:e.changeGeneration()}:null}function ar(e,d,f){return e.findPosH(d,f,"char",!0)}function aq(e,d,f){return e.findPosH(d,f,"word",!0)}function ap(e,d,f){return e.findPosV(d,f,"line",e.doc.sel.goalColumn)}function ao(e,d,f){return e.findPosV(d,f,"page",e.doc.sel.goalColumn)}function an(r,q,p){for(var o=q.line,n=r.getLine(o),m=/\S/.test(p<0?n.slice(0,q.ch):n.slice(q.ch)),l=r.firstLine(),k=r.lastLine();;){if(o+=p,o<l||o>k){return r.clipPos(aB(o-p,p<0?0:null))}n=r.getLine(o);var b=/\S/.test(n);if(b){m=!0}else{if(m){return aB(o,0)}}}}function am(b,p,o){for(var n=p.line,m=p.ch,l=b.getLine(p.line),k=!1;;){var j=l.charAt(m+(o<0?-1:0));if(j){if(k&&/[!?.]/.test(j)){return aB(n,m+(o>0?1:0))}k||(k=/\w/.test(j)),m+=o}else{if(n==(o<0?b.firstLine():b.lastLine())){return aB(n,m)}if(l=b.getLine(n+o),!/\S/.test(l)){return aB(n,m)}n+=o,m=o<0?l.length:0}}}function al(b,p,o){var n;if(b.findMatchingBracket&&(n=b.findMatchingBracket(p,!0))&&n.match&&(n.forward?1:-1)==o){return o>0?aB(n.to.line,n.to.ch+1):n.to}for(var m=!0;;m=!1){var l=b.getTokenAt(p),k=aB(p.line,o<0?l.start:l.end);if(!(m&&o>0&&l.end==p.ch)&&/\w/.test(l.string)){return k}var c=b.findPosH(k,o,"char");if(aA(k,c)){return p}p=c}}function ak(e,d){var f=e.state.emacsPrefix;return f?(ab(e),"-"==f?-1:Number(f)):d?null:1}function aj(d){var c="string"==typeof d?function(a){a.execCommand(d)}:d;return function(b){var f=ak(b);c(b);for(var e=1;e<f;++e){c(b)}}}function ai(i,c,n,m){var l=ak(i);l<0&&(m=-m,l=-l);for(var k=0;k<l;++k){var j=n(i,c,m);if(aA(j,c)){break}c=j}return c}function ah(e,d){var f=function(a){a.extendSelection(ai(a,a.getCursor(),e,d))};return f.motion=!0,f}function ag(h,g,l){for(var j,k=h.listSelections(),i=k.length;i--;){j=k[i].head,at(h,j,ai(h,j,g,l),!0)}}function af(f){if(f.somethingSelected()){for(var h,e=f.listSelections(),g=e.length;g--;){h=e[g],at(f,h.anchor,h.head)}return !0}}function ae(d,c){return d.state.emacsPrefix?void ("-"!=c&&(d.state.emacsPrefix+=c)):(d.state.emacsPrefix=c,d.on("keyHandled",ac),void d.on("inputRead",aa))}function ac(d,c){d.state.emacsPrefixMap||ad.hasOwnProperty(c)||ab(d)}function ab(b){b.state.emacsPrefix=null,b.off("keyHandled",ac),b.off("inputRead",aa)}function aa(h,g){var l=ak(h);if(l>1&&"+input"==g.origin){for(var k=g.text.join("\n"),j="",i=1;i<l;++i){j+=k}h.replaceSelection(j)}}function Z(b){b.state.emacsPrefixMap=!0,b.addKeyMap(Q),b.on("keyHandled",Y),b.on("inputRead",Y)}function Y(d,c){("string"!=typeof c||!/^\d$/.test(c)&&"Ctrl-U"!=c)&&(d.removeKeyMap(Q),d.state.emacsPrefixMap=!1,d.off("keyHandled",Y),d.off("inputRead",Y))}function X(b){b.setCursor(b.getCursor()),b.setExtending(!b.getExtending()),b.on("change",function(){b.setExtending(!1)})}function W(b){b.setExtending(!1),b.setCursor(b.getCursor())}function V(e,d,f){e.openDialog?e.openDialog(d+': <input type="text" style="width: 10em"/>',f,{bottom:!0}):f(prompt(d,""))}function U(f,e){var h=f.getCursor(),g=f.findPosH(h,1,"word");f.replaceRange(e(f.getRange(h,g)),h,g),f.setCursor(g)}function T(b){for(var n=b.getCursor(),m=n.line,l=n.ch,k=[];m>=b.firstLine();){for(var j=b.getLine(m),i=null==l?j.length:l;i>0;){var l=j.charAt(--i);if(")"==l){k.push("(")}else{if("]"==l){k.push("[")}else{if("}"==l){k.push("{")}else{if(/[\(\{\[]/.test(l)&&(!k.length||k.pop()!=l)){return b.extendSelection(aB(m,i))}}}}}--m,l=null}}function S(b){b.execCommand("clearSearch"),W(b)}function P(b){Q[b]=function(a){ae(a,b)},R["Ctrl-"+b]=function(a){ae(a,b)},ad["Ctrl-"+b]=!0}for(var aB=aC.Pos,az=[],au=null,ad={"Alt-G":!0,"Ctrl-X":!0,"Ctrl-Q":!0,"Ctrl-U":!0},R=aC.keyMap.emacs=aC.normalizeKeyMap({"Ctrl-W":function(b){at(b,b.getCursor("start"),b.getCursor("end"))},"Ctrl-K":aj(function(b){var h=b.getCursor(),g=b.clipPos(aB(h.line)),f=b.getRange(h,g);/\S/.test(f)||(f+="\n",g=aB(h.line+1,0)),at(b,h,g,!0,f)}),"Alt-W":function(b){ay(b.getSelection()),W(b)},"Ctrl-Y":function(d){var c=d.getCursor();d.replaceRange(aw(ak(d)),c,c,"paste"),d.setSelection(c,d.getCursor())},"Alt-Y":function(b){b.replaceSelection(av(),"around","paste")},"Ctrl-Space":X,"Ctrl-Shift-2":X,"Ctrl-F":ah(ar,1),"Ctrl-B":ah(ar,-1),Right:ah(ar,1),Left:ah(ar,-1),"Ctrl-D":function(b){ag(b,ar,1)},Delete:function(b){af(b)||ag(b,ar,1)},"Ctrl-H":function(b){ag(b,ar,-1)},Backspace:function(b){af(b)||ag(b,ar,-1)},"Alt-F":ah(aq,1),"Alt-B":ah(aq,-1),"Alt-D":function(b){ag(b,aq,1)},"Alt-Backspace":function(b){ag(b,aq,-1)},"Ctrl-N":ah(ap,1),"Ctrl-P":ah(ap,-1),Down:ah(ap,1),Up:ah(ap,-1),"Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd",End:"goLineEnd",Home:"goLineStart","Alt-V":ah(ao,-1),"Ctrl-V":ah(ao,1),PageUp:ah(ao,-1),PageDown:ah(ao,1),"Ctrl-Up":ah(an,-1),"Ctrl-Down":ah(an,1),"Alt-A":ah(am,-1),"Alt-E":ah(am,1),"Alt-K":function(b){ag(b,am,1)},"Ctrl-Alt-K":function(b){ag(b,al,1)},"Ctrl-Alt-Backspace":function(b){ag(b,al,-1)},"Ctrl-Alt-F":ah(al,1),"Ctrl-Alt-B":ah(al,-1),"Shift-Ctrl-Alt-2":function(d){var c=d.getCursor();d.setSelection(ai(d,c,al,1),c)},"Ctrl-Alt-T":function(g){var f=al(g,g.getCursor(),-1),j=al(g,f,1),i=al(g,j,1),h=al(g,i,-1);g.replaceRange(g.getRange(h,i)+g.getRange(j,h)+g.getRange(f,j),f,i)},"Ctrl-Alt-U":aj(T),"Alt-Space":function(b){for(var j=b.getCursor(),i=j.ch,h=j.ch,g=b.getLine(j.line);i&&/\s/.test(g.charAt(i-1));){--i}for(;h<g.length&&/\s/.test(g.charAt(h));){++h}b.replaceRange(" ",aB(j.line,i),aB(j.line,h))},"Ctrl-O":aj(function(b){b.replaceSelection("\n","start")}),"Ctrl-T":aj(function(b){b.execCommand("transposeChars")}),"Alt-C":aj(function(b){U(b,function(d){var c=d.search(/\w/);return -1==c?d:d.slice(0,c)+d.charAt(c).toUpperCase()+d.slice(c+1).toLowerCase()})}),"Alt-U":aj(function(b){U(b,function(c){return c.toUpperCase()})}),"Alt-L":aj(function(b){U(b,function(c){return c.toLowerCase()})}),"Alt-;":"toggleComment","Ctrl-/":aj("undo"),"Shift-Ctrl--":aj("undo"),"Ctrl-Z":aj("undo"),"Cmd-Z":aj("undo"),"Shift-Alt-,":"goDocStart","Shift-Alt-.":"goDocEnd","Ctrl-S":"findNext","Ctrl-R":"findPrev","Ctrl-G":S,"Shift-Alt-5":"replace","Alt-/":"autocomplete","Ctrl-J":"newlineAndIndent",Enter:!1,Tab:"indentAuto","Alt-G G":function(d){var c=ak(d,!0);return null!=c&&c>0?d.setCursor(c-1):void V(d,"Goto line",function(a){var e;a&&!isNaN(e=Number(a))&&e==(0|e)&&e>0&&d.setCursor(e-1)})},"Ctrl-X Tab":function(b){b.indentSelection(ak(b,!0)||b.getOption("indentUnit"))},"Ctrl-X Ctrl-X":function(b){b.setSelection(b.getCursor("head"),b.getCursor("anchor"))},"Ctrl-X Ctrl-S":"save","Ctrl-X Ctrl-W":"save","Ctrl-X S":"saveAll","Ctrl-X F":"open","Ctrl-X U":aj("undo"),"Ctrl-X K":"close","Ctrl-X Delete":function(b){at(b,b.getCursor(),am(b,b.getCursor(),1),!0)},"Ctrl-X H":"selectAll","Ctrl-Q Tab":aj("insertTab"),"Ctrl-U":Z}),Q={"Ctrl-G":ab},O=0;O<10;++O){P(String(O))}P("-")});!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)}(function(r){function n(y,x,w,v){var u=y.getLineHandle(x.line),t=x.ch-1,s=t>=0&&o[u.text.charAt(t)]||o[u.text.charAt(++t)];if(!s){return null}var f=">"==s.charAt(1)?1:-1;if(w&&f>0!=(t==x.ch)){return null}var d=y.getTokenTypeAt(p(x.line,t+1)),c=m(y,p(x.line,t+(f>0?1:0)),f,d||null,v);return null==c?null:{from:p(x.line,t),to:c&&c.pos,match:c&&c.ch==s.charAt(0),forward:f>0}}function m(F,E,D,C,B){for(var A=B&&B.maxScanLineLength||10000,z=B&&B.maxScanLines||1000,y=[],x=B&&B.bracketRegex?B.bracketRegex:/[(){}[\]]/,w=D>0?Math.min(E.line+z,F.lastLine()+1):Math.max(F.firstLine()-1,E.line-z),v=E.line;v!=w;v+=D){var u=F.getLine(v);if(u){var t=D>0?0:u.length-1,s=D>0?u.length:-1;if(!(u.length>A)){for(v==E.line&&(t=E.ch-(D<0?1:0));t!=s;t+=D){var d=u.charAt(t);if(x.test(d)&&(void 0===C||F.getTokenTypeAt(p(v,t+1))==C)){var c=o[d];if(">"==c.charAt(1)==D>0){y.push(d)}else{if(!y.length){return{pos:p(v,t),ch:d}}y.pop()}}}}}}return v-D==(D>0?F.lastLine():F.firstLine())?!1:null}function l(y,x,w){for(var v=y.state.matchBrackets.maxHighlightLineLength||1000,u=[],t=y.listSelections(),s=0;s<t.length;s++){var e=t[s].empty()&&n(y,t[s].head,!1,w);if(e&&y.getLine(e.from.line).length<=v){var c=e.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";u.push(y.markText(e.from,p(e.from.line,e.from.ch+1),{className:c})),e.to&&y.getLine(e.to.line).length<=v&&u.push(y.markText(e.to,p(e.to.line,e.to.ch+1),{className:c}))}}if(u.length){q&&y.state.focused&&y.focus();var b=function(){y.operation(function(){for(var d=0;d<u.length;d++){u[d].clear()}})};if(!x){return b}setTimeout(b,800)}}function j(b){b.operation(function(){k&&(k(),k=null),k=l(b,!1,b.state.matchBrackets)})}var q=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<8),p=r.Pos,o={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},k=null;r.defineOption("matchBrackets",!1,function(a,f,e){e&&e!=r.Init&&a.off("cursorActivity",j),f&&(a.state.matchBrackets="object"==typeof f?f:{},a.on("cursorActivity",j))}),r.defineExtension("matchBrackets",function(){l(this,!0)}),r.defineExtension("findMatchingBracket",function(e,d,f){return n(this,e,d,f)}),r.defineExtension("scanForBracket",function(f,e,h,g){return m(this,f,e,h,g)})});!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)}(function(F){function C(b,d){return"pairs"==d&&"string"==typeof b?b:"object"==typeof b&&null!=b[d]?b[d]:E[d]}function y(b){return function(a){return t(a,b)}}function x(e){var d=e.state.closeBrackets;if(!d){return null}var f=e.getModeAt(e.getCursor());return f.closeBrackets||d}function w(a){var n=x(a);if(!n||a.getOption("disableInput")){return F.Pass}for(var m=C(n,"pairs"),l=a.listSelections(),i=0;i<l.length;i++){if(!l[i].empty()){return F.Pass}var d=r(a,l[i].head);if(!d||m.indexOf(d)%2!=0){return F.Pass}}for(var i=l.length-1;i>=0;i--){var c=l[i].head;a.replaceRange("",D(c.line,c.ch-1),D(c.line,c.ch+1),"+delete")}}function v(a){var l=x(a),k=l&&C(l,"explode");if(!k||a.getOption("disableInput")){return F.Pass}for(var j=a.listSelections(),i=0;i<j.length;i++){if(!j[i].empty()){return F.Pass}var d=r(a,j[i].head);if(!d||k.indexOf(d)%2!=0){return F.Pass}}a.operation(function(){a.replaceSelection("\n\n",null),a.execCommand("goCharLeft"),j=a.listSelections();for(var b=0;b<j.length;b++){var e=j[b].head.line;a.indentLine(e,null,!0),a.indentLine(e+1,null,!0)}})}function u(a){var c=F.cmpPos(a.anchor,a.head)>0;return{anchor:new D(a.anchor.line,a.anchor.ch+(c?-1:1)),head:new D(a.head.line,a.head.ch+(c?1:-1))}}function t(J,I){var H=x(J);if(!H||J.getOption("disableInput")){return F.Pass}var G=C(H,"pairs"),p=G.indexOf(I);if(-1==p){return F.Pass}for(var c,a,n=C(H,"triples"),l=G.charAt(p+1)==I,i=J.listSelections(),d=p%2==0,P=0;P<i.length;P++){var M,O=i[P],N=O.head,a=J.getRange(N,D(N.line,N.ch+1));if(d&&!O.empty()){M="surround"}else{if(!l&&d||a!=I){if(l&&N.ch>1&&n.indexOf(I)>=0&&J.getRange(D(N.line,N.ch-2),N)==I+I&&(N.ch<=2||J.getRange(D(N.line,N.ch-3),D(N.line,N.ch-2))!=I)){M="addFour"}else{if(l){if(F.isWordChar(a)||!q(J,N,I)){return F.Pass}M="both"}else{if(!d||J.getLine(N.line).length!=N.ch&&!s(a,G)&&!/\s/.test(a)){return F.Pass}M="both"}}}else{M=n.indexOf(I)>=0&&J.getRange(N,D(N.line,N.ch+3))==I+I+I?"skipThree":"skip"}}if(c){if(c!=M){return F.Pass}}else{c=M}}var L=p%2?G.charAt(p-1):I,K=p%2?I:G.charAt(p+1);J.operation(function(){if("skip"==c){J.execCommand("goCharRight")}else{if("skipThree"==c){for(var b=0;b<3;b++){J.execCommand("goCharRight")}}else{if("surround"==c){for(var e=J.getSelections(),b=0;b<e.length;b++){e[b]=L+e[b]+K}J.replaceSelections(e,"around"),e=J.listSelections().slice();for(var b=0;b<e.length;b++){e[b]=u(e[b])}J.setSelections(e)}else{"both"==c?(J.replaceSelection(L+K,null),J.triggerElectric(L+K),J.execCommand("goCharLeft")):"addFour"==c&&(J.replaceSelection(L+L+L+L,"before"),J.execCommand("goCharRight"))}}}})}function s(e,d){var f=d.lastIndexOf(e);return f>-1&&f%2==1}function r(e,c){var f=e.getRange(D(c.line,c.ch-1),D(c.line,c.ch+1));return 2==f.length?f:null}function q(a,n,m){var l=a.getLine(n.line),k=a.getTokenAt(n);if(/\bstring2?\b/.test(k.type)){return !1}var j=new F.StringStream(l.slice(0,n.ch)+m+l.slice(n.ch),4);for(j.pos=j.start=k.start;;){var i=a.getMode().token(j,k.state);if(j.pos>=n.ch+1){return/\bstring2?\b/.test(i)}j.start=j.pos}}var E={pairs:"()[]{}''\"\"",triples:"",explode:"[]{}"},D=F.Pos;F.defineOption("autoCloseBrackets",!1,function(a,f,e){e&&e!=F.Init&&(a.removeKeyMap(A),a.state.closeBrackets=null),f&&(a.state.closeBrackets=f,a.addKeyMap(A))});for(var B=E.pairs+"`",A={Backspace:w,Enter:v},z=0;z<B.length;z++){A["'"+B.charAt(z)+"'"]=y(B.charAt(z))}});!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)}(function(b){b.registerHelper("fold","brace",function(J,I){function D(g){for(var e=I.ch,d=0;;){var c=e<=0?-1:G.lastIndexOf(g,e-1);if(-1!=c){if(1==d&&c<I.ch){break}if(E=J.getTokenTypeAt(b.Pos(H,c+1)),!/^(comment|string)/.test(E)){return c+1}e=c-1}else{if(1==d){break}d=1,e=G.length}}}var F,E,H=I.line,G=J.getLine(H),C="{",B="}",F=D("{");if(null==F&&(C="[",B="]",F=D("[")),null!=F){var y,x,A=1,z=J.lastLine();b:for(var w=H;w<=z;++w){for(var v=J.getLine(w),u=w==H?F:0;;){var t=v.indexOf(C,u),a=v.indexOf(B,u);if(t<0&&(t=v.length),a<0&&(a=v.length),u=Math.min(t,a),u==v.length){break}if(J.getTokenTypeAt(b.Pos(w,u+1))==E){if(u==t){++A}else{if(!--A){y=w,x=u;break b}}}++u}}if(null!=y&&(H!=y||x!=F)){return{from:b.Pos(H,F),to:b.Pos(y,x)}}}}),b.registerHelper("fold","import",function(a,n){function m(t){if(t<a.firstLine()||t>a.lastLine()){return null}var s=a.getTokenAt(b.Pos(t,1));if(/\S/.test(s.string)||(s=a.getTokenAt(b.Pos(t,s.end+1))),"keyword"!=s.type||"import"!=s.string){return null}for(var r=t,q=Math.min(a.lastLine(),t+10);r<=q;++r){var p=a.getLine(r),o=p.indexOf(";");if(-1!=o){return{startCh:s.end,end:b.Pos(r,o)}}}}var k,n=n.line,l=m(n);if(!l||m(n-1)||(k=m(n-2))&&k.end.line==n-1){return null}for(var j=l.end;;){var i=m(j.line+1);if(null==i){break}j=i.end}return{from:a.clipPos(b.Pos(n,l.startCh+1)),to:j}}),b.registerHelper("fold","include",function(a,l){function k(f){if(f<a.firstLine()||f>a.lastLine()){return null}var e=a.getTokenAt(b.Pos(f,1));return/\S/.test(e.string)||(e=a.getTokenAt(b.Pos(f,e.end+1))),"meta"==e.type&&"#include"==e.string.slice(0,8)?e.start+8:void 0}var l=l.line,j=k(l);if(null==j||null!=k(l-1)){return null}for(var i=l;;){var h=k(i+1);if(null==h){break}++i}return{from:b.Pos(l,j+1),to:a.clipPos(b.Pos(i))}})}),function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)}(function(b){b.registerGlobalHelper("fold","comment",function(c){return c.blockCommentStart&&c.blockCommentEnd},function(N,M){var L=N.getModeAt(M),K=L.blockCommentStart,J=L.blockCommentEnd;if(K&&J){for(var G,I=M.line,H=N.getLine(I),F=M.ch,E=0;;){var D=F<=0?-1:H.lastIndexOf(K,F-1);if(-1!=D){if(1==E&&D<M.ch){return}if(/comment/.test(N.getTokenTypeAt(b.Pos(I,D+1)))&&(H.slice(D-J.length,D)==J||!/comment/.test(N.getTokenTypeAt(b.Pos(I,D))))){G=D+K.length;break}F=D-1}else{if(1==E){return}E=1,F=H.length}}var A,z,C=1,B=N.lastLine();b:for(var y=I;y<=B;++y){for(var x=N.getLine(y),w=y==I?G:0;;){var v=x.indexOf(K,w),a=x.indexOf(J,w);if(v<0&&(v=x.length),a<0&&(a=x.length),w=Math.min(v,a),w==x.length){break}if(w==v){++C}else{if(!--C){A=y,z=w;break b}}++w}}if(null!=A&&(I!=A||z!=G)){return{from:b.Pos(I,G),to:b.Pos(A,z)}}}})}),function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)}(function(g){function f(t,s,r,q){function n(b){var l=p(t,s);if(!l||l.to.line-l.from.line<o){return null}for(var k=t.findMarksAt(l.from),d=0;d<k.length;++d){if(k[d].__isFold&&"fold"!==q){if(!b){return null}l.cleared=!0,k[d].clear()}}return l}if(r&&r.call){var p=r;r=null}else{var p=h(t,r,"rangeFinder")}"number"==typeof s&&(s=g.Pos(s,0));var o=h(t,r,"minFoldSize"),e=n(!0);if(h(t,r,"scanUp")){for(;!e&&s.line>t.firstLine();){s=g.Pos(s.line-1,0),e=n(!1)}}if(e&&!e.cleared&&"unfold"!==q){var c=j(t,r);g.on(c,"mousedown",function(d){a.clear(),g.e_preventDefault(d)});var a=t.markText(e.from,e.to,{replacedWith:c,clearOnEnter:!0,__isFold:!0});a.on("clear",function(k,b){g.signal(t,"unfold",t,k,b)}),g.signal(t,"fold",t,e.from,e.to)}}function j(k,e){var m=h(k,e,"widget");if("string"==typeof m){var l=document.createTextNode(m);m=document.createElement("span"),m.appendChild(l),m.className="CodeMirror-foldmarker"}return m}function h(k,d,m){if(d&&void 0!==d[m]){return d[m]}var l=k.options.foldOptions;return l&&void 0!==l[m]?l[m]:i[m]}g.newFoldFunction=function(b,d){return function(c,a){f(c,a,{rangeFinder:b,widget:d})}},g.defineExtension("foldCode",function(b,k,e){f(this,b,k,e)}),g.defineExtension("isFolded",function(e){for(var d=this.findMarksAt(e),k=0;k<d.length;++k){if(d[k].__isFold){return !0}}}),g.commands.toggleFold=function(b){b.foldCode(b.getCursor())},g.commands.fold=function(b){b.foldCode(b.getCursor(),null,"fold")},g.commands.unfold=function(b){b.foldCode(b.getCursor(),null,"unfold")},g.commands.foldAll=function(a){a.operation(function(){for(var e=a.firstLine(),b=a.lastLine();e<=b;e++){a.foldCode(g.Pos(e,0),null,"fold")}})},g.commands.unfoldAll=function(a){a.operation(function(){for(var e=a.firstLine(),b=a.lastLine();e<=b;e++){a.foldCode(g.Pos(e,0),null,"unfold")}})},g.registerHelper("fold","combine",function(){var b=Array.prototype.slice.call(arguments,0);return function(a,m){for(var l=0;l<b.length;++l){var k=b[l](a,m);if(k){return k}}}}),g.registerHelper("fold","auto",function(l,k){for(var o=l.getHelpers(k,"fold"),n=0;n<o.length;n++){var m=o[n](l,k);if(m){return m}}});var i={rangeFinder:g.fold.auto,widget:"\u2194",minFoldSize:0,scanUp:!1};g.defineOption("foldOptions",null),g.defineExtension("foldOption",function(d,c){return h(this,d,c)})}),function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror"),require("./foldcode")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./foldcode"],b):b(CodeMirror)}(function(x){function v(b){this.options=b,this.from=this.to=0}function u(b){return b===!0&&(b={}),null==b.gutter&&(b.gutter="CodeMirror-foldgutter"),null==b.indicatorOpen&&(b.indicatorOpen="CodeMirror-foldgutter-open"),null==b.indicatorFolded&&(b.indicatorFolded="CodeMirror-foldgutter-folded"),b}function t(b,h){for(var g=b.findMarksAt(w(h)),f=0;f<g.length;++f){if(g[f].__isFold&&g[f].find().from.line==h){return g[f]}}}function s(d){if("string"==typeof d){var c=document.createElement("div");return c.className=d+" CodeMirror-guttermarker-subtle",c}return d.cloneNode(!0)}function r(b,z,y){var l=b.state.foldGutter.options,k=z,f=b.foldOption(l,"minFoldSize"),e=b.foldOption(l,"rangeFinder");b.eachLine(z,y,function(i){var h=null;if(t(b,k)){h=s(l.indicatorFolded)}else{var g=w(k,0),a=e&&e(b,g);a&&a.to.line-a.from.line>=f&&(h=s(l.indicatorOpen))}b.setGutterMarker(i,l.gutter,h),++k})}function q(e){var d=e.getViewport(),f=e.state.foldGutter;f&&(e.operation(function(){r(e,d.from,d.to)}),f.from=d.from,f.to=d.to)}function p(b,l,k){var j=b.state.foldGutter;if(j){var i=j.options;if(k==i.gutter){var e=t(b,l);e?e.clear():b.foldCode(w(l,0),i.rangeFinder)}}}function o(e){var d=e.state.foldGutter;if(d){var f=d.options;d.from=d.to=0,clearTimeout(d.changeUpdate),d.changeUpdate=setTimeout(function(){q(e)},f.foldOnChangeTimeSpan||600)}}function n(e){var d=e.state.foldGutter;if(d){var f=d.options;clearTimeout(d.changeUpdate),d.changeUpdate=setTimeout(function(){var a=e.getViewport();d.from==d.to||a.from-d.to>20||d.from-a.to>20?q(e):e.operation(function(){a.from<d.from&&(r(e,a.from,d.from),d.from=a.from),a.to>d.to&&(r(e,d.to,a.to),d.to=a.to)})},f.updateViewportTimeSpan||400)}}function m(f,e){var h=f.state.foldGutter;if(h){var g=e.line;g>=h.from&&g<h.to&&r(f,g,g+1)}}x.defineOption("foldGutter",!1,function(a,d,c){c&&c!=x.Init&&(a.clearGutter(a.state.foldGutter.options.gutter),a.state.foldGutter=null,a.off("gutterClick",p),a.off("change",o),a.off("viewportChange",n),a.off("fold",m),a.off("unfold",m),a.off("swapDoc",o)),d&&(a.state.foldGutter=new v(u(d)),q(a),a.on("gutterClick",p),a.on("change",o),a.on("viewportChange",n),a.on("fold",m),a.on("unfold",m),a.on("swapDoc",o))});var w=x.Pos}),function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)}(function(b){b.registerHelper("fold","indent",function(v,u){var t=v.getOption("tabSize"),s=v.getLine(u.line);if(/\S/.test(s)){for(var r=function(c){return b.countColumn(c,null,t)},q=r(s),p=null,o=u.line+1,n=v.lastLine();o<=n;++o){var m=v.getLine(o),a=r(m);if(a>q){p=o}else{if(/\S/.test(m)){break}}}return p?{from:b.Pos(u.line,s.length),to:b.Pos(p,v.getLine(p).length)}:void 0}})}),function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)}(function(b){b.registerHelper("fold","markdown",function(v,u){function s(f){var e=v.getTokenTypeAt(b.Pos(f,0));return e&&/\bheader\b/.test(e)}function r(e,d,h){var g=d&&d.match(/^#+/);return g&&s(e)?g[0].length:(g=h&&h.match(/^[=\-]+\s*$/),g&&s(e+1)?"="==h[0]?1:2:t)}var t=100,q=v.getLine(u.line),p=v.getLine(u.line+1),o=r(u.line,q,p);if(o===t){return void 0}for(var n=v.lastLine(),m=u.line,a=v.getLine(m+2);m<n&&!(r(m+1,p,a)<=o);){++m,p=a,a=v.getLine(m+2)}return{from:b.Pos(u.line,q.length),to:b.Pos(m,v.getLine(m).length)}})}),function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)}(function(F){function D(d,c){return d.line-c.line||d.ch-c.ch}function z(f,e,h,g){this.line=e,this.ch=h,this.cm=f,this.text=f.getLine(e),this.min=g?g.from:f.firstLine(),this.max=g?g.to-1:f.lastLine()}function y(b,f){var e=b.cm.getTokenTypeAt(E(b.line,f));return e&&/\btag\b/.test(e)}function x(b){return b.line>=b.max?void 0:(b.ch=0,b.text=b.cm.getLine(++b.line),!0)}function w(b){return b.line<=b.min?void 0:(b.text=b.cm.getLine(--b.line),b.ch=b.text.length,!0)}function v(f){for(;;){var e=f.text.indexOf(">",f.ch);if(-1==e){if(x(f)){continue}return}if(y(f,e+1)){var h=f.text.lastIndexOf("/",e),g=h>-1&&!/\S/.test(f.text.slice(h+1,e));return f.ch=e+1,g?"selfClose":"regular"}f.ch=e+1}}function u(e){for(;;){var d=e.ch?e.text.lastIndexOf("<",e.ch-1):-1;if(-1==d){if(w(e)){continue}return}if(y(e,d+1)){A.lastIndex=d,e.ch=d;var f=A.exec(e.text);if(f&&f.index==d){return f}}else{e.ch=d}}}function t(d){for(;;){A.lastIndex=d.ch;var c=A.exec(d.text);if(!c){if(x(d)){continue}return}if(y(d,c.index+1)){return d.ch=c.index+c[0].length,c}d.ch=c.index+1}}function s(f){for(;;){var e=f.ch?f.text.lastIndexOf(">",f.ch-1):-1;if(-1==e){if(w(f)){continue}return}if(y(f,e+1)){var h=f.text.lastIndexOf("/",e),g=h>-1&&!/\S/.test(f.text.slice(h+1,e));return f.ch=e+1,g?"selfClose":"regular"}f.ch=e}}function r(b,p){for(var o=[];;){var m,n=t(b),l=b.line,k=b.ch-(n?n[0].length:0);if(!n||!(m=v(b))){return}if("selfClose"!=m){if(n[1]){for(var j=o.length-1;j>=0;--j){if(o[j]==n[2]){o.length=j;break}}if(j<0&&(!p||p==n[2])){return{tag:n[2],from:E(l,k),to:E(b.line,b.ch)}}}else{o.push(n[2])}}}}function q(b,p){for(var o=[];;){var n=s(b);if(!n){return}if("selfClose"!=n){var m=b.line,l=b.ch,k=u(b);if(!k){return}if(k[1]){o.push(k[2])}else{for(var j=o.length-1;j>=0;--j){if(o[j]==k[2]){o.length=j;break}}if(j<0&&(!p||p==k[2])){return{tag:k[2],from:E(b.line,b.ch),to:E(m,l)}}}}else{u(b)}}}var E=F.Pos,C="A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",B=C+"-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",A=new RegExp("<(/?)(["+C+"]["+B+"]*)","g");F.registerHelper("fold","xml",function(b,l){for(var k=new z(b,l.line,0);;){var i,j=t(k);if(!j||k.line!=l.line||!(i=v(k))){return}if(!j[1]&&"selfClose"!=i){var l=E(k.line,k.ch),g=r(k,j[2]);return g&&{from:l,to:g.from}}}}),F.findMatchingTag=function(c,p,o){var n=new z(c,p.line,p.ch,o);if(-1!=n.text.indexOf(">")||-1!=n.text.indexOf("<")){var l=v(n),k=l&&E(n.line,n.ch),g=l&&u(n);if(l&&g&&!(D(n,p)>0)){var b={from:E(n.line,n.ch),to:k,tag:g[2]};return"selfClose"==l?{open:b,close:null,at:"open"}:g[1]?{open:q(n,g[2]),close:b,at:"close"}:(n=new z(c,k.line,k.ch,o),{open:b,close:r(n,g[2]),at:"open"})}}},F.findEnclosingTag=function(i,g,n){for(var m=new z(i,g.line,g.ch,n);;){var l=q(m);if(!l){break}var k=new z(i,g.line,g.ch,n),j=r(k,l.tag);if(j){return{open:l,close:j}}}},F.scanForClosingTag=function(g,f,j,i){var h=new z(g,f.line,f.ch,i?{from:0,to:i}:null);return r(h,j)}});!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)}(function(D){function A(e,d){this.cm=e,this.options=d,this.widget=null,this.debounce=0,this.tick=0,this.startPos=this.cm.getCursor("start"),this.startLen=this.cm.getLine(this.startPos.line).length-this.cm.getSelection().length;var f=this;e.on("cursorActivity",this.activityFunc=function(){f.cursorActivity()})}function x(a,f){var e=D.cmpPos(f.from,a.from);return e>0&&a.to.ch-a.from.ch!=f.to.ch-f.from.ch}function w(h,g,l){var k=h.options.hintOptions,j={};for(var i in p){j[i]=p[i]}if(k){for(var i in k){void 0!==k[i]&&(j[i]=k[i])}}if(l){for(var i in l){void 0!==l[i]&&(j[i]=l[i])}}return j.hint.resolve&&(j.hint=j.hint.resolve(h,g)),j}function v(b){return"string"==typeof b?b:b.text}function u(j,i){function m(b,e){var c;c="string"!=typeof e?function(d){return e(d,i)}:E.hasOwnProperty(e)?E[e]:e,n[b]=c}var E={Up:function(){i.moveFocus(-1)},Down:function(){i.moveFocus(1)},PageUp:function(){i.moveFocus(-i.menuSize()+1,!0)},PageDown:function(){i.moveFocus(i.menuSize()-1,!0)},Home:function(){i.setFocus(0)},End:function(){i.setFocus(i.length-1)},Enter:i.pick,Tab:i.pick,Esc:i.close},o=j.options.customKeys,n=o?{}:E;if(o){for(var l in o){o.hasOwnProperty(l)&&m(l,o[l])}}var k=j.options.extraKeys;if(k){for(var l in k){k.hasOwnProperty(l)&&m(l,k[l])}}return n}function t(d,c){for(;c&&c!=d;){if("LI"===c.nodeName.toUpperCase()&&c.parentNode==d){return c}c=c.parentNode}}function s(V,U){this.completion=V,this.data=U,this.picked=!1;var T=this,S=V.cm,R=this.hints=document.createElement("ul");R.className="CodeMirror-hints",this.selectedHint=U.selectedHint||0;for(var Q=U.list,P=0;P<Q.length;++P){var O=R.appendChild(document.createElement("li")),N=Q[P],M=C+(P!=this.selectedHint?"":" "+B);null!=N.className&&(M=N.className+" "+M),O.className=M,N.render?N.render(O,U,N):O.appendChild(document.createTextNode(N.displayText||v(N))),O.hintId=P}var K=S.cursorCoords(V.options.alignWithWord?U.from:null),I=K.left,G=K.bottom,E=!0;R.style.left=I+"px",R.style.top=G+"px";var k=window.innerWidth||Math.max(document.body.offsetWidth,document.documentElement.offsetWidth),j=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight);(V.options.container||document.body).appendChild(R);var i=R.getBoundingClientRect(),c=i.bottom-j;if(c>0){var b=i.bottom-i.top,a=K.top-(K.bottom-i.top);if(a-b>0){R.style.top=(G=K.top-b)+"px",E=!1}else{if(b>j){R.style.height=j-5+"px",R.style.top=(G=K.bottom-i.top)+"px";var L=S.getCursor();U.from.ch!=L.ch&&(K=S.cursorCoords(L),R.style.left=(I=K.left)+"px",i=R.getBoundingClientRect())}}}var J=i.right-k;if(J>0&&(i.right-i.left>k&&(R.style.width=k-5+"px",J-=i.right-i.left-k),R.style.left=(I=K.left-J)+"px"),S.addKeyMap(this.keyMap=u(V,{moveFocus:function(e,d){T.changeActive(T.selectedHint+e,d)},setFocus:function(d){T.changeActive(d)},menuSize:function(){return T.screenAmount()},length:Q.length,close:function(){V.close()},pick:function(){T.pick()},data:U})),V.options.closeOnUnfocus){var H;S.on("blur",this.onBlur=function(){H=setTimeout(function(){V.close()},100)}),S.on("focus",this.onFocus=function(){clearTimeout(H)})}var F=S.getScrollInfo();return S.on("scroll",this.onScroll=function(){var f=S.getScrollInfo(),d=S.getWrapperElement().getBoundingClientRect(),h=G+F.top-f.top,g=h-(window.pageYOffset||(document.documentElement||document.body).scrollTop);return E||(g+=R.offsetHeight),g<=d.top||g>=d.bottom?V.close():(R.style.top=h+"px",void (R.style.left=I+F.left-f.left+"px"))}),D.on(R,"dblclick",function(e){var d=t(R,e.target||e.srcElement);d&&null!=d.hintId&&(T.changeActive(d.hintId),T.pick())}),D.on(R,"click",function(e){var d=t(R,e.target||e.srcElement);d&&null!=d.hintId&&(T.changeActive(d.hintId),V.options.completeOnSingleClick&&T.pick())}),D.on(R,"mousedown",function(){setTimeout(function(){S.focus()},20)}),D.signal(U,"select",Q[0],R.firstChild),!0}function r(f,e){if(!f.somethingSelected()){return e}for(var h=[],g=0;g<e.length;g++){e[g].supportsSelection&&h.push(e[g])}return h}function q(a,n){var l,m=a.getHelpers(n,"hint");if(m.length){for(var j,k=!1,i=0;i<m.length;i++){m[i].async&&(k=!0)}return k?(j=function(g,d,E){function h(e,c){if(e==o.length){return d(null)}var b=o[e];if(b.async){b(g,function(f){f?d(f):h(e+1)},E)}else{var c=b(g,E);c?d(c):h(e+1)}}var o=r(g,m);h(0)},j.async=!0):j=function(g,d){for(var E=r(g,m),o=0;o<E.length;o++){var h=E[o](g,d);if(h&&h.list.length){return h}}},j.supportsSelection=!0,j}return(l=a.getHelper(a.getCursor(),"hintWords"))?function(c){return D.hint.fromList(c,{words:l})}:D.hint.anyword?function(d,e){return D.hint.anyword(d,e)}:function(){}}var C="CodeMirror-hint",B="CodeMirror-hint-active";D.showHint=function(g,f,j){if(!f){return g.showHint(j)}j&&j.async&&(f.async=!0);var i={hint:f};if(j){for(var h in j){i[h]=j[h]}}return g.showHint(i)},D.defineExtension("showHint",function(a){a=w(this,this.getCursor("start"),a);var h=this.listSelections();if(!(h.length>1)){if(this.somethingSelected()){if(!a.hint.supportsSelection){return}for(var g=0;g<h.length;g++){if(h[g].head.line!=h[g].anchor.line){return}}}this.state.completionActive&&this.state.completionActive.close();var d=this.state.completionActive=new A(this,a);d.options.hint&&(D.signal(this,"startCompletion",this),d.update(!0))}});var z=window.requestAnimationFrame||function(b){return setTimeout(b,1000/60)},y=window.cancelAnimationFrame||clearTimeout;A.prototype={close:function(){this.active()&&(this.cm.state.completionActive=null,this.tick=null,this.cm.off("cursorActivity",this.activityFunc),this.widget&&this.data&&D.signal(this.data,"close"),this.widget&&this.widget.close(),D.signal(this.cm,"endCompletion",this.cm))},active:function(){return this.cm.state.completionActive==this},pick:function(a,f){var e=a.list[f];e.hint?e.hint(this.cm,a,e):this.cm.replaceRange(v(e),e.from||a.from,e.to||a.to,"complete"),D.signal(a,"pick",e),this.close()},cursorActivity:function(){this.debounce&&(y(this.debounce),this.debounce=0);var e=this.cm.getCursor(),d=this.cm.getLine(e.line);if(e.line!=this.startPos.line||d.length-e.ch!=this.startLen-this.startPos.ch||e.ch<this.startPos.ch||this.cm.somethingSelected()||e.ch&&this.options.closeCharacters.test(d.charAt(e.ch-1))){this.close()}else{var f=this;this.debounce=z(function(){f.update()}),this.widget&&this.widget.disable()}},update:function(e){if(null!=this.tick){if(this.options.hint.async){var d=++this.tick,f=this;this.options.hint(this.cm,function(a){f.tick==d&&f.finishUpdate(a,e)},this.options)}else{this.finishUpdate(this.options.hint(this.cm,this.options),e)}}},finishUpdate:function(a,f){this.data&&D.signal(this.data,"update");var e=this.widget&&this.widget.picked||f&&this.options.completeSingle;this.widget&&this.widget.close(),a&&this.data&&x(this.data,a)||(this.data=a,a&&a.list.length&&(e&&1==a.list.length?this.pick(a,0):(this.widget=new s(this,a),D.signal(a,"shown"))))}},s.prototype={close:function(){if(this.completion.widget==this){this.completion.widget=null,this.hints.parentNode.removeChild(this.hints),this.completion.cm.removeKeyMap(this.keyMap);var b=this.completion.cm;this.completion.options.closeOnUnfocus&&(b.off("blur",this.onBlur),b.off("focus",this.onFocus)),b.off("scroll",this.onScroll)}},disable:function(){this.completion.cm.removeKeyMap(this.keyMap);var b=this;this.keyMap={Enter:function(){b.picked=!0}},this.completion.cm.addKeyMap(this.keyMap)},pick:function(){this.completion.pick(this.data,this.selectedHint)},changeActive:function(a,f){if(a>=this.data.list.length?a=f?this.data.list.length-1:0:a<0&&(a=f?0:this.data.list.length-1),this.selectedHint!=a){var c=this.hints.childNodes[this.selectedHint];c.className=c.className.replace(" "+B,""),c=this.hints.childNodes[this.selectedHint=a],c.className+=" "+B,c.offsetTop<this.hints.scrollTop?this.hints.scrollTop=c.offsetTop-3:c.offsetTop+c.offsetHeight>this.hints.scrollTop+this.hints.clientHeight&&(this.hints.scrollTop=c.offsetTop+c.offsetHeight-this.hints.clientHeight+3),D.signal(this.data,"select",this.data.list[this.selectedHint],c)}},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1}},D.registerHelper("hint","auto",{resolve:q}),D.registerHelper("hint","fromList",function(I,H){var G=I.getCursor(),F=I.getTokenAt(G),E=D.Pos(G.line,F.end);if(F.string&&/\w/.test(F.string[F.string.length-1])){var o=F.string,n=D.Pos(G.line,F.start)}else{var o="",n=E}for(var m=[],l=0;l<H.words.length;l++){var a=H.words[l];a.slice(0,o.length)==o&&m.push(a)}return m.length?{list:m,from:n,to:E}:void 0}),D.commands.autocomplete=D.showHint;var p={hint:D.hint.auto,completeSingle:!0,alignWithWord:!0,closeCharacters:/[\s()\[\]{};:>,]/,closeOnUnfocus:!0,completeOnSingleClick:!0,container:null,customKeys:null,extraKeys:null};D.defineOption("hintOptions",null)});!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)}(function(e){var d=/[\w$]+/,f=500;e.registerHelper("hint","anyword",function(F,E){for(var D=E&&E.word||d,C=E&&E.range||f,B=F.getCursor(),A=F.getLine(B.line),z=B.ch,y=z;y&&D.test(A.charAt(y-1));){--y}for(var x=y!=z&&A.slice(y,z),w=E&&E.list||[],v={},u=new RegExp(D.source,"g"),c=-1;c<=1;c+=2){for(var b=B.line,a=Math.min(Math.max(b+c*C,F.firstLine()),F.lastLine())+c;b!=a;b+=c){for(var G,H=F.getLine(b);G=u.exec(H);){(b!=B.line||G[0]!==x)&&(x&&0!=G[0].lastIndexOf(x,0)||Object.prototype.hasOwnProperty.call(v,G[0])||(v[G[0]]=!0,w.push(G[0])))}}}return{list:w,from:e.Pos(B.line,y),to:e.Pos(B.line,z)}})});!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)}(function(j){function n(b){for(var c=0;c<b.state.activeLines.length;c++){b.removeLineClass(b.state.activeLines[c],"wrap",i),b.removeLineClass(b.state.activeLines[c],"background",p),b.removeLineClass(b.state.activeLines[c],"gutter",o)}}function m(e,d){if(e.length!=d.length){return !1}for(var f=0;f<e.length;f++){if(e[f]!=d[f]){return !1}}return !0}function l(b,q){for(var f=[],e=0;e<q.length;e++){var d=q[e];if(d.empty()){var c=b.getLineHandleVisualStart(d.head.line);f[f.length-1]!=c&&f.push(c)}}m(b.state.activeLines,f)||b.operation(function(){n(b);for(var a=0;a<f.length;a++){b.addLineClass(f[a],"wrap",i),b.addLineClass(f[a],"background",p),b.addLineClass(f[a],"gutter",o)}b.state.activeLines=f})}function k(d,c){l(d,c.ranges)}var i="CodeMirror-activeline",p="CodeMirror-activeline-background",o="CodeMirror-activeline-gutter";j.defineOption("styleActiveLine",!1,function(a,h,g){var e=g&&g!=j.Init;h&&!e?(a.state.activeLines=[],l(a,a.listSelections()),a.on("beforeSelectionChange",k)):!h&&e&&(a.off("beforeSelectionChange",k),n(a),delete a.state.activeLines)})});!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)}(function(g){function h(d){var c=d.search(j);return -1==c?0:c}var f={},j=/[^\s\u00a0]/,i=g.Pos;g.commands.toggleComment=function(b){b.toggleComment()},g.defineExtension("toggleComment",function(b){b||(b=f);for(var p=this,o=1/0,n=this.listSelections(),m=null,l=n.length-1;l>=0;l--){var k=n[l].from(),d=n[l].to();k.line>=o||(d.line>=o&&(d=i(o,0)),o=k.line,null==m?p.uncomment(k,d,b)?m="un":(p.lineComment(k,d,b),m="line"):"un"==m?p.uncomment(k,d,b):p.lineComment(k,d,b))}}),g.defineExtension("lineComment",function(t,s,r){r||(r=f);var q=this,p=q.getModeAt(t),o=r.lineComment||p.lineComment;if(!o){return void ((r.blockCommentStart||p.blockCommentStart)&&(r.fullLines=!0,q.blockComment(t,s,r)))}var e=q.getLine(t.line);if(null!=e){var d=Math.min(0!=s.ch||s.line==t.line?s.line+1:s.line,q.lastLine()+1),c=null==r.padding?" ":r.padding,b=r.commentBlankLines||t.line==s.line;q.operation(function(){if(r.indent){for(var a=null,n=t.line;n<d;++n){var m=q.getLine(n),l=m.slice(0,h(m));(null==a||a.length>l.length)&&(a=l)}for(var n=t.line;n<d;++n){var m=q.getLine(n),u=a.length;(b||j.test(m))&&(m.slice(0,u)!=a&&(u=h(m)),q.replaceRange(a+o+c,i(n,0),i(n,u)))}}else{for(var n=t.line;n<d;++n){(b||j.test(q.getLine(n)))&&q.replaceRange(o+c,i(n,0))}}})}}),g.defineExtension("blockComment",function(r,q,p){p||(p=f);var o=this,n=o.getModeAt(r),m=p.blockCommentStart||n.blockCommentStart,d=p.blockCommentEnd||n.blockCommentEnd;if(!m||!d){return void ((p.lineComment||n.lineComment)&&0!=p.fullLines&&o.lineComment(r,q,p))}var c=Math.min(q.line,o.lastLine());c!=r.line&&0==q.ch&&j.test(o.getLine(c))&&--c;var b=null==p.padding?" ":p.padding;r.line>c||o.operation(function(){if(0!=p.fullLines){var e=j.test(o.getLine(c));o.replaceRange(b+d,i(c)),o.replaceRange(m+b,i(r.line,0));var a=p.blockCommentLead||n.blockCommentLead;if(null!=a){for(var k=r.line+1;k<=c;++k){(k!=c||e)&&o.replaceRange(a+b,i(k,0))}}}else{o.replaceRange(d,q),o.replaceRange(m,r)}})}),g.defineExtension("uncomment",function(V,U,T){T||(T=f);var L,S=this,R=S.getModeAt(V),Q=Math.min(0!=U.ch||U.line==V.line?U.line:U.line-1,S.lastLine()),P=Math.min(V.line,Q),O=T.lineComment||R.lineComment,N=[],M=null==T.padding?" ":T.padding;V:if(O){for(var K=P;K<=Q;++K){var J=S.getLine(K),H=J.indexOf(O);if(H>-1&&!/comment/.test(S.getTokenTypeAt(i(K,H+1)))&&(H=-1),-1==H&&(K!=Q||K==P)&&j.test(J)){break V}if(H>-1&&j.test(J.slice(0,H))){break V}N.push(J)}if(S.operation(function(){for(var l=P;l<=Q;++l){var k=N[l-P],n=k.indexOf(O),m=n+O.length;n<0||(k.slice(m,m+M.length)==M&&(m+=M.length),L=!0,S.replaceRange("",i(l,n),i(l,m)))}}),L){return !0}}var G=T.blockCommentStart||R.blockCommentStart,F=T.blockCommentEnd||R.blockCommentEnd;if(!G||!F){return !1}var E=T.blockCommentLead||R.blockCommentLead,D=S.getLine(P),C=Q==P?D:S.getLine(Q),B=D.indexOf(G),d=C.lastIndexOf(F);if(-1==d&&P!=Q&&(C=S.getLine(--Q),d=C.lastIndexOf(F)),-1==B||-1==d||!/comment/.test(S.getTokenTypeAt(i(P,B+1)))||!/comment/.test(S.getTokenTypeAt(i(Q,d+1)))){return !1}var c=D.lastIndexOf(G,V.ch),b=-1==c?-1:D.slice(0,V.ch).indexOf(F,c+G.length);if(-1!=c&&-1!=b&&b+F.length!=V.ch){return !1}b=C.indexOf(F,U.ch);var I=C.slice(U.ch).lastIndexOf(G,b-U.ch);return c=-1==b||-1==I?-1:U.ch+I,-1!=b&&-1!=c&&c!=U.ch?!1:(S.operation(function(){S.replaceRange("",i(Q,d-(M&&C.slice(d-M.length,d)==M?M.length:0)),i(Q,d+F.length));var l=B+G.length;if(M&&D.slice(l,l+M.length)==M&&(l+=M.length),S.replaceRange("",i(P,B),i(P,l)),E){for(var k=P+1;k<=Q;++k){var o=S.getLine(k),n=o.indexOf(E);if(-1!=n&&!j.test(o.slice(0,n))){var m=n+E.length;M&&o.slice(m,m+M.length)==M&&(m+=M.length),S.replaceRange("",i(k,n),i(k,m))}}}}),!0)})});!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)}(function(g){function i(B){if(B.getOption("disableInput")){return g.Pass}for(var z,A=B.listSelections(),y=[],x=0;x<A.length;x++){var w=A[x].head,v=B.getTokenAt(w);if("comment"!=v.type){return g.Pass}var u=g.innerMode(B.getMode(),v.state).mode;if(z){if(z!=u){return g.Pass}}else{z=u}var t=null;if(z.blockCommentStart&&z.blockCommentContinue){var q,s=v.string.indexOf(z.blockCommentEnd),r=B.getRange(g.Pos(w.line,0),g.Pos(w.line,v.end));if(-1!=s&&s==v.string.length-z.blockCommentEnd.length&&w.ch>=s){}else{if(0==v.string.indexOf(z.blockCommentStart)){if(t=r.slice(0,v.start),!/^\s*$/.test(t)){t="";for(var e=0;e<v.start;++e){t+=" "}}}else{-1!=(q=r.indexOf(z.blockCommentContinue))&&q+z.blockCommentContinue.length>v.start&&/^\s*$/.test(r.slice(0,q))&&(t=r.slice(0,q))}}null!=t&&(t+=z.blockCommentContinue)}if(null==t&&z.lineComment&&h(B)){var a=B.getLine(w.line),q=a.indexOf(z.lineComment);q>-1&&(t=a.slice(0,q),/\S/.test(t)?t=null:t+=z.lineComment+a.slice(q+z.lineComment.length).match(/^\s*/)[0])}if(null==t){return g.Pass}y[x]="\n"+t}B.operation(function(){for(var b=A.length-1;b>=0;b--){B.replaceRange(y[b],A[b].from(),A[b].to(),"+insert")}})}function h(d){var c=d.getOption("continueComments");return c&&"object"==typeof c?c.continueLineComment!==!1:!0}for(var f=["clike","css","javascript"],j=0;j<f.length;++j){g.extendMode(f[j],{blockCommentContinue:" * "})}g.defineOption("continueComments",null,function(a,m,l){if(l&&l!=g.Init&&a.removeKeyMap("continueComment"),m){var k="Enter";"string"==typeof m?k=m:"object"==typeof m&&m.key&&(k=m.key);var d={name:"continueComment"};d[k]=i,a.addKeyMap(d)}})});!function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)}(function(h){function g(b){b.state.placeholder&&(b.state.placeholder.parentNode.removeChild(b.state.placeholder),b.state.placeholder=null)}function l(b){g(b);var f=b.state.placeholder=document.createElement("pre");f.style.cssText="height: 0; overflow: visible",f.className="CodeMirror-placeholder";var e=b.getOption("placeholder");"string"==typeof e&&(e=document.createTextNode(e)),f.appendChild(e),b.display.lineSpace.insertBefore(f,b.display.lineSpace.firstChild)}function k(b){i(b)&&l(b)}function j(b){var f=b.getWrapperElement(),c=i(b);f.className=f.className.replace(" CodeMirror-empty","")+(c?" CodeMirror-empty":""),c?l(b):g(b)}function i(b){return 1===b.lineCount()&&""===b.getLine(0)}h.defineOption("placeholder","",function(m,e,d){var b=d&&d!=h.Init;if(e&&!b){m.on("blur",k),m.on("change",j),m.on("swapDoc",j),j(m)}else{if(!e&&b){m.off("blur",k),m.off("change",j),m.off("swapDoc",j),g(m);var a=m.getWrapperElement();a.className=a.className.replace(" CodeMirror-empty","")}}e&&!m.hasFocus()&&k(m)})});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){a.modeInfo=[{name:"APL",mime:"text/apl",mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["pgp"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\.conf$/i},{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists.txt$/},{name:"CoffeeScript",mime:"text/x-coffeescript",mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",mime:"text/x-elm",mode:"elm",ext:["elm"]},{name:"Embedded Javascript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",mode:"erlang",ext:["erl"]},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history).md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy"]},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Jade",mime:"text/x-jade",mode:"jade",ext:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"Jinja2",mime:"null",mode:"jinja2"},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"kotlin",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps"},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NTriples",mime:"text/n-triples",mode:"ntriples",ext:["nt"]},{name:"Objective C",mime:"text/x-objectivec",mode:"clike",ext:["m","mm"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p","pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm","cgi"]},{name:"PHP",mime:"application/x-httpd-php",mode:"php",ext:["php","php3","php4","php5","phtml"]},{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:["txt","text","conf","def","list","log"]},{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["py","pyw"]},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r"],alias:["rscript"]},{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mime:"text/x-sh",mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"]},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"MariaDB",mime:"text/x-mariadb",mode:"sql"},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",mode:"stex",ext:["text","ltx"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki ",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"troff",mode:"troff",ext:["1","2","3","4","5","6","7","8","9"]},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"YAML",mime:"text/x-yaml",mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]}];for(var b=0;b<a.modeInfo.length;b++){var c=a.modeInfo[b];if(c.mimes){c.mime=c.mimes[0]}}a.findModeByMIME=function(f){f=f.toLowerCase();for(var e=0;e<a.modeInfo.length;e++){var g=a.modeInfo[e];if(g.mime==f){return g}if(g.mimes){for(var d=0;d<g.mimes.length;d++){if(g.mimes[d]==f){return g}}}}};a.findModeByExtension=function(f){for(var e=0;e<a.modeInfo.length;e++){var g=a.modeInfo[e];if(g.ext){for(var d=0;d<g.ext.length;d++){if(g.ext[d]==f){return g}}}}};a.findModeByFileName=function(e){for(var f=0;f<a.modeInfo.length;f++){var h=a.modeInfo[f];if(h.file&&h.file.test(e)){return h}}var d=e.lastIndexOf(".");var g=d>-1&&e.substring(d+1,e.length);if(g){return a.findModeByExtension(g)}};a.findModeByName=function(e){e=e.toLowerCase();for(var f=0;f<a.modeInfo.length;f++){var g=a.modeInfo[f];if(g.name.toLowerCase()==e){return g}if(g.alias){for(var d=0;d<g.alias.length;d++){if(g.alias[d].toLowerCase()==e){return g}}}}}});(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"),"cjs")}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],function(b){a(b,"amd")})}else{a(CodeMirror,"plain")}}})(function(a,c){if(!a.modeURL){a.modeURL="../mode/%N/%N.js"}var e={};function d(f,h){var g=h;return function(){if(--g==0){f()}}}function b(l,f){var k=a.modes[l].dependencies;if(!k){return f()}var j=[];for(var h=0;h<k.length;++h){if(!a.modes.hasOwnProperty(k[h])){j.push(k[h])}}if(!j.length){return f()}var g=d(f,j.length);for(var h=0;h<j.length;++h){a.requireMode(j[h],g)}}a.requireMode=function(k,f){if(typeof k!="string"){k=k.name}if(a.modes.hasOwnProperty(k)){return b(k,f)}if(e.hasOwnProperty(k)){return e[k].push(f)}var h=a.modeURL.replace(/%N/g,k);if(c=="plain"){var g=document.createElement("script");g.src=h;var i=document.getElementsByTagName("script")[0];var j=e[k]=[f];a.on(g,"load",function(){b(k,function(){for(var l=0;l<j.length;++l){j[l]()}})});i.parentNode.insertBefore(g,i)}else{if(c=="cjs"){require(h);f()}else{if(c=="amd"){requirejs([h],f)}}}};a.autoLoadMode=function(f,g){if(!a.modes.hasOwnProperty(g)){a.requireMode(g,function(){f.setOption("mode",f.getOption("mode"))})}}});